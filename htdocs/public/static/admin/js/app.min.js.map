{"version":3,"sources":["common.js","template.js","datetime.init.js","dialog.js","jquery.tag.js","backend.js","map.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","copy_obj","arr","JSON","parse","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","toString","callfunc","val","func","args","thisobj","split","argidx","indexOf","concat","apply","iif","v","m1","m2","Number","prototype","format","fix","undefined","z","this","toFixed","f","l","unshift","join","String","trim","replace","compile","data","list","temps","push","all","condition","cont","operation","match","part","result","keys","d","dialogTpl","dialogIdx","Dialog","opts","btns","text","Array","isdefault","defaultBtn","console","error","options","extend","id","header","footer","backdrop","size","type","contentClass","onsure","onshow","onshown","onhide","onhidden","closed","box","generBtn","opt","idx","show","html","title","document","body","append","bodyClass","unbind","find","remove","css","height","overflow","keyboard","self","instance","removeClass","addClass","on","click","modal","hide","close","message","time","success","warning","info","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","isPlainObject","iconMap","color","cancel","calcel","prompt","contentHtml","content","focus","input","action","actions","e","index","pickList","config","filter","url","name","searchHolder","idkey","onRow","rowTemplate","current","exthtml","btn","listbox","isloading","extField","ajax","dataType","json","htmlRow","code","trigger","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","pickLocate","locate","settedLocate","mapbox","mapinfo","map","InitMap","address","lng","lat","search","setLocate","showAtCenter","keyCode","eq","jQuery","Zepto","fn","tags","nm","onupdate","tpl","item","parents","labelgroup","before","updated","vals","label","tag","splice","datetimepicker","transOption","option","newopt","tooltips","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","each","locale","showClear","showTodayButton","showClose","keepInvalid","from","to","minDate","maxDate","radio_tab","radios","lists","prefix","is","curval","mapObj","mapBox","onPick","apis","baidu","google","tencent","gaode","BaseMap","toUpperCase","mapkey","mapType","ishide","isshow","toshow","marker","infoWindow","BaiduMap","call","GoogleMap","infoOpts","width","TencentMap","GaodeMap","isAPIReady","pointToObject","objectToPoint","setMap","showInfo","getCenter","getAddress","rs","loadAPI","Date","getTime","src","script","apiurl","createElement","appendChild","setInfoContent","addr","setTitle","setContent","center","showLocationInfo","pt","constructor","BMap","Map","addControl","NavigationControl","ScaleControl","OverviewMapControl","enableScrollWheelZoom","point","centerAndZoom","Marker","enableDragging","gc","Geocoder","addEventListener","getLocation","addOverlay","InfoWindow","object","Point","parseFloat","panTo","openInfoWindow","addComp","addressComponents","province","city","district","street","streetNumber","myGeo","getPoint","setPosition","maps","zoom","draggable","scaleControl","streetViewControl","zoomControl","position","addListener","getPosition","geocode","LatLng","setOptions","status","formatted_address","getLng","getLat","qq","align","ALIGN","BOTTOM_LEFT","margin","Size","setAnimation","MarkerAnimation","DOWN","complete","event","open","detail","setCenter","AMap","resizeEnable","dragEnable","plugin","ToolBar","Scale","OverView","setLang","setDraggable","lnglat","st","LngLat","regeocode","formattedAddress","maptype","toLowerCase","loc","stop_ajax","bread","menu","link","parent","topmenu","siblings","target","ids","prop","checked","preventDefault","letter","needChecks","idchecks","toggleClass","totext","reload","tooltip","stopPropagation","tab","inputgroup","URL","createObjectURL","file","files","is_img","figure","img","origurl","figcap","form","isbtn","origText","removeAttr","xhr","FormData","cache","processData","contentType","ajaxSettings","upload","percent","loaded","total","serialize","group","idele","infoele","user","username","mobile"],"mappings":"aAAA,SAASA,IAAIC,EAAIC,GAIb,OAHAC,OAAOC,QAAQF,EAAI,WACfG,SAASC,KAAKC,EAAEN,GAAKO,KAAK,WAEvB,EAGX,SAASC,KAAKC,GACV,OAAGC,OAAOC,UAAYD,OAAOC,SAASF,GAC3BC,OAAOC,SAASF,GAEpBA,EAGX,SAASG,aAAaC,EAAKC,GAGvB,IADA,IAAIC,EAAM,GAAGC,GADbF,EAAUA,GAAW,kEACOG,OACnBC,EAAI,EAAGA,EAAIL,EAAKK,IAAK,CAC1B,IAAIC,EAAYC,KAAKC,MAAMD,KAAKE,SAAWN,GAC3CD,GAAOD,EAAQS,UAAUJ,EAAUA,EAAU,GAEjD,OAAOJ,EAGX,SAASS,SAASC,GACd,OAAOC,KAAKC,MAAMD,KAAKE,UAAUH,IAGrC,SAASI,mBAAmBC,EAAGC,GAC3B,IAAID,IAAMC,EAAE,OAAO,EACnB,IAAID,IAAMC,EAAE,OAAO,EAInB,IAAIC,EAASC,OAAOC,oBAAoBJ,GACpCK,EAASF,OAAOC,oBAAoBH,GAIxC,GAAIC,EAAOf,QAAUkB,EAAOlB,OACxB,OAAO,EAGX,IAAK,IAAIC,EAAI,EAAGA,EAAIc,EAAOf,OAAQC,IAAK,CACpC,IAAIkB,EAAWJ,EAAOd,GAItB,GAAIY,EAAEM,KAAcL,EAAEK,GAClB,OAAO,EAMf,OAAO,EAGX,SAASC,cAAcP,EAAEC,GAErB,IADA,IAAI/B,EAAI,GACAkB,EAAE,EAAEA,EAAEY,EAAEb,UACTc,EAAEd,OAAOC,EAAE,GADKA,IAEnBlB,EAAI8B,EAAEZ,IAAIa,EAAEb,GAEhB,OAAOlB,ECkBX,SAASsC,SAAStC,GACd,OAAGA,GAAOA,EAAIuC,SACHvC,EAAIuC,WAER,GAGX,SAASC,SAASC,EAAIC,EAAKC,EAAKC,GAC5B,GAAID,EAEC,CACgB,iBAAPA,IAAgBA,EAAKA,EAAKE,MAAM,MAC1C,IAAIC,EAAOH,EAAKI,QAAQ,OACb,GAARD,EACCH,EAAKG,GAAQL,EAEbE,EAAK,CAACF,GAAKO,OAAOL,QAPtBA,EAAK,CAACF,GAWV,OAAO/B,OAAOgC,GAAMhC,OAAOgC,GAAMO,MAAML,EAAQD,GAAQF,MAAAA,EAA6B,GAAGA,EAG3F,SAASS,IAAIC,EAAEC,EAAGC,GAEd,MADO,MAAJF,IAAQA,EAAE,GACNA,EAAEC,EAAGC,EC1GhB,GDAAC,OAAOC,UAAUC,OAAO,SAASC,QACpBC,IAAND,IAAgBA,EAAI,GAIvB,IAHA,IACIE,EADIC,KAAKC,QAAQJ,GACXZ,MAAM,KACZW,EAAO,GAAGM,EAAEH,EAAE,GAAGd,MAAM,IAAIkB,EAAED,EAAE7C,OAC3BC,EAAE,EAAEA,EAAE6C,EAAE7C,IACP,EAAFA,GAAOA,EAAI,GAAG,GACbsC,EAAOQ,QAAQ,KAEnBR,EAAOQ,QAAQF,EAAEC,EAAE7C,EAAE,IAEzB,OAAOsC,EAAOS,KAAK,KAAe,GAAVN,EAAE1C,OAAU,IAAI0C,EAAE,GAAG,KAE7CO,OAAOX,UAAUY,OACjBD,OAAOX,UAAUY,KAAK,WAClB,OAAOP,KAAKQ,QAAQ,eAAe,MAG3CF,OAAOX,UAAUc,QAAQ,SAASC,EAAKC,GAEnC,GAAGA,EAAK,CACJ,IAAIC,EAAM,GACV,IAAI,IAAItD,KAAKoD,EACTE,EAAMC,KAAKb,KAAKS,QAAQC,EAAKpD,KAEjC,OAAOsD,EAAMP,KAAK,MAElB,OAAOL,KAAKQ,QAAQ,oCAAoC,SAASM,EAAKC,EAAWC,GAC7E,IAAIC,EACJ,GAAGA,EAAUF,EAAUG,MAAM,kBAAkB,CAC3CD,EAAUA,EAAU,GACpB,IAAIE,EAAKJ,EAAU9B,MAAMgC,GACC,IAAvBE,EAAK,GAAGhC,QAAQ,OACfgC,EAAK,GAAGT,EAAKS,EAAK,GAAGX,QAAQ,IAAI,MAEX,IAAvBW,EAAK,GAAGhC,QAAQ,OACfgC,EAAK,GAAGT,EAAKS,EAAK,GAAGX,QAAQ,IAAI,MAGrC,IAAIY,GAAO,EACX,OAFAH,EAAUA,EAAUV,QAGhB,IAAK,KACDa,EAASD,EAAK,IAAMA,EAAK,GACzB,MACJ,IAAK,MACDC,EAASD,EAAK,KAAOA,EAAK,GAC1B,MACJ,IAAK,IACDC,EAASD,EAAK,GAAKA,EAAK,GACxB,MACJ,IAAK,IACDC,EAASD,EAAK,GAAKA,EAAK,GAGhC,GAAGC,EACC,OAAOJ,OAGX,GAAIN,EAAKK,EAAUP,QAAQ,IAAI,KAAM,OAAOQ,EAEhD,MAAO,KACRR,QAAQ,wDAAwD,SAASM,EAAItB,EAAGV,EAAKC,GAEpF,GAAmB,EAAhBS,EAAGL,QAAQ,KAAO,CAEjB,IADA,IAAIkC,EAAK7B,EAAGP,MAAM,KAAKJ,EAAI6B,EACnBpD,EAAE,EAAEA,EAAE+D,EAAKhE,OAAOC,IAAI,CAC1B,QAAkBwC,IAAfjB,EAAIwC,EAAK/D,KAAkC,OAAfuB,EAAIwC,EAAK/D,IAEnC,CACDuB,EAAM,GACN,MAHAA,EAAIA,EAAIwC,EAAK/D,IAMrB,OAAOsB,SAASC,EAAIC,EAAKC,GAEzB,OAAOH,SAAS8B,EAAKlB,GAAIV,EAAKC,EAAK2B,MAkCnD5D,OAAM,QAAY,SAAUyC,EAAE+B,GAC1B,OAAO/B,GAAI+B,GE/Gf,SAAUxE,EAAOJ,GACb,IAAI6E,EAAU,ytBAkBVC,EAAU,EACd,SAASC,EAAOC,GAGZ,GAFIA,IAAKA,EAAK,IAEXA,EAAKC,KAAM,CACV,GAAyB,iBAAdD,EAAKC,KACZD,EAAKC,KAAO,CAAC,CAACC,KAAOF,EAAKC,YAEzB,GAAGD,EAAKC,gBAAgBE,MACzB,IAAK,IAAIvE,EAAI,EAAGA,EAAIoE,EAAKC,KAAKtE,OAAQC,IACN,iBAAjBoE,EAAKC,KAAKrE,KACjBoE,EAAKC,KAAKrE,GAAK,CAACsE,KAAQF,EAAKC,KAAKrE,KAElCoE,EAAKC,KAAKrE,GAAGwE,YACbJ,EAAKK,WAAazE,QAI1B0E,QAAQC,MAAM,0CACdP,EAAKC,KAAK,GAEM,EAAjBD,EAAKC,KAAKtE,cACeyC,IAApB4B,EAAKK,aACLL,EAAKK,WAAaL,EAAKC,KAAKtE,OAAS,EACrCqE,EAAKC,KAAKD,EAAKK,YAAYD,WAAY,GAGvCJ,EAAKC,KAAKD,EAAKK,cAAgBL,EAAKC,KAAKD,EAAKK,YAAf,OAC/BL,EAAKC,KAAKD,EAAKK,YAAf,KAAqC,YAKjD/B,KAAKkC,QAAQxF,EAAEyF,OAAO,CAClBC,GAAK,gBAAgBZ,IACrBa,QAAS,EACTC,QAAS,EACTC,UAAW,EACXC,KAAO,GACPb,KAAO,CACH,CAACC,KAAO,KAAKa,KAAO,aACpB,CAACb,KAAO,KAAKE,WAAY,EAAKW,KAAO,YAEzCV,WAAa,EACbW,aAAe,GACfC,OAAS,KACTC,OAAS,KACTC,QAAU,KACVC,OAAS,KACTC,SAAW,MACbrB,KACE1B,KAAKkC,QAAQP,MAAQ3B,KAAKkC,QAAQP,KAAKtE,OAAO,KAC9C2C,KAAKkC,QAAQI,QAAO,GAGxBtC,KAAKgD,QAAO,EACZhD,KAAKiD,IAAIvG,EAAEsD,KAAKkC,QAAQE,IAE5BX,EAAO9B,UAAUuD,SAAS,SAASC,EAAIC,GAEnC,OADGD,EAAG,OAASA,EAAG,MAAU,eAAeA,EAAG,MACvC,8CAA8CA,EAAG,MAAUA,EAAG,MAAU,yBAAyB,iBAAiBC,EAAI,KAAKD,EAAIvB,KAAK,QAE/IH,EAAO9B,UAAU0D,KAAK,SAASC,EAAKC,GAChCvD,KAAKiD,IAAIvG,EAAE,IAAIsD,KAAKkC,QAAQE,IACxBmB,IAAMA,EAAM,QAEbvD,KAAKiD,IAAI5F,OAAO,GACfX,EAAE8G,SAASC,MAAMC,OAAOnC,EAAUf,QAAQ,aAAa,cAAcR,KAAKkC,QAAQyB,UAAW,IAAI3D,KAAKkC,QAAQyB,UAAW,KAAKlD,QAAQ,CAAC2B,GAAMpC,KAAKkC,QAAQE,MAC1JpC,KAAKiD,IAAIvG,EAAE,IAAIsD,KAAKkC,QAAQE,KAE5BpC,KAAKiD,IAAIW,SAET5D,KAAKkC,QAAQG,QACbrC,KAAKiD,IAAIY,KAAK,iBAAiBC,SAE/B9D,KAAKkC,QAAQI,QACbtC,KAAKiD,IAAIY,KAAK,iBAAiBC,UAER,IAAxB9D,KAAKkC,QAAQK,WACZvC,KAAKiD,IAAIvC,KAAK,WAAWV,KAAKkC,QAAQK,WAGX,IAAxBvC,KAAKkC,QAAQK,UACZvC,KAAKiD,IAAIc,IAAI,CAACC,OAAS,EAAEC,SAAW,aAGxCjE,KAAKkC,QAAQgC,UACblE,KAAKiD,IAAIvC,KAAK,YAAW,GAI7B,IAAIyD,EAAKnE,KACTyB,EAAO2C,SAASD,EAIhB,IADA,IAAIxC,EAAK,GACDrE,EAAE,EAAEA,EAAE0C,KAAKkC,QAAQP,KAAKtE,OAAOC,IACnCqE,EAAKd,KAAKb,KAAKkD,SAASlD,KAAKkC,QAAQP,KAAKrE,GAAGA,IAEjD0C,KAAKiD,IAAIY,KAAK,sBAAsBP,KAAK3B,EAAKtB,KAAK,OAEnD,IAAI/D,EAAO0D,KAAKiD,IAAIY,KAAK,iBACzBvH,EAAO+H,YAAY,YAAYA,YAAY,YACrB,MAAnBrE,KAAKkC,QAAQM,KACZlG,EAAOgI,SAAS,YACQ,MAAnBtE,KAAKkC,QAAQM,MAClBlG,EAAOgI,SAAS,YAEjBtE,KAAKkC,QAAQQ,cACZpG,EAAOuH,KAAK,kBAAkBS,SAAStE,KAAKkC,QAAQQ,cAExD1C,KAAKiD,IAAIY,KAAK,gBAAgBjC,KAAK2B,GAEnC,IAAIE,EAAKzD,KAAKiD,IAAIY,KAAK,eA4CvB,OA3CAJ,EAAKH,KAAKA,GACVtD,KAAKiD,IAAIsB,GAAG,gBAAgB,WACrBJ,EAAKjC,QAAQY,QACZqB,EAAKjC,QAAQY,OAAOW,EAAKU,EAAKlB,KAElCxB,EAAO2C,SAAS,OAEpBpE,KAAKiD,IAAIsB,GAAG,kBAAkB,WACvBJ,EAAKjC,QAAQa,UACZoB,EAAKjC,QAAQa,SAASU,EAAKU,EAAKlB,KAEpCkB,EAAKnB,QAAO,EACZmB,EAAKlB,IAAIa,SACTK,EAAKlB,IAAI,OAEbjD,KAAKiD,IAAIsB,GAAG,gBAAgB,WACrBJ,EAAKjC,QAAQU,QACZuB,EAAKjC,QAAQU,OAAOa,EAAKU,EAAKlB,OAGtCjD,KAAKiD,IAAIsB,GAAG,iBAAiB,WACtBJ,EAAKjC,QAAQW,SACZsB,EAAKjC,QAAQW,QAAQY,EAAKU,EAAKlB,OAGpCjD,KAAKkC,QAAQI,QACZtC,KAAKiD,IAAIY,KAAK,sBAAsBW,MAAM,WACtC,IAAIpD,GAAS,EAAMgC,EAAM1G,EAAEsD,MAAMU,KAAK,SAClCyD,EAAKjC,QAAQP,KAAKyB,GAAKoB,QACvBpD,EAAS+C,EAAKjC,QAAQP,KAAKyB,GAAKoB,MAAMnF,MAAMW,KAAM,CAACyD,EAAMU,EAAKlB,OAE9DG,GAAOe,EAAKjC,QAAQH,YAChBoC,EAAKjC,QAAQS,SACbvB,EAAS+C,EAAKjC,QAAQS,OAAOtD,MAAMW,KAAM,CAACyD,EAAMU,EAAKlB,QAG9C,IAAX7B,GACA+C,EAAKlB,IAAIwB,MAAM,UAI3BzE,KAAKgD,QAAO,EACZhD,KAAKiD,IAAIwB,MAAM,QACRzE,MAEXyB,EAAO9B,UAAU+E,KAAKjD,EAAO9B,UAAUgF,MAAM,WAKzC,OAJG3E,KAAKiD,MAAQjD,KAAKgD,SACjBhD,KAAKgD,QAAO,EACZhD,KAAKiD,IAAIwB,MAAM,SAEZzE,MAGX,IAAI1D,EAAO,CACP2F,MAAM,SAAU2C,EAAQC,GACpB,OAAO7E,KAAK4E,QAAQA,EAAQ,QAAQC,IAExCC,QAAQ,SAAUF,EAAQC,GACtB,OAAO7E,KAAK4E,QAAQA,EAAQ,UAAUC,IAE1CE,QAAQ,SAAUH,EAAQC,GACtB,OAAO7E,KAAK4E,QAAQA,EAAQ,UAAUC,IAE1CG,KAAK,SAAUJ,EAAQC,GACnB,OAAO7E,KAAK4E,QAAQA,EAAQ,OAAOC,IAEvCD,QAAQ,SAAUA,EAAQnC,EAAKoC,GAC3B,IAAII,EAAS,qBACTC,EAAK,qBACT,GAAGzC,EACC,OAAQA,GACJ,IAAK,SACL,IAAK,QACDyC,EAAK,eACLD,EAAS,uBACT,MACJ,IAAK,UACDC,EAAK,UACLD,EAAS,wBACT,MACJ,IAAK,UACDC,EAAK,mBACLD,EAAS,wBAIrB,IAAI3B,EAAK,iDAAiD4B,EAAK,qBAAqBN,EAAQ,iEAExFO,EAAK,IAAI1D,EAAO,CAChBa,QAAO,EACPD,QAAO,EACPE,UAAS,EACTC,KAAK,KACLE,aAAauC,EACbrC,OAAO,SAAUa,GACbA,EAAKI,KAAK,aAAaW,MAAM,WACzBW,EAAIR,aAGbtB,KAAKC,EAAK,IAGb,OAFIuB,IAAKA,EAAK,GACdO,WAAW,WAAWD,EAAIR,SAAe,IAALE,GAC7BM,GAEXE,MAAM,SAAST,EAAQU,EAASJ,GAC5B,IAAIK,GAAO,EACPC,EAA4B,mBAAVF,EAClB/B,EAAM,GACNf,EAAK,KACLc,EAAK,GAIT,QAHcxD,IAAXwF,GAAyBE,IACxBN,EAAKI,GAEN5I,EAAE+I,cAAcb,GAAS,CAOxB,GANGA,EAAO,QACNrB,EAAMqB,EAAO,YAEI9E,IAAlB8E,EAAO,OACNpC,EAAKoC,EAAO,WAEQ9E,IAArB8E,EAAO,QACN,KAAM,oCAEVA,EAAQA,EAAO,QAEnB,IAAIc,EAAS,CACTZ,QAAU,mBACVE,KAAQ,qBACRD,QAAU,QACV9C,MAAQ,iBAER0D,EAAM,UAeV,YAdU7F,IAAPoF,EAAiBA,EAAK,qBACjBQ,EAAQR,KACZS,EAAY,SAANT,EAAc,SAASA,EAC7BA,EAAKQ,EAAQR,IAGb5B,EADD4B,EACQ,oMAAoMzE,QAAQ,CAC/MmE,QAASA,EACTM,KAAMA,EACNS,MAAOA,IAGNf,EAEF,IAAInD,EAAO,CACdE,KAAK,KACLa,KAAKA,EACLH,SAAOkB,EACPZ,OAAO,WACH,GAAG6C,EAEC,OAAOF,EADPC,GAAO,IAIfzC,OAAO,YACCyC,GAAUC,GACVF,GAAS,MAGlBjC,KAAKC,EAAKC,IAEjBhH,QAAQ,SAASqI,EAAQrI,EAAQqJ,EAAOV,GACpC,IAAIK,GAAO,EACQ,iBAAThJ,GACN2I,EAAK3I,EACa,mBAARqJ,IACNrJ,EAAQqJ,EACRA,EAAO,OAES,iBAARC,SACZX,EAAKU,GAET,IAAIF,EAAS,CACTZ,QAAU,mBACVE,KAAQ,qBACRD,QAAU,QACV9C,MAAQ,iBAER0D,EAAM,UACNT,EACIQ,EAAQR,KACZS,EAAY,SAANT,EAAc,SAASA,EAC7BA,EAAKQ,EAAQR,IAHRA,EAAK,qBAKd,IAAI5B,EAAK,oMAAoM7C,QAAQ,CACjNmE,QAAQA,EACRM,KAAKA,EACLS,MAAMA,IAEV,OAAO,IAAIlE,EAAO,CACdY,QAAS,EACTG,KAAO,KACPD,SAAW,SACXI,OAAS,WACL,GAAGpG,GAA2B,mBAATA,EAEjB,OADAgJ,GAAO,EACAhJ,KAGfuG,OAAS,WACL,GAAW,GAARyC,GAAgC,mBAARK,EACvB,OAAOA,OAGhBvC,KAAKC,IAEZwC,OAAO,SAASlB,EAAQU,EAASM,GAC7B,IACIG,EAAY,yCACZxC,EAAM,QASV,MARmB,iBAATqB,EACNrB,EAAMqB,GAENrB,EAAMqB,EAAQrB,MACXqB,EAAQoB,UACPD,GAAqD,EAAvCnB,EAAQoB,QAAQ7G,QAAQ,YAAmByF,EAAQoB,QAAUpB,EAAQoB,QAAUD,IAG9F,IAAItE,EAAO,CACdc,SAAW,SACXK,OAAS,SAASa,GACXmB,GAAWA,EAAQhC,QAClBgC,EAAQhC,OAAOa,IAGvBZ,QAAU,SAASY,GACfA,EAAKI,KAAK,wBAAwBoC,QAC/BrB,GAAWA,EAAQ/B,SAClB+B,EAAQ/B,QAAQY,IAGxBd,OAAS,SAASc,GACd,IAAI5E,EAAI4E,EAAKI,KAAK,wBAAwBhF,MAC1C,GAAoB,mBAAVyG,EAAqB,CAC3B,IAAIlE,EAASkE,EAASzG,GAItB,OAHY,IAATuC,IACQ,EAEJA,IAGf0B,OAAS,WACL,IAAU,EACN,OAAO8C,OAGhBvC,KAAK0C,EAAYtF,QAAQ,CAACyF,MAAM,oEAAoE3C,IAE3G4C,OAAO,SAAUxF,EAAK2E,EAAS/B,GAC3B,IAAID,EAAK,gGAAgG3C,EAAKN,KAAK,6EAA6E,aAC5L+F,EAAQ,KACRjB,EAAI,IAAI1D,EAAO,CACfkC,UAAY,eACZpB,SAAW,SACXC,KAAO,KACPb,KAAO,CACH,CAACC,KAAO,KAAKa,KAAO,cAExBG,OAAS,SAASa,IACd2C,EAAQ3C,EAAKI,KAAK,4BACVW,MAAM,SAAU6B,GACpBD,EAAQ/B,YAAY,UACpB3H,EAAEsD,MAAMsE,SAAS,UACjB,IAAIzF,EAAIuH,EAAQE,MAAMtG,MACF,mBAAVsF,GACc,IAAhBA,EAASzG,IACTsG,EAAIR,QAGRQ,EAAIR,WAIhBhC,OAAS,SAASc,GACd,OAAO,GAEXX,OAAS,WACL,OAAO,KAEZO,KAAKC,EAAKC,GAAY,QAE7BgD,SAAS,SAAUC,EAAOlB,EAASmB,GACZ,iBAATD,IAAkBA,EAAO,CAACE,IAAIF,IACxCA,EAAO9J,EAAEyF,OAAO,CACZuE,IAAM,GACNC,KAAO,KACPC,aAAe,SACfC,MAAQ,KACRC,MAAQ,KACR3E,OAAS,KACT4E,YAAc,mOAChBP,GAAQ,IACV,IAAIQ,EAAQ,KACRC,EAAQ,GACTT,EAAOrE,SACN8E,EAAQ,iBAAiBT,EAAOrE,OAAOwE,KAAK,2CAA2CH,EAAOrE,OAAOoB,MAAM,sBAE3GkD,IAAOA,EAAO,IACV,IAAIhF,EAAO,CACfc,SAAW,SACXM,QAAU,SAASY,GACf,IAAIyD,EAAIzD,EAAKI,KAAK,cACdqC,EAAMzC,EAAKI,KAAK,eAChBsD,EAAQ1D,EAAKI,KAAK,eAClBuD,GAAU,EACVC,EAAS,KACVb,EAAOrE,SACNkF,EAAS5D,EAAKI,KAAK,SAAS2C,EAAOrE,OAAOwE,KAAK,KAC/CjK,EAAE4K,KAAK,CACJZ,IAAIF,EAAOrE,OAAOuE,IACjBjE,KAAK,MACL8E,SAAS,OACTzC,QAAQ,SAAU0C,GACdH,EAAS3D,OAAO8C,EAAOrE,OAAOsF,QAAQhH,QAAQ+G,EAAK9G,MAAK,QAIpEwG,EAAI1C,MAAM,WACH4C,IACHA,GAAU,EACVD,EAAQ7D,KAAK,4CACbmD,EAAM,IAAQP,EAAMrH,MACjB2H,EAAOrE,SACNsE,EAAOD,EAAOrE,OAAOwE,MAAMU,EAASxI,OAExCnC,EAAE4K,KACE,CACIZ,IAAIF,EAAOE,IACXjE,KAAK,MACL8E,SAAS,OACT7G,KAAK+F,EACL3B,QAAQ,SAAS0C,GACbJ,GAAU,EACK,IAAZI,EAAKE,KACDF,EAAK9G,MAAQ8G,EAAK9G,KAAKrD,QACtB8J,EAAQ7D,KAAKkD,EAAOO,YAAYtG,QAAQ+G,EAAK9G,MAAM,IACnDyG,EAAQtD,KAAK,qBAAqBW,MAAM,WAEpC,IADA,IAAIpC,EAAK1F,EAAEsD,MAAMU,KAAK,MACbpD,EAAI,EAAGA,EAAIkK,EAAK9G,KAAKrD,OAAQC,IAClC,GAAGkK,EAAK9G,KAAKpD,GAAGkJ,EAAOK,QAAQzE,EAAG,CAC9B4E,EAAQQ,EAAK9G,KAAKpD,GAClB6J,EAAQtD,KAAK,qBAAqBQ,YAAY,UAC9C3H,EAAEsD,MAAMsE,SAAS,UACjB,UAKZ6C,EAAQ7D,KAAK,kEAAkEkD,EAAOG,KAAK,WAG/FQ,EAAQ7D,KAAK,8EAM9BqE,QAAQ,UAEfhF,OAAS,SAASc,GACd,OAAIuD,EAIgB,mBAAV1B,EACOA,EAAS0B,QAD1B,GAHI1K,EAAOyI,QAAQ,OAAOyB,EAAOG,KAAK,MAC3B,MAOhBtD,KAAK,4BAA4B4D,EAAQ,kFAAkFT,EAAOI,aAAa,uLAAuL,SAASJ,EAAOG,OAE7ViB,SAAS,SAAStC,EAASmB,GACvB,OAAOzG,KAAKuG,SAAS,CACjBG,IAAM5J,EAAO+K,eAAe,UAC5BlB,KAAO,KACPC,aAAe,mBACjBtB,EAASmB,IAEfqB,YAAY,SAASxC,EAASmB,GAC1B,OAAOzG,KAAKuG,SAAS,CACjBG,IAAM5J,EAAO+K,eAAe,WAC5Bd,YAAY,4PACZJ,KAAK,KACLE,MAAM,KACN1E,OAAO,CACJwE,KAAK,OACJpD,MAAM,QACNmD,IAAIqB,aAAa,WACjBN,QAAQ,kDAEZb,aAAe,YACjBtB,EAASmB,IAEfuB,YAAY,SAAS1C,EAASmB,GAC1B,OAAOzG,KAAKuG,SAAS,CACjBG,IAAM5J,EAAO+K,eAAe,WAC5Bd,YAAY,uQACZJ,KAAK,KACLE,MAAM,KACN1E,OAAO,CACHwE,KAAK,OACLpD,MAAM,QACNmD,IAAIqB,aAAa,WACjBN,QAAQ,kDAEZb,aAAe,YACjBtB,EAASmB,IAEfwB,WAAW,SAASxF,EAAM6C,EAAU4C,GAChC,IAAIC,EAAa,KACT,IAAI1G,EAAO,CACfe,KAAO,KACPD,SAAW,SACXM,QAAU,SAASY,GACf,IAAIyD,EAAIzD,EAAKI,KAAK,cACdqC,EAAMzC,EAAKI,KAAK,eAChBuE,EAAO3E,EAAKI,KAAK,QACjBwE,EAAQ5E,EAAKI,KAAK,YACtBuE,EAAOrE,IAAI,SAA4B,GAAnBrH,EAAEI,GAAQkH,UAC9B,IACIsE,EAAIC,QAAQ,UAAUH,EAAO,SAASI,EAAQN,GAC9CG,EAAQ/E,KAAKkF,EAAQ,SAASN,EAAOO,IAAI,IAAIP,EAAOQ,KACpDP,EAAaD,GACfA,GACFhB,EAAI1C,MAAM,WACN,IAAImE,EAAOzC,EAAMrH,MACjByJ,EAAIM,UAAUD,KAElBlF,EAAKI,KAAK,gBAAgBW,MAAM,SAAU6B,GACtCiC,EAAIO,kBAGZlG,OAAS,SAASc,GACd,OAAI0E,EAIiB,mBAAX7C,EACOA,EAAS6C,QAD1B,GAHI7L,EAAOyI,QAAQ,YACR,MAOhB1B,KAAK,kaAG+C,aAK/D3G,EAAE8G,UAAUe,GAAG,UAAW,SAAS8B,GAC/B,GAAI5E,EAAO2C,SAAX,CACA,IAAIe,EAAI1D,EAAO2C,SACE,IAAbiC,EAAEyC,SACF3D,EAAIlC,IAAIY,KAAK,sBAAsBkF,GAAG5D,EAAIjD,QAAQH,YAAY4F,QAAQ,YAS9E7K,EAAO2E,OAAO/E,EAAE+E,OAAOA,EACvB3E,EAAOR,OAAOI,EAAEJ,OAAOA,EAvlB3B,CAwlBGQ,OAAOkM,QAAQC,OCvlBlBD,OAAO7G,OAAO6G,OAAOE,GAAG,CACpBC,KAAK,SAASC,EAAGC,GACb,IAAI3I,EAAK,GACL4I,EAAI,qEAAqEF,EAAG,0JAC5EG,EAAK7M,EAAEsD,MAAMwJ,QAAQ,iBACrBC,EAAW/M,EAAE,qCACbwJ,EAAMlG,KACVA,KAAK0J,OAAOD,GACZzJ,KAAKuE,GAAG,QAAQ,WACZ,IAAI1F,EAAInC,EAAEsD,MAAMnB,MAAM2B,QAAQ,KAAK,KAC/BmJ,GAAQ,EACZ,GAAG9K,IAAyB,EAAlBA,EAAIM,QAAQ,KAAQ,CAE1B,IADA,IAAIyK,EAAK/K,EAAII,MAAM,KACX3B,EAAE,EAAEA,EAAEsM,EAAKvM,OAAOC,IACtBsM,EAAKtM,GAAGsM,EAAKtM,GAAGkD,QAAQ,WAAW,IAChCoJ,EAAKtM,KAA+B,IAAzBoD,EAAKvB,QAAQyK,EAAKtM,MAC5BoD,EAAKG,KAAK+I,EAAKtM,IACfmM,EAAW/F,OAAO4F,EAAI7I,QAAQ,CAACoJ,MAAMD,EAAKtM,MAC1CqM,GAAQ,GAGhBzD,EAAMrH,IAAI,IACP8K,GAAWN,GAASA,EAAS3I,MAErC6D,GAAG,OAAO,WACT,IAAI1F,EAAInC,EAAEsD,MAAMnB,MACbA,GACCnC,EAAEsD,MAAMnB,IAAIA,EAAM,KAAK8I,QAAQ,WAEpCA,QAAQ,QACX8B,EAAWlF,GAAG,QAAQ,SAAS,WAC3B,IAAIuF,EAAIpN,EAAEsD,MAAMwJ,QAAQ,UAAU3F,KAAK,SAAShF,MAC5CuD,EAAG1B,EAAKvB,QAAQ2K,GACjB1H,GAAG1B,EAAKqJ,OAAO3H,EAAG,GACrB1F,EAAEsD,MAAMwJ,QAAQ,UAAU1F,SACvBuF,GAASA,EAAS3I,KAEzB6I,EAAK/E,MAAM,WACP0B,EAAMD,aFtCfvJ,EAAEwM,GAAGc,eAAgB,CAAA,IAmBXC,YAAT,SAAqBC,GACjB,IAAIA,EAAO,MAAO,GAClB,IAAIC,EAAO,GACX,IAAI,IAAI7M,KAAK4M,EACT,OAAQ5M,GACJ,IAAK,WACD6M,EAAM,SAAaD,EAAO5M,GAC1B,MACJ,IAAK,WACD6M,EAAM,SAAaD,EAAO5M,GAC1B,MACJ,QACI6M,EAAO7M,GAAG4M,EAAO5M,GAG7B,OAAO6M,GAjCPC,SAAU,CACVC,MAAO,SACPC,MAAO,SACP3F,MAAO,QACP4F,YAAa,OACbC,UAAW,MACXC,UAAW,MACXC,WAAY,OACZC,SAAU,MACVC,SAAU,MACVC,aAAc,SACdC,WAAW,OACXC,WAAY,OACZC,WAAY,OACZC,YAAa,OACbC,YAAa,QAoBjBxO,EAAE,eAAeyO,KAAK,WAClB,IAAI3E,EAAO9J,EAAEyF,OAAO,CAChBiI,SAASA,SACTxK,OAAQ,aACRwL,OAAQ,QACRC,WAAU,EACVC,iBAAgB,EAChBC,WAAU,EACVC,aAAY,GACdvB,YAAYvN,EAAEsD,MAAMU,SAEtBhE,EAAEsD,MAAMgK,eAAexD,KAG3B9J,EAAE,eAAeyO,KAAK,WAClB,IAAIM,EAAO/O,EAAEsD,MAAM6D,KAAK,6BAA8B6H,EAAKhP,EAAEsD,MAAM6D,KAAK,yBACpE3B,EAAUxF,EAAEyF,OAAO,CACnBiI,SAASA,SACTxK,OAAQ,aACRwL,OAAO,QACPC,WAAU,EACVC,iBAAgB,EAChBC,WAAU,EACVC,aAAY,GACd9O,EAAEsD,MAAMU,QACV+K,EAAKzB,eAAe9H,GAASqC,GAAG,YAAa,WACrCkH,EAAK5M,OACL6M,EAAGhL,KAAK,kBAAkBiL,QAAQF,EAAK5M,SAG/C6M,EAAG1B,eAAe9H,GAASqC,GAAG,YAAa,WACnCmH,EAAG7M,OACH4M,EAAK/K,KAAK,kBAAkBkL,QAAQF,EAAG7M,WGnEvD,SAASgN,UAAUC,EAAOC,EAAMC,GAC5BtP,EAAEoP,GAAQvH,GAAG,SAAS,SAAU8B,GAC5B,GAAI3J,EAAEsD,MAAMiM,GAAG,YAAf,CACA,IAAIC,EAAOxP,EAAEsD,MAAMnB,MACnBnC,EAAEqP,GAAOrH,OACThI,EAAE,IAAIsP,EAAOE,GAAQ7I,UACtBoD,OAAO,YAAYkB,QAAQ,WCPlC,SAAU7K,EAAOJ,GAGb,IAcIyP,EAAOC,EAAOC,EAddC,EAAO,CACPC,MAAS,oEACTC,OAAU,sDACVC,QAAW,oDACXC,MAAS,sDAgDb,SAASC,EAAQlK,GACb,QAAY3C,IAAT2C,EAAoB,CACnB,IAAI5F,EAAM,UAAY4F,EAAKmK,cAE3B,IAAK9P,EAAOD,GACR,KAAM,kBAAoBA,EAAM,cAGpCmD,KAAK6M,OAAS/P,EAAOD,GACrBmD,KAAK8M,QAAUrK,EACfzC,KAAK+M,QAAS,EACd/M,KAAKgN,QAAS,EACdhN,KAAKiN,QAAS,EACdjN,KAAKkN,OAAS,KACdlN,KAAKmN,WAAa,KAClBnN,KAAKoI,OAAS,KACdpI,KAAKkI,OAAS,CAACO,IAAK,WAAYC,IAAK,WACrC1I,KAAKsI,IAAM,MA+FnB,SAAS8E,IACLT,EAAQU,KAAKrN,KAAM,SA8GvB,SAASsN,IACLX,EAAQU,KAAKrN,KAAM,UACnBA,KAAKuN,SAAW,CACZC,MAAO,IAEPjK,MAAO,IA+Gf,SAASkK,IACLd,EAAQU,KAAKrN,KAAM,WA0HvB,SAAS0N,IACLf,EAAQU,KAAKrN,KAAM,SACnBA,KAAKuN,SAAW,CACZC,MAAO,IAEPjK,MAAO,IA9bfoJ,EAAQhN,UAAUgO,WAAa,WAC3B,OAAO,GAEXhB,EAAQhN,UAAUiO,cAAgB,aAElCjB,EAAQhN,UAAUkO,cAAgB,aAElClB,EAAQhN,UAAUmO,OAAS,aAE3BnB,EAAQhN,UAAUoO,SAAW,aAE7BpB,EAAQhN,UAAUqO,UAAY,aAE9BrB,EAAQhN,UAAUsO,WAAa,SAAUC,GACrC,MAAO,IAEXvB,EAAQhN,UAAUiJ,UAAY,SAAUJ,KAGxCmE,EAAQhN,UAAUwO,QAAU,WACxB,IAAIhK,EAAOnE,KACX,GAAKA,KAAK2N,aAoBN,OALA3N,KAAKoI,OAAS1L,EAAE,IAAMsD,KAAK8M,QAAU,OACjC9M,KAAKoI,OAAO/K,OAAS,IACrB2C,KAAKoI,OAAS1L,EAAE,YAAcsD,KAAK8M,QAAU,8BAC7CV,EAAO1I,OAAO1D,KAAKoI,UAEhB,EAnBPpI,KAAKoI,OAAS1L,EAAE,YAAcsD,KAAK8M,QAAU,wCAC7CV,EAAO1I,OAAO1D,KAAKoI,QAGnB,IAAItJ,EAAO,WAAY,IAAIsP,MAAOC,UAClCvR,EAAOgC,GAAQ,WACXqF,EAAK2J,gBACEhR,EAAOgC,IAElB,IAjGYwP,EACZC,EAgGIC,EAAOlC,EAAKtM,KAAK8M,SAAStM,QAAQ,UAAUR,KAAK6M,QAErD,OAnGYyB,EAkGDE,EAAS1P,GAjGpByP,EAAS/K,SAASiL,cAAc,WAC7BhM,KAAO,kBACd8L,EAAOD,IAAMA,EACb9K,SAASC,KAAKiL,YAAYH,IA+Ff,GAWf5B,EAAQhN,UAAUgP,eAAiB,WAC/B,GAAK3O,KAAKmN,WAAV,CACA,IAAI5J,EAAQ,cACRqL,EAAO,qCACX,GAAI5O,KAAKmN,WAAW0B,SAChB7O,KAAKmN,WAAW0B,SAAStL,GACzBvD,KAAKmN,WAAW2B,WAAWF,OACxB,CAEH5O,KAAKmN,WAAW2B,WADF,4FAItBnC,EAAQhN,UAAUkJ,aAAa,WAC3B,IAAIkG,EAAO/O,KAAKgO,YAChBhO,KAAK+N,SAASgB,IAElBpC,EAAQhN,UAAUqP,iBAAmB,SAAUC,EAAIf,GAE/ClO,KAAK+N,WACL,IAAIvF,EAAQxI,KAAKiO,WAAWC,GACxBhG,EAAO,GACa,mBAAZ+G,EAAGxG,KACXP,EAAOO,IAAIwG,EAAGxG,MACdP,EAAOQ,IAAIuG,EAAGvG,QAEdR,EAAOO,IAAIwG,EAAGxG,IACdP,EAAOQ,IAAIuG,EAAGvG,KAGlB2D,EAAO7D,EAAQN,IAEnByE,EAAQhN,UAAU0D,KAAO,WACrBrD,KAAK+M,QAAS,EACd/M,KAAK8N,SACL9N,KAAK+N,YAETpB,EAAQhN,UAAU+E,KAAO,WACrB1E,KAAK+M,QAAS,EACV/M,KAAKmN,YACLnN,KAAKmN,WAAWxI,QAEhB3E,KAAKoI,QACL1L,EAAEsD,KAAKoI,QAAQtE,YASvBsJ,EAASzN,UAAY,IAAIgN,GACNuC,YAAc9B,GACxBzN,UAAUgO,WAAa,WAC5B,QAAS7Q,EAAM,MAGnBsQ,EAASzN,UAAUmO,OAAS,WACxB,IAAI3J,EAAOnE,KACX,IAAIA,KAAKgN,SAAUhN,KAAK+M,QACnB/M,KAAKmO,UAAV,CAEA,IAAI7F,EAAMnE,EAAKmE,IAAM,IAAI6G,KAAKC,IAAIpP,KAAKoI,OAAOzL,KAAK,OACnD2L,EAAI+G,WAAW,IAAIF,KAAKG,mBACxBhH,EAAI+G,WAAW,IAAIF,KAAKI,cACxBjH,EAAI+G,WAAW,IAAIF,KAAKK,oBACxBlH,EAAImH,wBAEJ,IAAIC,EAAQ1P,KAAK6N,cAAc7N,KAAKkI,QACpCI,EAAIqH,cAAcD,EAAO,IACzB1P,KAAKkN,OAAS,IAAIiC,KAAKS,OAAOF,GAC9B1P,KAAKkN,OAAO2C,iBAEZ,IAAIC,EAAK,IAAIX,KAAKY,SAElB/P,KAAKkN,OAAO8C,iBAAiB,UAAW,SAAU3J,GAE9CyJ,EAAGG,YAAY5J,EAAEqJ,MAAO,SAAUxB,GAC9B/J,EAAK6K,iBAAiB3I,EAAEqJ,MAAOxB,OAKvClO,KAAKkN,OAAO8C,iBAAiB,QAAS,SAAU3J,GAC5CyJ,EAAGG,YAAY5J,EAAEqJ,MAAO,SAAUxB,GAC9B/J,EAAK6K,iBAAiB3I,EAAEqJ,MAAOxB,OAIvC5F,EAAI4H,WAAWlQ,KAAKkN,QAEpB4C,EAAGG,YAAYP,EAAO,SAAUxB,GAC5B/J,EAAK6K,iBAAiBU,EAAOxB,KAGjClO,KAAKmN,WAAa,IAAIgC,KAAKgB,WAAW,GAAI,CACtC3C,MAAO,IACPjK,MAAO,KAGXvD,KAAKgN,QAAS,EACVhN,KAAKiN,SACLjN,KAAK+N,WACL/N,KAAKiN,QAAS,KAGtBG,EAASzN,UAAUiO,cAAgB,SAAU8B,GACzC,MAAO,CACHjH,IAAIiH,EAAMjH,IACVC,IAAIgH,EAAMhH,MAGlB0E,EAASzN,UAAUkO,cAAgB,SAAUuC,GACzC,OAAO,IAAIjB,KAAKkB,MAAMC,WAAWF,EAAO3H,KAAK6H,WAAWF,EAAO1H,OAEnE0E,EAASzN,UAAUqO,UAAY,WAC3B,IAAIe,EAAO/O,KAAKsI,IAAI0F,YACpB,OAAOhO,KAAK4N,cAAcmB,IAG9B3B,EAASzN,UAAUoO,SAAW,SAAU2B,GAChC1P,KAAK+M,SACJ/M,KAAKgN,QAIP0C,IACC1P,KAAKkI,OAAOwH,EACZ1P,KAAKkN,OAAOqD,MAAM,IAAIpB,KAAKkB,MAAMX,EAAMjH,IAAIiH,EAAMhH,OAErD1I,KAAK2O,iBAEL3O,KAAKkN,OAAOsD,eAAexQ,KAAKmN,aAT5BnN,KAAKiN,QAAS,IAWtBG,EAASzN,UAAUsO,WAAa,SAAUC,GACtC,IAAIuC,EAAUvC,EAAGwC,kBACjB,GAAGD,EACC,OAAOA,EAAQE,SAAW,KAAOF,EAAQG,KAAO,KAAOH,EAAQI,SAAW,KAAOJ,EAAQK,OAAS,KAAOL,EAAQM,cAGzH3D,EAASzN,UAAUiJ,UAAY,SAAUJ,GAErC,IAAIwI,EAAQ,IAAI7B,KAAKY,SACjB5L,EAAOnE,KACXgR,EAAMC,SAASzI,EAAS,SAAUkH,GAC1BA,GACAvL,EAAKmE,IAAIqH,cAAcD,EAAO,IAC9BvL,EAAK+I,OAAOgE,YAAYxB,GACxBsB,EAAMf,YAAYP,EAAO,SAAUxB,GAC/B/J,EAAK6K,iBAAiBU,EAAOxB,MAGjC7I,MAAM,iBAEX,OAaPiI,EAAU3N,UAAY,IAAIgN,GACNuC,YAAc5B,GACxB3N,UAAUgO,WAAa,WAC7B,OAAO7Q,EAAM,QAAcA,EAAM,OAAN,MAE/BwQ,EAAU3N,UAAUmO,OAAS,WACzB,IAAI3J,EAAOnE,KACX,IAAIA,KAAKgN,SAAUhN,KAAK+M,QACnB/M,KAAKmO,aAGNnO,KAAKoI,OAAO/K,OAAS,GAAzB,CAEA,IAAIiL,EAAMnE,EAAKmE,IAAM,IAAIkE,OAAO2E,KAAK/B,IAAIpP,KAAKoI,OAAO,GAAI,CACrDgJ,KAAM,GACNC,WAAW,EACXC,cAAc,EACdC,mBAAmB,EACnBC,aAAa,IAIb9B,EAAQ1P,KAAK6N,cAAc7N,KAAKkI,QACpCI,EAAIiI,MAAMb,GACV1P,KAAKkN,OAAS,IAAIV,OAAO2E,KAAKvB,OAAO,CAAC6B,SAAU/B,EAAOpH,IAAKA,EAAK+I,WAAW,IAG5E,IAAIvB,EAAK,IAAItD,OAAO2E,KAAKpB,SAEzB/P,KAAKkN,OAAOwE,YAAY,UAAW,WAC/BhC,EAAQvL,EAAK+I,OAAOyE,cACpB7B,EAAG8B,QAAQ,CAACpV,SAAYkT,GAAQ,SAAUxB,GACtC/J,EAAK6K,iBAAiBU,EAAOxB,OAKrClO,KAAKkN,OAAOwE,YAAY,QAAS,WAC7BhC,EAAQvL,EAAK+I,OAAOyE,cACpB7B,EAAG8B,QAAQ,CAACpV,SAAYkT,GAAQ,SAAUxB,GACtC/J,EAAK6K,iBAAiBU,EAAOxB,OAIrC4B,EAAG8B,QAAQ,CAACpV,SAAYkT,GAAQ,SAAUxB,GACtC/J,EAAK6K,iBAAiBU,EAAOxB,KAEjClO,KAAKmN,WAAa,IAAIX,OAAO2E,KAAKhB,WAAW,CAAC7H,IAAKA,IACnDtI,KAAKmN,WAAW+D,YAAYxB,GAE5B1P,KAAKgN,QAAS,EACVhN,KAAKiN,SACLjN,KAAK+N,WACL/N,KAAKiN,QAAS,KAItBK,EAAU3N,UAAUiO,cAAgB,SAAU8B,GAC1C,MAAO,CACHjH,IAAIiH,EAAMjH,IACVC,IAAIgH,EAAMhH,MAGlB4E,EAAU3N,UAAUkO,cAAgB,SAAUuC,GAC1C,OAAO,IAAI5D,OAAO2E,KAAKU,OAAOvB,WAAWF,EAAO1H,KAAK4H,WAAWF,EAAO3H,OAE3E6E,EAAU3N,UAAUqO,UAAY,WAC5B,IAAIe,EAAO/O,KAAKsI,IAAI0F,YACpB,OAAOhO,KAAK4N,cAAcmB,IAG9BzB,EAAU3N,UAAUoO,SAAW,SAAU2B,GACjC1P,KAAK+M,SACJ/M,KAAKgN,QAIP0C,IACC1P,KAAKkI,OAAOwH,EACZ1P,KAAKkN,OAAOgE,YAAYlR,KAAK6N,cAAc6B,KAE/C1P,KAAKmN,WAAW2E,WAAW,CAACL,SAAUzR,KAAKkN,OAAOyE,gBAClD3R,KAAK2O,kBARD3O,KAAKiN,QAAS,IAWtBK,EAAU3N,UAAUsO,WAAa,SAAUC,EAAI6D,GAC3C,GAAI7D,GAAMA,EAAG,GACT,OAAOA,EAAG,GAAG8D,mBAGrB1E,EAAU3N,UAAUiJ,UAAY,SAAUJ,GAEtC,IAAIwI,EAAQ,IAAIxE,OAAO2E,KAAKpB,SACxB5L,EAAOnE,KACXgR,EAAMC,SAASzI,EAAS,SAAUkH,GAC1BA,GACAvL,EAAKmE,IAAIqH,cAAcD,EAAO,IAC9BvL,EAAK+I,OAAOgE,YAAYxB,GACxBsB,EAAMf,YAAYP,EAAO,SAAUxB,GAC/B/J,EAAK6K,iBAAiBU,EAAOxB,MAGjC7I,MAAM,iBAEX,OAOPoI,EAAW9N,UAAY,IAAIgN,GACNuC,YAAczB,GACxB9N,UAAUgO,WAAa,WAC9B,OAAO7Q,EAAM,IAAUA,EAAM,GAAN,MAE3B2Q,EAAW9N,UAAUiO,cAAgB,SAAU8B,GAC3C,MAAO,CACHjH,IAAIiH,EAAMuC,SACVvJ,IAAIgH,EAAMwC,WAGlBzE,EAAW9N,UAAUkO,cAAgB,SAAUuC,GAC3C,OAAO,IAAI+B,GAAGhB,KAAKU,OAAOvB,WAAWF,EAAO1H,KAAK4H,WAAWF,EAAO3H,OAEvEgF,EAAW9N,UAAUmO,OAAS,WAC1B,IAAI3J,EAAOnE,KACX,IAAIA,KAAKgN,SAAUhN,KAAK+M,QACnB/M,KAAKmO,UAAV,CAIA,IAAI7F,EAAMnE,EAAKmE,IAAM,IAAI6J,GAAGhB,KAAK/B,IAAIpP,KAAKoI,OAAO,GAAI,CAACgJ,KAAM,KAE5D,IAAIe,GAAGhB,KAAK5B,aAAa,CACrB6C,MAAOD,GAAGhB,KAAKkB,MAAMC,YACrBC,OAAQJ,GAAGhB,KAAKqB,KAAK,GAAI,IACzBlK,IAAKA,IAMT,IAAIoH,EAAQ1P,KAAK6N,cAAc7N,KAAKkI,QACpCI,EAAIiI,MAAMb,GAGV1P,KAAKkN,OAAS,IAAIiF,GAAGhB,KAAKvB,OAAO,CAC7B6B,SAAU/B,EACV2B,WAAW,EACX/I,IAAKA,IAETtI,KAAKkN,OAAOuF,aAAaN,GAAGhB,KAAKuB,gBAAgBC,MAGjD,IAAI7C,EAAK,IAAIqC,GAAGhB,KAAKpB,SAAS,CAC1B6C,SAAU,SAAU1E,GAChB/J,EAAK6K,iBAAiBU,EAAOxB,MAIrCiE,GAAGhB,KAAK0B,MAAMnB,YAAY1R,KAAKkN,OAAQ,QAAS,WAC5CwC,EAAQvL,EAAK+I,OAAOyE,cACpB7B,EAAG7B,WAAWyB,KAGlByC,GAAGhB,KAAK0B,MAAMnB,YAAY1R,KAAKkN,OAAQ,UAAW,WAC9CwC,EAAQvL,EAAK+I,OAAOyE,cACpB7B,EAAG7B,WAAWyB,KAGlBI,EAAG7B,WAAWyB,GAEd1P,KAAKmN,WAAa,IAAIgF,GAAGhB,KAAKhB,WAAW,CAAC7H,IAAKA,IAE/CtI,KAAKgN,QAAS,EACVhN,KAAKiN,SACLjN,KAAK+N,WACL/N,KAAKiN,QAAS,KAItBQ,EAAW9N,UAAUqO,UAAY,WAC7B,IAAIe,EAAO/O,KAAKsI,IAAI0F,YACpB,OAAOhO,KAAK4N,cAAcmB,IAG9BtB,EAAW9N,UAAUoO,SAAW,SAAU2B,GAClC1P,KAAK+M,SACJ/M,KAAKgN,QAIP0C,IACC1P,KAAKkI,OAAOwH,EACZ1P,KAAKkN,OAAOgE,YAAYlR,KAAK6N,cAAc6B,KAE/C1P,KAAKmN,WAAW+D,YAAYlR,KAAKkN,OAAOyE,eACxC3R,KAAKmN,WAAW2F,OAChB9S,KAAK2O,kBATD3O,KAAKiN,QAAS,IAYtBQ,EAAW9N,UAAUsO,WAAa,SAAUC,GACxC,GAAGA,GAAMA,EAAG6E,OACR,OAAO7E,EAAG6E,OAAOvK,SAIzBiF,EAAW9N,UAAUiJ,UAAY,SAAUJ,GAEvC,IAAIrE,EAAOnE,KACC,IAAImS,GAAGhB,KAAKpB,SAAS,CAC7B6C,SAAU,SAAUxR,GAChB,GAAGA,GAAUA,EAAO2R,QAAU3R,EAAO2R,OAAOvW,SAAS,CACjD,IAAIkT,EAAMtO,EAAO2R,OAAOvW,SACxB2H,EAAKmE,IAAI0K,UAAUtD,GACnBvL,EAAK+I,OAAOgE,YAAYxB,GACxBvL,EAAK6K,iBAAiBU,EAAOtO,QAE7BiE,MAAM,iBAGdpD,MAAM,SAASb,GACXiE,MAAM,mBAGR4K,YAAYzH,MAatBkF,EAAS/N,UAAY,IAAIgN,GACNuC,YAAcxB,GACxB/N,UAAUgO,WAAa,WAC5B,QAAS7Q,EAAM,MAGnB4Q,EAAS/N,UAAUmO,OAAS,WACxB,IAAI3J,EAAOnE,KACX,IAAIA,KAAKgN,SAAUhN,KAAK+M,QACnB/M,KAAKmO,UAAV,CAGA,IAAI7F,EAAMnE,EAAKmE,IAAM,IAAI2K,KAAK7D,IAAIpP,KAAKoI,OAAOzL,KAAK,MAAO,CACtDuW,cAAc,EACdC,YAAY,EACZ/B,KAAM,KAEV9I,EAAI8K,OAAO,CAAC,eAAgB,aAAc,iBAAkB,WACxD9K,EAAI+G,WAAW,IAAI4D,KAAKI,SACxB/K,EAAI+G,WAAW,IAAI4D,KAAKK,OACxBhL,EAAI+G,WAAW,IAAI4D,KAAKM,YAG5B7W,EAAE,kBAAkBkH,SAASW,GAAG,SAAU,WACtC,IAAI3H,EAAOF,EAAEsD,MAAMnB,MACfjC,GAAM0L,EAAIkL,QAAQ5W,KACvB+K,QAAQ,UAIX,IAAI+H,EAAQ1P,KAAK6N,cAAc7N,KAAKkI,QACpCI,EAAI0K,UAAUtD,GAEd1P,KAAKkN,OAAS,IAAI+F,KAAKrD,OAAO,CAAC6B,SAAU/B,EAAOpH,IAAKA,IACrDtI,KAAKkN,OAAOuG,cAAa,GAGzBzT,KAAKmN,WAAa,IAAI8F,KAAK9C,WAC3BnQ,KAAKmN,WAAW2F,KAAKxK,EAAKoH,GAE1BpH,EAAI8K,OAAO,CAAC,iBAAkB,WAC1B,IAAItD,EAAK,IAAImD,KAAKlD,SAElB5L,EAAK+I,OAAO3I,GAAG,UAAW,SAAU8B,GAEhCyJ,EAAG7B,WAAW5H,EAAEqN,OAAQ,SAAUC,EAAIzF,GAClC/J,EAAK6K,iBAAiB3I,EAAEqN,OAAQxF,OAKxC/J,EAAK+I,OAAO3I,GAAG,QAAS,SAAU8B,GAC9ByJ,EAAG7B,WAAW5H,EAAEqN,OAAQ,SAAUC,EAAIzF,GAClC/J,EAAK6K,iBAAiB3I,EAAEqN,OAAQxF,OAIxC4B,EAAG7B,WAAWyB,EAAO,SAAUiE,EAAIzF,GAC/B/J,EAAK6K,iBAAiBU,EAAOxB,OAIrClO,KAAKgN,QAAS,EACVhN,KAAKiN,SACLjN,KAAK+N,WACL/N,KAAKiN,QAAS,KAGtBS,EAAS/N,UAAUiO,cAAgB,SAAU8B,GACzC,MAAO,CACHjH,IAAIiH,EAAMuC,SACVvJ,IAAIgH,EAAMwC,WAGlBxE,EAAS/N,UAAUkO,cAAgB,SAAUuC,GACzC,OAAO,IAAI6C,KAAKW,OAAOxD,EAAO3H,IAAK2H,EAAO1H,MAE9CgF,EAAS/N,UAAUqO,UAAY,WAC3B,IAAIe,EAAO/O,KAAKsI,IAAIyG,SACpB,OAAO/O,KAAK4N,cAAcmB,IAG9BrB,EAAS/N,UAAUoO,SAAW,SAAU2B,GAChC1P,KAAK+M,SACJ/M,KAAKgN,QAIP0C,GACC1P,KAAKkN,OAAOgE,YAAYlR,KAAK6N,cAAc6B,IAE/C1P,KAAK2O,iBACL3O,KAAKmN,WAAW+D,YAAYlR,KAAKkN,OAAOyE,gBAPpC3R,KAAKiN,QAAS,IAUtBS,EAAS/N,UAAUsO,WAAa,SAAUC,GACtC,OAAOA,EAAG2F,UAAUC,kBAGxBpG,EAAS/N,UAAUiJ,UAAY,SAAUJ,GAErC,IAAIwI,EAAQ,IAAIiC,KAAKlD,SACjB5L,EAAOnE,KACXgR,EAAMC,SAASzI,EAAS,SAAUkH,GAC1BA,GACAvL,EAAKmE,IAAIqH,cAAcD,EAAO,IAC9BvL,EAAK+I,OAAOgE,YAAYxB,GACxBsB,EAAMf,YAAYP,EAAO,SAAUxB,GAC/B/J,EAAK6K,iBAAiBU,EAAOxB,MAGjC7I,MAAM,iBAEX,KAGPvI,EAAOyL,QA/mBP,SAAiBwL,EAAQ9Q,EAAIqC,EAAS4C,GAKlC,OAJIiE,GAAQA,EAAOzH,OACnB0H,EAAO1P,EAAEuG,GACToJ,EAAO/G,EAECyO,EAAQC,eACZ,IAAK,QACD7H,EAAS,IAAIiB,EACb,MACJ,IAAK,SACDjB,EAAS,IAAImB,EACb,MACJ,IAAK,UACL,IAAK,KACDnB,EAAS,IAAIsB,EACb,MACJ,IAAK,QACDtB,EAAS,IAAIuB,EAGrB,IAAKvB,EAAQ,OAAO7P,OAAOyI,QAAQ,YACnC,GAAGmD,EAAO,CACN,GAAmB,iBAATA,EAAkB,CACxB,IAAI+L,EAAI/L,EAAOjJ,MAAM,KACrBiJ,EAAO,CACHO,IAAI6H,WAAW2D,EAAI,IACnBvL,IAAI4H,WAAW2D,EAAI,KAG3B9H,EAAOjE,OAAOA,EAIlB,OAFAiE,EAAO2B,SAEA3B,GApDf,CAmoBGrP,OAAOkM,QDpoBVlM,OAAOoX,WAAU,EAWjBlL,OAAO,SAAUtM,GAEb,IAAIyX,EAAQzX,EAAE,eACV0X,EAAOD,EAAMzT,KAAK,QACtB,GAAI0T,EAAM,CACN,IAAIC,EAAO3X,EAAE,wBAA0B0X,EAAO,KAE1C9Q,EAAO,GACX,GAAkB,EAAd+Q,EAAKhX,OACL,GAAIgX,EAAKpI,GAAG,aACR3I,EAAKzC,KAAK,+DAAiEwT,EAAKxQ,KAAK,KAAKlH,KAAK,SAAW,eAAiB0X,EAAKzS,OAAS,iBACtI,CACH,IAAI0S,EAASD,EAAK7K,QAAQ,aAAaT,GAAG,GAC1CuL,EAAOhQ,SAAS,QAChB+P,EAAK/P,SAAS,UACd,IAAIiQ,EAAUD,EAAOE,SAAS,gBAAgB3Q,KAAK,cACnDP,EAAKzC,KAAK,+DAAiE0T,EAAQ1Q,KAAK,KAAKlH,KAAK,SAAW,eAAiB4X,EAAQ3S,OAAS,aAC/I0B,EAAKzC,KAAK,qDAAuDwT,EAAKzS,OAAS,aAGvF,IAAI2B,EAAQ4Q,EAAMzT,KAAK,SACnB6C,GACAD,EAAKzC,KAAK,0DAA4D0C,EAAQ,SAElF4Q,EAAM7Q,KAAKA,EAAKjD,KAAK,OAGzB3D,EAAEI,QAAQyH,GAAG,SAAS,SAAU8B,MAE7BsB,QAAQ,UAGXjL,EAAE,iBAAiB8H,MAAM,SAAU6B,GAC/B,IAAIoO,EAAS/X,EAAEsD,MAAMU,KAAK,UACrB+T,IAAQA,EAAS,MACtB,IAAIC,EAAMhY,EAAE,SAAW+X,EAAS,KAC5B/X,EAAEsD,MAAMiM,GAAG,WACXyI,EAAIC,KAAK,WAAW,GAEpBD,EAAIC,KAAK,WAAW,KAG5BjY,EAAE,qBAAqB8H,MAAM,SAAU6B,GACnC,IAAIoO,EAAS/X,EAAEsD,MAAMU,KAAK,UACrB+T,IAAQA,EAAS,MAEtB,IADA,IAAIC,EAAMhY,EAAE,SAAW+X,EAAS,KACvBnX,EAAI,EAAGA,EAAIoX,EAAIrX,OAAQC,IACxBoX,EAAIpX,GAAGsX,QACPF,EAAI3L,GAAGzL,GAAGqX,KAAK,WAAW,GAE1BD,EAAI3L,GAAGzL,GAAGqX,KAAK,WAAW,KAMtCjY,EAAE,eAAe8H,MAAM,SAAU6B,GAC7BA,EAAEwO,iBACF,IAAI1O,EAASzJ,EAAEsD,MAAMU,KAAK,UAC1B,IAAKyF,EACD,OAAO7J,OAAO2F,MAAM,QAKxB,GAHAkE,EAAS,SAAWA,EAAO3F,QAAQ,SAAU,SAAUsU,GACnD,OAAOA,EAAOlI,iBAEb9P,OAAOqJ,IAAqC,mBAAnBrJ,OAAOqJ,GACjC,OAAO7J,OAAO2F,MAAM,QAExB,IAAI8S,EAAarY,EAAEsD,MAAMU,KAAK,cAE9B,QADmBZ,IAAfiV,IAA0BA,GAAa,GACvCA,EAAY,CACZ,IAAIN,EAAS/X,EAAEsD,MAAMU,KAAK,UACrB+T,IAAQA,EAAS,MACtB,IAAIC,EAAMhY,EAAE,SAAW+X,EAAS,aAChC,GAAIC,EAAIrX,OAAS,EACb,OAAOf,OAAOyI,QAAQ,cAGtB,IADA,IAAIiQ,EAAW,GACN1X,EAAI,EAAGA,EAAIoX,EAAIrX,OAAQC,IAC5B0X,EAASnU,KAAK6T,EAAI3L,GAAGzL,GAAGuB,OAE5B/B,OAAOqJ,GAAQ6O,QAGnBlY,OAAOqJ,OAKfzJ,EAAE,cAAc8H,MAAM,SAAU6B,GAC5B,IAAG3J,EAAEsD,MAAMU,KAAK,WAAhB,CACAhE,EAAEsD,MAAMU,KAAK,UAAU,GACvB,IAAIyD,EAAKzH,EAAEsD,MACPsU,EAAOnQ,EAAKqF,QAAQ,MACpBpH,EAAGkS,EAAO5T,KAAK,MACfqR,EAAO5N,EAAKzD,KAAK,UACrBhE,EAAE4K,KAAK,CACHZ,IAAI4N,EAAO5T,KAAK,OAChB+B,KAAK,OACL8E,SAAS,OACT7G,KAAK,CACD0B,GAAGA,EACH2P,OAAOA,GAEXjN,QAAQ,SAAU0C,GAEd,GADArD,EAAKzD,KAAK,UAAU,GACN,GAAX8G,EAAKE,KAAQ,CACZpL,OAAOwI,QAAQ0C,EAAKnL,KACpB8H,EAAK8Q,YAAY,OACjB,IAAIC,EAAO/Q,EAAKxH,KAAK,SAAS6D,QAAQ,KAAK,IAC3C2D,EAAKvC,KAAKsT,GACV9P,WAAW,WACP5I,SAAS2Y,UACX,UAEF7Y,OAAO2F,MAAMuF,EAAKnL,WAOlCK,EAAE,oBAAoB0Y,UAGtB1Y,EAAE,eAAe8H,MAAM,SAAU6B,GAC7BA,EAAEwO,iBACF,IAAI1Q,EAAOzH,EAAEsD,MACTuD,EAAQ7G,EAAEsD,MAAMU,KAAK,SACpB6C,IAAOA,EAAQ7G,EAAEsD,MAAM4B,QACvB2B,IAAOA,EAAQ7G,EAAEsD,MAAMrD,KAAK,UACvB,IAAI8E,OAAO,CACjBE,KAAM,CAAC,MACPiB,OAAQ,SAAUa,GACd/G,EAAE4K,KAAK,CACHZ,IAAKvC,EAAKxH,KAAK,QACfmI,QAAS,SAAUlD,GACf6B,EAAKH,KAAK1B,SAIvByB,KAAK,sBAAsBzG,KAAK,cAAc,OAAQ2G,KAK7D7G,EAAE,iBAAiB8H,MAAM,SAAU6B,GAC/BA,EAAEwO,iBACFxO,EAAEgP,kBACF,IAAIzT,EAAKlF,EAAEsD,MAAMU,KAAK,WAClBgG,EAAIhK,EAAEsD,MAAMrD,KAAK,QAClBiF,IAAKA,EAAKA,EAAKpB,QAAQ,aAAa,WACnCoB,IAAKA,EAAKhF,KAAK,uBAEnBN,OAAOC,QAAQqF,EAAK,WAChBlF,EAAE4K,KAAK,CACHZ,IAAIA,EACJa,SAAS,OACTzC,QAAQ,SAAU0C,GACdlL,OAAO+I,MAAMmC,EAAKnL,KACJ,GAAXmL,EAAKE,OACDF,EAAKd,IACJlK,SAASC,KAAK+K,EAAKd,IAEnBlK,SAAS2Y,WAIrBlT,MAAM,WACF3F,OAAO+I,MAAMzI,KAAK,yBAOlCF,EAAE,aAAa8H,MAAM,SAAU6B,GAC3BA,EAAEwO,iBACFxO,EAAEgP,kBACF,IAAI3O,EAAIhK,EAAEsD,MAAMrD,KAAK,QACjB+J,IAAIA,EAAIhK,EAAEsD,MAAMU,KAAK,QACf,IAAIe,OAAO,CACjBE,KAAM,CAAC,QACR0B,KAAK,YAAYqD,EAAI,6EAA6EA,EAAI,iEAAkE,UAI/KhK,EAAE,eAAe8H,MAAM,SAAU6B,GAC7BA,EAAEwO,iBACFnY,EAAEsD,MAAMsV,IAAI,UAIhB5Y,EAAE,mCAAmC6H,GAAG,SAAU,WAC9C,IAAIJ,EAAKzH,EAAEsD,MACPuV,EAAW7Y,EAAEsD,MAAMwJ,QAAQ,gBAAgBT,GAAG,GAC9CuL,EAAOiB,EAAW/L,QAAQ,OAAOT,GAAG,GACpCc,EAAQnN,EAAEsD,MAAMwJ,QAAQ,gBAAgB3F,KAAK,sBAMjD,GALIgG,EAAMnJ,KAAK,aACXmJ,EAAMnJ,KAAK,WAAWmJ,EAAMjI,QAEhCiI,EAAMjI,KAAKlF,EAAEsD,MAAMnB,OAEf/B,OAAO0Y,KAAQ1Y,OAAO0Y,IAAIC,gBAA9B,CACA,IAAIC,EAAKvR,EAAK,GAAGwR,MAAM,GACnBC,EAAOF,EAAKjT,MAAQiT,EAAKjT,KAAKvB,MAAM,2BAGpC2U,EAASvB,EAAOzQ,KAAK,WAQzB,GAPKgS,EAAOxY,SACRiX,EAAO5Q,OAAO,2QAIdmS,EAASvB,EAAOzQ,KAAK,YAEtB+R,EAAQ,CACP,IAAIE,EAAMD,EAAOhS,KAAK,OAClBkS,EAAUD,EAAIpV,KAAK,WAClBqV,IACDA,EAAUD,EAAInZ,KAAK,OACnBmZ,EAAIpV,KAAK,UAAWqV,IAExB,IAAIC,EAASH,EAAOhS,KAAK,mBACO/D,IAA5BkW,EAAOtV,KAAK,aACZsV,EAAOtV,KAAK,WAAYsV,EAAOpU,QAEnCkU,EAAInZ,KAAK,MAAOG,OAAO0Y,IAAIC,gBAAgBC,IAC3CM,EAAOpU,KAAKuC,EAAKtF,OAGrB,IAAI+G,EAAS2P,EAAW1R,KAAK,YACxB+B,EAAOvI,SACRkY,EAAW7R,OAAO,6GAClBkC,EAAS2P,EAAW1R,KAAK,aAClBW,MAAM,SAAU6B,GACnB/J,OAAOC,QAAQ,WAAY,WACvB4H,EAAKtF,IAAI,IACTgL,EAAMjI,KAAKiI,EAAMnJ,KAAK,aACnBkV,IACCE,EAAInZ,KAAK,MAAOoZ,GAChBC,EAAOpU,KAAKoU,EAAOtV,KAAK,cAE5BkF,EAAO0O,SAASxQ,iBAQhCpH,EAAE,6BAA6B8H,MAAM,SAAU6B,GAC3C,IAAI4P,EAAOvZ,EAAEsD,MAAMwJ,QAAQ,QAC3B,GAAGyM,EAAKhK,GAAG,WAAW,OAAO,EAC7B,IAAI/E,EAAMlH,KAENkW,EAA4C,UAAtCxZ,EAAEwK,GAAKyN,KAAK,WAAW/H,cAC7BuJ,EAASD,EAAMxZ,EAAEwK,GAAKtF,OAAOlF,EAAEwK,GAAKrI,MACpCqD,EAAU,CACVwE,IAAKhK,EAAEuZ,GAAMtZ,KAAK,UAClB8F,KAAM,OACN8E,SAAU,OACVzC,QAAS,SAAU0C,GACf1K,OAAOoX,WAAU,EACjBgC,EAAMxZ,EAAEwK,GAAKtF,KAAKuU,GAAUzZ,EAAEwK,GAAKrI,IAAIsX,GACtB,GAAb3O,EAAKE,KACLpL,OAAO+I,MAAMmC,EAAKnL,IAAI,WACdmL,EAAKd,IACLlK,SAASC,KAAO+K,EAAKd,IAErBlK,SAAS2Y,YAIjB7Y,OAAOyI,QAAQyC,EAAKnL,KACpBK,EAAEwK,GAAKkP,WAAW,cAG1BnU,MAAO,SAAUoU,GACbvZ,OAAOoX,WAAU,EACjBgC,EAAMxZ,EAAEwK,GAAKtF,KAAKuU,GAAUzZ,EAAEwK,GAAKrI,IAAIsX,GACvCzZ,EAAEwK,GAAKkP,WAAW,YAClB9Z,OAAO2F,MAAM,aAGrB,GAA6B,wBAAzBgU,EAAKtZ,KAAK,WAAsC,CAChD,IAAK2Z,SAED,OADAxZ,OAAOoX,WAAU,EAGrBhS,EAAQxB,KAAO,IAAI4V,SAASL,EAAK,IACjC/T,EAAQqU,OAAQ,EAChBrU,EAAQsU,aAAc,EACtBtU,EAAQuU,aAAc,EACtBvU,EAAQmU,IAAK,WACT,IAAIA,EAAM3Z,EAAEga,aAAaL,MAOzB,OANIA,EAAIM,QACJN,EAAIM,OAAO3G,iBAAiB,WAAY,SAAS6C,GAC7C,IAAI+D,EAAUpZ,KAAKC,MAAMoV,EAAMgE,OAAShE,EAAMiE,MAAQ,KACtDpa,EAAEwK,GAAKtF,KAAKuU,EAAS,MAAMS,EAAQ,QACpC,GAEAP,QAGXnU,EAAQxB,KAAOhE,EAAEuZ,GAAMc,YAG3B1Q,EAAEwO,iBACFnY,EAAEsD,MAAMrD,KAAK,YAAY,GACzBG,OAAOoX,WAAU,EACjBxX,EAAE4K,KAAKpF,KAIXxF,EAAE,aAAa8H,MAAM,SAAU6B,GAC3B,IAAI2Q,EAAQta,EAAEsD,MAAMwJ,QAAQ,gBACxByN,EAAQD,EAAMnT,KAAK,oBACnBqT,EAAUF,EAAMnT,KAAK,sBACzBvH,OAAOsL,SAAU,SAAUuP,GACvBF,EAAMpY,IAAIsY,EAAK/U,IACf8U,EAAQrY,IAAI,IAAMsY,EAAK/U,GAAK,KAAO+U,EAAKC,UAAYD,EAAKE,OAAU,MAAQF,EAAKE,OAAU,MAC3F3a,EAAEsD,MAAMU,KAAK,aAIpBhE,EAAE,gBAAgB8H,MAAM,SAAS6B,GAC7B,IACI4Q,EADMva,EAAEsD,MAAMwJ,QAAQ,gBACV3F,KAAK,oBACrBvH,OAAO2L,WAAW,KAAK,SAASC,GAC5B+O,EAAMpY,IAAIqJ,EAAOO,IAAI,IAAIP,EAAOQ,MAClCuO,EAAMpY","file":"app.min.js","sourcesContent":["function del(obj,msg) {\r\n    dialog.confirm(msg,function(){\r\n        location.href=$(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if(window.language && window.language[key]){\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '',allLen=charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz,randomPoz+1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction copy_obj(arr){\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if(!a && !b)return true;\r\n    if(!a || !b)return false;\r\n\r\n    // Of course, we can do it use for in\r\n    // Create arrays of property names\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    // If number of properties is different,\r\n    // objects are not equivalent\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        // If values of same property are not equal,\r\n        // objects are not equivalent\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If we made it this far, objects\r\n    // are considered equivalent\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a,b) {\r\n    var obj={};\r\n    for(var i=0;i<a.length;i++){\r\n        if(b.length<i+1)break;\r\n        obj[a[i]]=b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format=function(fix){\r\n    if(fix===undefined)fix=2;\r\n    var num=this.toFixed(fix);\r\n    var z=num.split('.');\r\n    var format=[],f=z[0].split(''),l=f.length;\r\n    for(var i=0;i<l;i++){\r\n        if(i>0 && i % 3==0){\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l-i-1]);\r\n    }\r\n    return format.join('')+(z.length==2?'.'+z[1]:'');\r\n};\r\nif(!String.prototype.trim){\r\n    String.prototype.trim=function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g,'');\r\n    }\r\n}\r\nString.prototype.compile=function(data,list){\r\n\r\n    if(list){\r\n        var temps=[];\r\n        for(var i in data){\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    }else{\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*){\\/if}/g,function(all, condition, cont){\r\n            var operation;\r\n            if(operation=condition.match(/\\s+(=+|<|>)\\s+/)){\r\n                operation=operation[0];\r\n                var part=condition.split(operation);\r\n                if(part[0].indexOf('@')===0){\r\n                    part[0]=data[part[0].replace('@','')];\r\n                }\r\n                if(part[1].indexOf('@')===0){\r\n                    part[1]=data[part[1].replace('@','')];\r\n                }\r\n                operation=operation.trim();\r\n                var result=false;\r\n                switch (operation){\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if(result){\r\n                    return cont;\r\n                }\r\n            }else {\r\n                if (data[condition.replace('@','')]) return cont;\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g,function(all,m1,func,args){\r\n\r\n            if(m1.indexOf('.')>0){\r\n                var keys=m1.split('.'),val=data;\r\n                for(var i=0;i<keys.length;i++){\r\n                    if(val[keys[i]]!==undefined && val[keys[i]]!==null){\r\n                        val=val[keys[i]];\r\n                    }else{\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val,func,args);\r\n            }else{\r\n                return callfunc(data[m1],func,args,data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if(obj && obj.toString){\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val,func,args,thisobj){\r\n    if(!args){\r\n        args=[val];\r\n    }else{\r\n        if(typeof args==='string')args=args.split(',');\r\n        var argidx=args.indexOf('###');\r\n        if(argidx>=0){\r\n            args[argidx]=val;\r\n        }else{\r\n            args=[val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func]?window[func].apply(thisobj,args):((val===undefined||val===null)?'':val);\r\n}\r\n\r\nfunction iif(v,m1,m2){\r\n    if(v==='0')v=0;\r\n    return v?m1:m2;\r\n}\r\n\r\nwindow['default']=function (v,d) {\r\n    return v?v:d;\r\n};","//日期组件\r\nif($.fn.datetimepicker) {\r\n    var tooltips= {\r\n        today: '定位当前日期',\r\n        clear: '清除已选日期',\r\n        close: '关闭选择器',\r\n        selectMonth: '选择月份',\r\n        prevMonth: '上个月',\r\n        nextMonth: '下个月',\r\n        selectYear: '选择年份',\r\n        prevYear: '上一年',\r\n        nextYear: '下一年',\r\n        selectDecade: '选择年份区间',\r\n        selectTime:'选择时间',\r\n        prevDecade: '上一区间',\r\n        nextDecade: '下一区间',\r\n        prevCentury: '上个世纪',\r\n        nextCentury: '下个世纪'\r\n    };\r\n\r\n    function transOption(option) {\r\n        if(!option)return {};\r\n        var newopt={};\r\n        for(var i in option){\r\n            switch (i){\r\n                case 'viewmode':\r\n                    newopt['viewMode']=option[i];\r\n                    break;\r\n                case 'keepopen':\r\n                    newopt['keepOpen']=option[i];\r\n                    break;\r\n                default:\r\n                    newopt[i]=option[i];\r\n            }\r\n        }\r\n        return newopt;\r\n    }\r\n    $('.datepicker').each(function(){\r\n        var config=$.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale: 'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },transOption($(this).data()));\r\n\r\n        $(this).datetimepicker(config);\r\n    });\r\n\r\n    $('.date-range').each(function () {\r\n        var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n        var options = $.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale:'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },$(this).data());\r\n        from.datetimepicker(options).on('dp.change', function () {\r\n            if (from.val()) {\r\n                to.data('DateTimePicker').minDate(from.val());\r\n            }\r\n        });\r\n        to.datetimepicker(options).on('dp.change', function () {\r\n            if (to.val()) {\r\n                from.data('DateTimePicker').maxDate(to.val());\r\n            }\r\n        });\r\n    });\r\n}","(function(window,$){\r\n    var dialogTpl='<div class=\"modal fade\" id=\"{@id}\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"{@id}Label\" aria-hidden=\"true\">\\n' +\r\n        '    <div class=\"modal-dialog\">\\n' +\r\n        '        <div class=\"modal-content\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\"></h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span aria-hidden=\"true\">&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx=0;\r\n    function Dialog(opts){\r\n        if(!opts)opts={};\r\n        //处理按钮\r\n        if(opts.btns) {\r\n            if (typeof(opts.btns) == 'string') {\r\n                opts.btns = [{'text':opts.btns}];\r\n            }\r\n            else if(opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    if (typeof(opts.btns[i]) == 'string') {\r\n                        opts.btns[i] = {'text': opts.btns[i]};\r\n                    }\r\n                    if (opts.btns[i].isdefault) {\r\n                        opts.defaultBtn = i;\r\n                    }\r\n                }\r\n            }else{\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns=[];\r\n            }\r\n            if(opts.btns.length>0) {\r\n                if (opts.defaultBtn === undefined) {\r\n                    opts.defaultBtn = opts.btns.length - 1;\r\n                    opts.btns[opts.defaultBtn].isdefault = true;\r\n                }\r\n\r\n                if (opts.btns[opts.defaultBtn] && !opts.btns[opts.defaultBtn]['type']) {\r\n                    opts.btns[opts.defaultBtn]['type'] = 'primary';\r\n                }\r\n            }\r\n        }\r\n\r\n        this.options=$.extend({\r\n            'id':'modal_dialog_'+dialogIdx++,\r\n            'header':true,\r\n            'footer':true,\r\n            'backdrop':true,\r\n            'size':'',\r\n            'btns':[\r\n                {'text':'取消','type':'secondary'},\r\n                {'text':'确定','isdefault':true,'type':'primary'}\r\n            ],\r\n            'defaultBtn':1,\r\n            'contentClass':'',\r\n            'onsure':null,\r\n            'onshow':null,\r\n            'onshown':null,\r\n            'onhide':null,\r\n            'onhidden':null\r\n        },opts);\r\n        if(!this.options.btns || this.options.btns.length<1){\r\n            this.options.footer=false;\r\n        }\r\n\r\n        this.closed=true;\r\n        this.box=$(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn=function(opt,idx){\r\n        if(opt['type'])opt['class']='btn-outline-'+opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn '+(opt['class']?opt['class']:'btn-outline-secondary')+'\" data-index=\"'+idx+'\">'+opt.text+'</a>';\r\n    };\r\n    Dialog.prototype.show=function(html,title){\r\n        this.box=$('#'+this.options.id);\r\n        if(!title)title='系统提示';\r\n\r\n        if(this.box.length<1) {\r\n            $(document.body).append(dialogTpl.replace('modal-body','modal-body'+(this.options.bodyClass?(' '+this.options.bodyClass):'')).compile({'id': this.options.id}));\r\n            this.box=$('#'+this.options.id);\r\n        }else{\r\n            this.box.unbind();\r\n        }\r\n        if(!this.options.header){\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if(!this.options.footer){\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if(this.options.backdrop!==true){\r\n            this.box.data('backdrop',this.options.backdrop);\r\n\r\n            //不需要背景的情况下会影响下面元素的点击\r\n            if(this.options.backdrop===false) {\r\n                this.box.css({'height':0,'overflow':'visible'});\r\n            }\r\n        }\r\n        if(!this.options.keyboard){\r\n            this.box.data('keyboard',false);\r\n        }\r\n\r\n        //this.box.find('.modal-footer .btn-primary').unbind();\r\n        var self=this;\r\n        Dialog.instance=self;\r\n\r\n        //生成按钮\r\n        var btns=[];\r\n        for(var i=0;i<this.options.btns.length;i++){\r\n            btns.push(this.generBtn(this.options.btns[i],i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var dialog=this.box.find('.modal-dialog');\r\n        dialog.removeClass('modal-sm').removeClass('modal-lg');\r\n        if(this.options.size=='sm') {\r\n            dialog.addClass('modal-sm');\r\n        }else if(this.options.size=='lg') {\r\n            dialog.addClass('modal-lg');\r\n        }\r\n        if(this.options.contentClass){\r\n            dialog.find('.modal-content').addClass(this.options.contentClass);\r\n        }\r\n        this.box.find('.modal-title').text(title);\r\n\r\n        var body=this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal',function(){\r\n            if(self.options.onhide){\r\n                self.options.onhide(body,self.box);\r\n            }\r\n            Dialog.instance=null;\r\n        });\r\n        this.box.on('hidden.bs.modal',function(){\r\n            if(self.options.onhidden){\r\n                self.options.onhidden(body,self.box);\r\n            }\r\n            self.closed=true;\r\n            self.box.remove();\r\n            self.box=null;\r\n        });\r\n        this.box.on('show.bs.modal',function(){\r\n            if(self.options.onshow){\r\n                self.options.onshow(body,self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal',function(){\r\n            if(self.options.onshown){\r\n                self.options.onshown(body,self.box);\r\n            }\r\n        });\r\n        if(this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                }\r\n                if (idx == self.options.defaultBtn) {\r\n                    if (self.options.onsure) {\r\n                        result = self.options.onsure.apply(this, [body, self.box]);\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed=false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide=Dialog.prototype.close=function(){\r\n        if(this.box && !this.closed) {\r\n            this.closed=true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog={\r\n        error:function (message,time) {\r\n            return this.message(message,'error',time);\r\n        },\r\n        success:function (message,time) {\r\n            return this.message(message,'success',time);\r\n        },\r\n        warning:function (message,time) {\r\n            return this.message(message,'warning',time);\r\n        },\r\n        info:function (message,time) {\r\n            return this.message(message,'info',time);\r\n        },\r\n        message:function (message,type,time) {\r\n            var cssClass='bg-info text-white';\r\n            var icon='information-circle';\r\n            if(type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon='close-circle';\r\n                        cssClass='bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon='warning';\r\n                        cssClass='bg-warning text-white';\r\n                        break;\r\n                    case 'success':\r\n                        icon='checkmark-circle';\r\n                        cssClass='bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            var html='<div class=\"dialog-message\" ><i class=\"ion-md-'+icon+'\"></i>&nbsp;&nbsp;'+message+'<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a></div>';\r\n\r\n            var dlg= new Dialog({\r\n                footer:false,\r\n                header:false,\r\n                backdrop:false,\r\n                size:'sm',\r\n                contentClass:cssClass,\r\n                onshow:function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html,'');\r\n            if(!time)time=2;\r\n            setTimeout(function(){dlg.close();},time*1000);\r\n            return dlg;\r\n        },\r\n        alert:function(message,callback,icon){\r\n            var called=false;\r\n            var iscallback=typeof callback=='function';\r\n            var title='';\r\n            var size='sm';\r\n            var html='';\r\n            if(callback!==undefined && !iscallback){\r\n                icon=callback;\r\n            }\r\n            if($.isPlainObject(message)){\r\n                if(message['title']){\r\n                    title=message['title'];\r\n                }\r\n                if(message['size']!==undefined){\r\n                    size=message['size'];\r\n                }\r\n                if(message['content']===undefined){\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message=message['content'];\r\n            }\r\n            var iconMap= {\r\n                'success':'checkmark-circle',\r\n                'info': 'information-circle',\r\n                'warning':'alert',\r\n                'error':'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(icon===undefined)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color=icon=='error'?'danger':icon;\r\n                icon=iconMap[icon];\r\n            }\r\n            if(icon) {\r\n                html = '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            }else{\r\n                html=message;\r\n            }\r\n            return new Dialog({\r\n                btns:'确定',\r\n                size:size,\r\n                header:title?true:false,\r\n                onsure:function(){\r\n                    if(iscallback){\r\n                        called=true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide:function(){\r\n                    if(!called && iscallback){\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html,title);\r\n        },\r\n        confirm:function(message,confirm,cancel,icon){\r\n            var called=false;\r\n            if(typeof confirm=='string'){\r\n                icon=confirm;\r\n                if(typeof cancel=='function'){\r\n                    confirm=cancel;\r\n                    cancel=null;\r\n                }\r\n            }else if(typeof calcel=='string'){\r\n                icon=cancel;\r\n            }\r\n            var iconMap= {\r\n                'success':'checkmark-circle',\r\n                'info': 'information-circle',\r\n                'warning':'alert',\r\n                'error':'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(!icon)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color=icon=='error'?'danger':icon;\r\n                icon=iconMap[icon];\r\n            }\r\n            var html='<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message:message,\r\n                icon:icon,\r\n                color:color\r\n            });\r\n            return new Dialog({\r\n                'header':false,\r\n                'size':'sm',\r\n                'backdrop':'static',\r\n                'onsure':function(){\r\n                    if(confirm && typeof confirm=='function'){\r\n                        called=true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                'onhide':function () {\r\n                    if(called==false && typeof cancel=='function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html);\r\n        },\r\n        prompt:function(message,callback,cancel){\r\n            var called=false;\r\n            var contentHtml='<div class=\"form-group\">{@input}</div>';\r\n            var title='请输入信息';\r\n            if(typeof message=='string'){\r\n                title=message;\r\n            }else{\r\n                title=message.title;\r\n                if(message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n            }\r\n            return new Dialog({\r\n                'backdrop':'static',\r\n                'onshow':function(body){\r\n                    if(message && message.onshow){\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                'onshown':function(body){\r\n                    body.find('[name=confirm_input]').focus();\r\n                    if(message && message.onshown){\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                'onsure':function(body){\r\n                    var val=body.find('[name=confirm_input]').val();\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(val);\r\n                        if(result===true){\r\n                            called=true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                'onhide':function () {\r\n                    if(called=false && typeof cancel=='function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({input:'<input type=\"text\" name=\"confirm_input\" class=\"form-control\" />'}),title);\r\n        },\r\n        action:function (list,callback,title) {\r\n            var html='<div class=\"list-group\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">'+list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">')+'</a></div>';\r\n            var actions=null;\r\n            var dlg=new Dialog({\r\n                'bodyClass':'modal-action',\r\n                'backdrop':'static',\r\n                'size':'sm',\r\n                'btns':[\r\n                    {'text':'取消','type':'secondary'}\r\n                ],\r\n                'onshow':function(body){\r\n                    actions=body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val=actions.index(this);\r\n                        if(typeof callback=='function'){\r\n                            if( callback(val)!==false){\r\n                                dlg.close();\r\n                            }\r\n                        }else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                'onsure':function(body){\r\n                    return true;\r\n                },\r\n                'onhide':function () {\r\n                    return true;\r\n                }\r\n            }).show(html,title?title:'请选择');\r\n        },\r\n        pickList:function (config,callback,filter) {\r\n            if(typeof config==='string')config={url:config};\r\n            config=$.extend({\r\n                'url':'',\r\n                'name':'对象',\r\n                'searchHolder':'根据名称搜索',\r\n                'idkey':'id',\r\n                'onRow':null,\r\n                'extend':null,\r\n                'rowTemplate':'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">[{@id}]&nbsp;<i class=\"ion-md-person\"></i> {@username}&nbsp;&nbsp;&nbsp;<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small></a>'\r\n            },config||{});\r\n            var current=null;\r\n            var exthtml='';\r\n            if(config.extend){\r\n                exthtml='<select name=\"'+config.extend.name+'\" class=\"form-control\"><option value=\"\">'+config.extend.title+'</option></select>';\r\n            }\r\n            if(!filter)filter={};\r\n            var dlg=new Dialog({\r\n                'backdrop':'static',\r\n                'onshown':function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var listbox=body.find('.list-group');\r\n                    var isloading=false;\r\n                    var extField=null;\r\n                    if(config.extend){\r\n                        extField=body.find('[name='+config.extend.name+']');\r\n                        $.ajax({\r\n                           url:config.extend.url,\r\n                            type:'GET',\r\n                            dataType:'JSON',\r\n                            success:function (json) {\r\n                                extField.append(config.extend.htmlRow.compile(json.data,true));\r\n                            }\r\n                        });\r\n                    }\r\n                    btn.click(function(){\r\n                        if(isloading)return;\r\n                        isloading=true;\r\n                        listbox.html('<span class=\"list-loading\">加载中...</span>');\r\n                        filter['key']=input.val();\r\n                        if(config.extend){\r\n                            filter[config.extend.name]=extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url:config.url,\r\n                                type:'GET',\r\n                                dataType:'JSON',\r\n                                data:filter,\r\n                                success:function(json){\r\n                                    isloading=false;\r\n                                    if(json.code===1){\r\n                                        if(json.data && json.data.length) {\r\n                                            listbox.html(config.rowTemplate.compile(json.data, true));\r\n                                            listbox.find('a.list-group-item').click(function () {\r\n                                                var id = $(this).data('id');\r\n                                                for (var i = 0; i < json.data.length; i++) {\r\n                                                    if(json.data[i][config.idkey]==id){\r\n                                                        current=json.data[i];\r\n                                                        listbox.find('a.list-group-item').removeClass('active');\r\n                                                        $(this).addClass('active');\r\n                                                        break;\r\n                                                    }\r\n                                                }\r\n                                            })\r\n                                        }else{\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> 没有检索到'+config.name+'</span>');\r\n                                        }\r\n                                    }else{\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> 加载失败</span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }).trigger('click');\r\n                },\r\n                'onsure':function(body){\r\n                    if(!current){\r\n                        dialog.warning('没有选择'+config.name+'!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\">'+exthtml+'<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"'+config.searchHolder+'\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div><div class=\"list-group list-group-picker mt-2\"></div>','请搜索并选择'+config.name);\r\n        },\r\n        pickUser:function(callback,filter){\r\n            return this.pickList({\r\n                'url':window.get_search_url('member'),\r\n                'name':'会员',\r\n                'searchHolder':'根据会员id或名称，电话来搜索'\r\n            },callback,filter);\r\n        },\r\n        pickArticle:function(callback,filter){\r\n            return this.pickList({\r\n                'url':window.get_search_url('article'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                name:'文章',\r\n                idkey:'id',\r\n                extend:{\r\n                   name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('article'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据文章标题搜索'\r\n            },callback,filter);\r\n        },\r\n        pickProduct:function(callback,filter){\r\n            return this.pickList({\r\n                'url':window.get_search_url('product'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}~{@max_price}</div></a>',\r\n                name:'产品',\r\n                idkey:'id',\r\n                extend:{\r\n                    name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('product'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据产品名称搜索'\r\n            },callback,filter);\r\n        },\r\n        pickLocate:function(type, callback, locate){\r\n            var settedLocate=null;\r\n            var dlg=new Dialog({\r\n                'size':'lg',\r\n                'backdrop':'static',\r\n                'onshown':function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var mapbox=body.find('.map');\r\n                    var mapinfo=body.find('.mapinfo');\r\n                    mapbox.css('height',$(window).height()*.6);\r\n                    var isloading=false;\r\n                    var map=InitMap('tencent',mapbox,function(address,locate){\r\n                        mapinfo.html(address+'&nbsp;'+locate.lng+','+locate.lat);\r\n                        settedLocate=locate;\r\n                    },locate);\r\n                    btn.click(function(){\r\n                        var search=input.val();\r\n                        map.setLocate(search);\r\n                    });\r\n                    body.find('.setToCenter').click(function (e) {\r\n                        map.showAtCenter();\r\n                    })\r\n                },\r\n                'onsure':function(body){\r\n                    if(!settedLocate){\r\n                        dialog.warning('没有选择位置!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback==='function'){\r\n                        var result = callback(settedLocate);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"填写地址检索位置\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\">定位到地图中心</a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\">未选择位置</div>','请选择地图位置');\r\n        }\r\n    };\r\n\r\n    //监控按键\r\n    $(document).on('keydown', function(e){\r\n        if(!Dialog.instance)return;\r\n        var dlg=Dialog.instance;\r\n        if (e.keyCode == 13) {\r\n            dlg.box.find('.modal-footer .btn').eq(dlg.options.defaultBtn).trigger('click');\r\n        }\r\n        //默认已监听关闭\r\n        /*if (e.keyCode == 27) {\r\n         self.hide();\r\n         }*/\r\n    });\r\n\r\n    //暴露接口\r\n    window.Dialog=$.Dialog=Dialog;\r\n    window.dialog=$.dialog=dialog;\r\n})(window,jQuery||Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn,{\r\n    tags:function(nm,onupdate){\r\n        var data=[];\r\n        var tpl='<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"'+nm+'\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item=$(this).parents('.form-control');\r\n        var labelgroup=$('<span class=\"badge-group\"></span>');\r\n        var input=this;\r\n        this.before(labelgroup);\r\n        this.on('keyup',function(){\r\n            var val=$(this).val().replace(/，/g,',');\r\n            var updated=false;\r\n            if(val && val.indexOf(',')>-1){\r\n                var vals=val.split(',');\r\n                for(var i=0;i<vals.length;i++){\r\n                    vals[i]=vals[i].replace(/^\\s|\\s$/g,'');\r\n                    if(vals[i] && data.indexOf(vals[i])===-1){\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({label:vals[i]}));\r\n                        updated=true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if(updated && onupdate)onupdate(data);\r\n            }\r\n        }).on('blur',function(){\r\n            var val=$(this).val();\r\n            if(val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click','.close',function(){\r\n            var tag=$(this).parents('.badge').find('input').val();\r\n            var id=data.indexOf(tag);\r\n            if(id)data.splice(id,1);\r\n            $(this).parents('.badge').remove();\r\n            if(onupdate)onupdate(data);\r\n        });\r\n        item.click(function(){\r\n            input.focus();\r\n        });\r\n    }\r\n});","window.stop_ajax=false;\r\n\r\nfunction radio_tab(radios,lists,prefix) {\r\n    $(radios).on('change',function (e) {\r\n        if(!$(this).is(':checked'))return;\r\n        var curval=$(this).val();\r\n        $(lists).hide();\r\n        $('.'+prefix+curval).show();\r\n    }).filter(':checked').trigger('change');\r\n}\r\n\r\njQuery(function ($) {\r\n    //高亮当前选中的导航\r\n    var bread = $(\".breadcrumb\");\r\n    var menu = bread.data('menu');\r\n    if (menu) {\r\n        var link = $('.side-nav a[data-key=' + menu + ']');\r\n\r\n        var html = [];\r\n        if (link.length > 0) {\r\n            if (link.is('.menu_top')) {\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + link.find('i').attr('class') + '\"></i>&nbsp;' + link.text() + '</a></li>');\r\n            } else {\r\n                var parent = link.parents('.collapse').eq(0);\r\n                parent.addClass('show');\r\n                link.addClass(\"active\");\r\n                var topmenu = parent.siblings('.card-header').find('a.menu_top');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + topmenu.find('i').attr('class') + '\"></i>&nbsp;' + topmenu.text() + '</a></li>');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\">' + link.text() + '</a></li>');\r\n            }\r\n        }\r\n        var title = bread.data('title');\r\n        if (title) {\r\n            html.push('<li class=\"breadcrumb-item active\" aria-current=\"page\">' + title + '</li>');\r\n        }\r\n        bread.html(html.join(\"\\n\"));\r\n    }\r\n\r\n    $(window).on('scroll',function (e) {\r\n\r\n    }).trigger('scroll');\r\n\r\n    //全选、反选按钮\r\n    $('.checkall-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        if ($(this).is('.active')) {\r\n            ids.prop('checked', false);\r\n        } else {\r\n            ids.prop('checked', true);\r\n        }\r\n    });\r\n    $('.checkreverse-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        for (var i = 0; i < ids.length; i++) {\r\n            if (ids[i].checked) {\r\n                ids.eq(i).prop('checked', false);\r\n            } else {\r\n                ids.eq(i).prop('checked', true);\r\n            }\r\n        }\r\n    });\r\n\r\n    //全局操作按钮\r\n    $('.action-btn').click(function (e) {\r\n        e.preventDefault();\r\n        var action = $(this).data('action');\r\n        if (!action) {\r\n            return dialog.error('未知操作');\r\n        }\r\n        action = 'action' + action.replace(/^[a-z]/, function (letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        if (!window[action] || typeof window[action] !== 'function') {\r\n            return dialog.error('未知操作');\r\n        }\r\n        var needChecks = $(this).data('needChecks');\r\n        if (needChecks === undefined) needChecks = true;\r\n        if (needChecks) {\r\n            var target = $(this).data('target');\r\n            if (!target) target = 'id';\r\n            var ids = $('[name=' + target + ']:checked');\r\n            if (ids.length < 1) {\r\n                return dialog.warning('请选择需要操作的项目');\r\n            } else {\r\n                var idchecks = [];\r\n                for (var i = 0; i < ids.length; i++) {\r\n                    idchecks.push(ids.eq(i).val());\r\n                }\r\n                window[action](idchecks);\r\n            }\r\n        } else {\r\n            window[action]();\r\n        }\r\n    });\r\n\r\n    //状态切换按钮\r\n    $('.chgstatus').click(function (e) {\r\n        if($(this).data('ajaxing'))return;\r\n        $(this).data('ajaxing',1);\r\n        var self=$(this);\r\n        var parent=self.parents('td');\r\n        var id=parent.data('id');\r\n        var status=self.data('status');\r\n        $.ajax({\r\n            url:parent.data('url'),\r\n            type:'POST',\r\n            dataType:'JSON',\r\n            data:{\r\n                id:id,\r\n                status:status\r\n            },\r\n            success:function (json) {\r\n                self.data('ajaxing',0);\r\n                if(json.code==1){\r\n                    dialog.success(json.msg);\r\n                    self.toggleClass('off');\r\n                    var totext=self.attr('title').replace('点击','');\r\n                    self.text(totext);\r\n                    setTimeout(function () {\r\n                        location.reload();\r\n                    },1000);\r\n                }else{\r\n                    dialog.error(json.msg);\r\n                }\r\n            }\r\n        })\r\n    });\r\n\r\n    //表格行操作提示\r\n    $('.operations .btn').tooltip();\r\n\r\n    //异步显示资料链接\r\n    $('a[rel=ajax]').click(function (e) {\r\n        e.preventDefault();\r\n        var self = $(this);\r\n        var title = $(this).data('title');\r\n        if (!title) title = $(this).text();\r\n        if (!title) title = $(this).attr('title');\r\n        var dlg = new Dialog({\r\n            btns: ['确定'],\r\n            onshow: function (body) {\r\n                $.ajax({\r\n                    url: self.attr('href'),\r\n                    success: function (text) {\r\n                        body.html(text);\r\n                    }\r\n                });\r\n            }\r\n        }).show('<p class=\"loading\">'+lang('loading...')+'</p>', title);\r\n\r\n    });\r\n\r\n    //确认操作\r\n    $('.link-confirm').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var text=$(this).data('confirm');\r\n        var url=$(this).attr('href');\r\n        if(text)text=text.replace(/(\\\\n|\\n)+/g,\"<br />\");\r\n        if(!text)text=lang('Confirm operation?');\r\n\r\n        dialog.confirm(text,function () {\r\n            $.ajax({\r\n                url:url,\r\n                dataType:'JSON',\r\n                success:function (json) {\r\n                    dialog.alert(json.msg);\r\n                    if(json.code==1){\r\n                        if(json.url){\r\n                            location.href=json.url;\r\n                        }else{\r\n                            location.reload();\r\n                        }\r\n                    }\r\n                },\r\n                error:function () {\r\n                    dialog.alert(lang('Server error.'));\r\n                }\r\n            })\r\n        });\r\n    });\r\n\r\n    //点击放大浏览图片效果\r\n    $('.img-view').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var url=$(this).attr('href');\r\n        if(!url)url=$(this).data('img');\r\n        var dlg = new Dialog({\r\n            btns: ['确定']\r\n        }).show('<a href=\"'+url+'\" class=\"d-block text-center\" target=\"_blank\"><img class=\"img-fluid\" src=\"'+url+'\" /></a><div class=\"text-muted text-center\">点击图片在新页面放大查看</div>', '查看图片');\r\n    });\r\n\r\n    //tab切换效果\r\n    $('.nav-tabs a').click(function (e) {\r\n        e.preventDefault();\r\n        $(this).tab('show');\r\n    });\r\n\r\n    //上传框\r\n    $('.custom-file .custom-file-input').on('change', function () {\r\n        var self=$(this);\r\n        var inputgroup=$(this).parents('.input-group').eq(0);\r\n        var parent=inputgroup.parents('div').eq(0);\r\n        var label = $(this).parents('.custom-file').find('.custom-file-label');\r\n        if(!label.data('origtext')){\r\n            label.data('origtext',label.text());\r\n        }\r\n        label.text($(this).val());\r\n\r\n        if(!window.URL && !window.URL.createObjectURL)return;\r\n        var file=self[0].files[0];\r\n        var is_img=file.type && file.type.match(/(\\.|\\/)(jpe?g|png|gif)$/);\r\n\r\n\r\n        var figure = parent.find('.figure');\r\n        if (!figure.length) {\r\n            parent.append('<figure class=\"figure\">\\n' +\r\n                '                            <img src=\"/static/images/blank.gif\" class=\"figure-img img-fluid rounded\" alt=\"image\">\\n' +\r\n                '                            <figcaption class=\"figure-caption text-center\"></figcaption>\\n' +\r\n                '                        </figure>');\r\n            figure = parent.find('.figure');\r\n        }\r\n        if(is_img) {\r\n            var img = figure.find('img');\r\n            var origurl = img.data('origurl');\r\n            if (!origurl) {\r\n                origurl = img.attr('src');\r\n                img.data('origurl', origurl);\r\n            }\r\n            var figcap = figure.find('figcaption');\r\n            if (figcap.data('origtext') === undefined) {\r\n                figcap.data('origtext', figcap.text());\r\n            }\r\n            img.attr('src', window.URL.createObjectURL(file));\r\n            figcap.text(self.val());\r\n        }\r\n\r\n        var cancel = inputgroup.find('a.cancel');\r\n        if (!cancel.length) {\r\n            inputgroup.append('<div class=\"input-group-append\"><a href=\"javascript:\" class=\"btn btn-outline-danger cancel\">取消</a></div>');\r\n            cancel = inputgroup.find('a.cancel');\r\n            cancel.click(function (e) {\r\n                dialog.confirm('取消上传该文件?', function () {\r\n                    self.val('');\r\n                    label.text(label.data('origtext'));\r\n                    if(is_img) {\r\n                        img.attr('src', origurl);\r\n                        figcap.text(figcap.data('origtext'));\r\n                    }\r\n                    cancel.parent().remove();\r\n                })\r\n\r\n            })\r\n        }\r\n    });\r\n\r\n    //表单Ajax提交\r\n    $('.btn-primary[type=submit]').click(function (e) {\r\n        var form = $(this).parents('form');\r\n        if(form.is('.noajax'))return true;\r\n        var btn = this;\r\n\r\n        var isbtn=$(btn).prop('tagName').toUpperCase()=='BUTTON';\r\n        var origText=isbtn?$(btn).text():$(btn).val();\r\n        var options = {\r\n            url: $(form).attr('action'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            success: function (json) {\r\n                window.stop_ajax=false;\r\n                isbtn?$(btn).text(origText):$(btn).val(origText);\r\n                if (json.code == 1) {\r\n                    dialog.alert(json.msg,function(){\r\n                        if (json.url) {\r\n                            location.href = json.url;\r\n                        } else {\r\n                            location.reload();\r\n                        }\r\n                    });\r\n                } else {\r\n                    dialog.warning(json.msg);\r\n                    $(btn).removeAttr('disabled');\r\n                }\r\n            },\r\n            error: function (xhr) {\r\n                window.stop_ajax=false;\r\n                isbtn?$(btn).text(origText):$(btn).val(origText);\r\n                $(btn).removeAttr('disabled');\r\n                dialog.error('服务器处理错误');\r\n            }\r\n        };\r\n        if (form.attr('enctype') === 'multipart/form-data') {\r\n            if (!FormData) {\r\n                window.stop_ajax=true;\r\n                return true;\r\n            }\r\n            options.data = new FormData(form[0]);\r\n            options.cache = false;\r\n            options.processData = false;\r\n            options.contentType = false;\r\n            options.xhr= function() { //用以显示上传进度\r\n                var xhr = $.ajaxSettings.xhr();\r\n                if (xhr.upload) {\r\n                    xhr.upload.addEventListener('progress', function(event) {\r\n                        var percent = Math.floor(event.loaded / event.total * 100);\r\n                        $(btn).text(origText+'  ('+percent+'%)');\r\n                    }, false);\r\n                }\r\n                return xhr;\r\n            };\r\n        } else {\r\n            options.data = $(form).serialize();\r\n        }\r\n\r\n        e.preventDefault();\r\n        $(this).attr('disabled', true);\r\n        window.stop_ajax=true;\r\n        $.ajax(options);\r\n    });\r\n\r\n    //用户选择按钮绑定\r\n    $('.pickuser').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('[name=member_id]');\r\n        var infoele = group.find('[name=member_info]');\r\n        dialog.pickUser( function (user) {\r\n            idele.val(user.id);\r\n            infoele.val('[' + user.id + '] ' + user.username + (user.mobile ? (' / ' + user.mobile) : ''));\r\n        }, $(this).data('filter'));\r\n    });\r\n\r\n    //位置选择按钮绑定\r\n    $('.pick-locate').click(function(e){\r\n        var group=$(this).parents('.input-group');\r\n        var idele=group.find('input[type=text]');\r\n        dialog.pickLocate('qq',function(locate){\r\n            idele.val(locate.lng+','+locate.lat);\r\n        },idele.val());\r\n    });\r\n});","\r\n(function(window,$) {\r\n\r\n\r\n    var apis = {\r\n        'baidu': '//api.map.baidu.com/api?ak=__KEY__&v=1.5&services=false&callback=',\r\n        'google': '//maps.google.com/maps/api/js?key=__KEY__&callback=',\r\n        'tencent': '//map.qq.com/api/js?v=2.exp&key=__KEY__&callback=',\r\n        'gaode': '//webapi.amap.com/maps?v=1.3&key=__KEY__&callback='\r\n    };\r\n\r\n    function loadScript(src) {\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n        script.src = src;\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    var mapObj,mapBox,onPick;\r\n\r\n    function InitMap(maptype,box,callback,locate) {\r\n        if (mapObj) mapObj.hide();\r\n        mapBox=$(box);\r\n        onPick=callback;\r\n\r\n        switch (maptype.toLowerCase()) {\r\n            case 'baidu':\r\n                mapObj = new BaiduMap();\r\n                break;\r\n            case 'google':\r\n                mapObj = new GoogleMap();\r\n                break;\r\n            case 'tencent':\r\n            case 'qq':\r\n                mapObj = new TencentMap();\r\n                break;\r\n            case 'gaode':\r\n                mapObj = new GaodeMap();\r\n                break;\r\n        }\r\n        if (!mapObj) return dialog.warning('不支持该地图类型');\r\n        if(locate){\r\n            if(typeof locate==='string'){\r\n                var loc=locate.split(',');\r\n                locate={\r\n                    lng:parseFloat(loc[0]),\r\n                    lat:parseFloat(loc[1])\r\n                }\r\n            }\r\n            mapObj.locate=locate;\r\n        }\r\n        mapObj.setMap();\r\n\r\n        return mapObj;\r\n    }\r\n\r\n    function BaseMap(type) {\r\n        if(type !== undefined) {\r\n            var key = 'MAPKEY_' + type.toUpperCase();\r\n\r\n            if (!window[key]) {\r\n                throw 'Pls define the ' + key + ' on window.';\r\n            }\r\n\r\n            this.mapkey = window[key];\r\n            this.mapType = type;\r\n            this.ishide = false;\r\n            this.isshow = false;\r\n            this.toshow = false;\r\n            this.marker = null;\r\n            this.infoWindow = null;\r\n            this.mapbox = null;\r\n            this.locate = {lng: 116.396795, lat: 39.933084};\r\n            this.map = null;\r\n        }\r\n    }\r\n\r\n    BaseMap.prototype.isAPIReady = function () {\r\n        return false;\r\n    };\r\n    BaseMap.prototype.pointToObject = function () {\r\n    };\r\n    BaseMap.prototype.objectToPoint = function () {\r\n    };\r\n    BaseMap.prototype.setMap = function () {\r\n    };\r\n    BaseMap.prototype.showInfo = function () {\r\n    };\r\n    BaseMap.prototype.getCenter = function () {\r\n    };\r\n    BaseMap.prototype.getAddress = function (rs) {\r\n        return \"\";\r\n    };\r\n    BaseMap.prototype.setLocate = function (address) {\r\n    };\r\n\r\n    BaseMap.prototype.loadAPI = function () {\r\n        var self = this;\r\n        if (!this.isAPIReady()) {\r\n            this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\">loading...</div>');\r\n            mapBox.append(this.mapbox);\r\n\r\n            //console.log(this.mapType+' maploading...');\r\n            var func = 'mapload' + new Date().getTime();\r\n            window[func] = function () {\r\n                self.setMap();\r\n                delete window[func];\r\n            };\r\n            var apiurl=apis[this.mapType].replace('__KEY__',this.mapkey);\r\n            loadScript(apiurl + func);\r\n            return false;\r\n        } else {\r\n            //console.log(this.mapType + ' maploaded');\r\n            this.mapbox = $('#' + this.mapType + 'map');\r\n            if (this.mapbox.length < 1) {\r\n                this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\"></div>');\r\n                mapBox.append(this.mapbox);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    BaseMap.prototype.setInfoContent = function () {\r\n        if (!this.infoWindow) return;\r\n        var title = '<b>当前位置</b>';\r\n        var addr = '<p style=\"line-height:1.6em;\"></p>';\r\n        if (this.infoWindow.setTitle) {\r\n            this.infoWindow.setTitle(title);\r\n            this.infoWindow.setContent(addr);\r\n        } else {\r\n            var content = '<h3>' + title + '</h3><div style=\"width:250px\">' + addr + '</div>';\r\n            this.infoWindow.setContent(content);\r\n        }\r\n    };\r\n    BaseMap.prototype.showAtCenter=function () {\r\n        var center=this.getCenter();\r\n        this.showInfo(center);\r\n    };\r\n    BaseMap.prototype.showLocationInfo = function (pt, rs) {\r\n\r\n        this.showInfo();\r\n        var address=this.getAddress(rs);\r\n        var locate={};\r\n        if (typeof (pt.lng) === 'function') {\r\n            locate.lng=pt.lng();\r\n            locate.lat=pt.lat();\r\n        } else {\r\n            locate.lng=pt.lng;\r\n            locate.lat=pt.lat;\r\n        }\r\n\r\n        onPick(address,locate);\r\n    };\r\n    BaseMap.prototype.show = function () {\r\n        this.ishide = false;\r\n        this.setMap();\r\n        this.showInfo();\r\n    };\r\n    BaseMap.prototype.hide = function () {\r\n        this.ishide = true;\r\n        if (this.infoWindow) {\r\n            this.infoWindow.close();\r\n        }\r\n        if (this.mapbox) {\r\n            $(this.mapbox).remove();\r\n        }\r\n    };\r\n\r\n\r\n    function BaiduMap() {\r\n        BaseMap.call(this, \"baidu\");\r\n    }\r\n\r\n    BaiduMap.prototype = new BaseMap();\r\n    BaiduMap.prototype.constructor = BaiduMap;\r\n    BaiduMap.prototype.isAPIReady = function () {\r\n        return !!window['BMap'];\r\n    };\r\n\r\n    BaiduMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        var map = self.map = new BMap.Map(this.mapbox.attr('id')); //初始化地图\r\n        map.addControl(new BMap.NavigationControl());  //初始化地图控件\r\n        map.addControl(new BMap.ScaleControl());\r\n        map.addControl(new BMap.OverviewMapControl());\r\n        map.enableScrollWheelZoom();\r\n\r\n        var point = this.objectToPoint(this.locate);\r\n        map.centerAndZoom(point, 15); //初始化地图中心点\r\n        this.marker = new BMap.Marker(point); //初始化地图标记\r\n        this.marker.enableDragging(); //标记开启拖拽\r\n\r\n        var gc = new BMap.Geocoder(); //地址解析类\r\n        //添加标记拖拽监听\r\n        this.marker.addEventListener(\"dragend\", function (e) {\r\n            //获取地址信息\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        //添加标记点击监听\r\n        this.marker.addEventListener(\"click\", function (e) {\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        map.addOverlay(this.marker); //将标记添加到地图中\r\n\r\n        gc.getLocation(point, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n\r\n        this.infoWindow = new BMap.InfoWindow(\"\", {\r\n            width: 250,\r\n            title: \"\"\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    BaiduMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    BaiduMap.prototype.objectToPoint = function (object) {\r\n        return new BMap.Point(parseFloat(object.lng),parseFloat(object.lat));\r\n    };\r\n    BaiduMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    BaiduMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.panTo(new BMap.Point(point.lng,point.lat));\r\n        }\r\n        this.setInfoContent();\r\n\r\n        this.marker.openInfoWindow(this.infoWindow);\r\n    };\r\n    BaiduMap.prototype.getAddress = function (rs) {\r\n        var addComp = rs.addressComponents;\r\n        if(addComp) {\r\n            return addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street + \", \" + addComp.streetNumber;\r\n        }\r\n    };\r\n    BaiduMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new BMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n\r\n    function GoogleMap() {\r\n        BaseMap.call(this, \"google\");\r\n        this.infoOpts = {\r\n            width: 250,     //信息窗口宽度\r\n            //   height: 100,     //信息窗口高度\r\n            title: \"\"  //信息窗口标题\r\n        };\r\n    }\r\n\r\n    GoogleMap.prototype = new BaseMap();\r\n    GoogleMap.prototype.constructor = GoogleMap;\r\n    GoogleMap.prototype.isAPIReady = function () {\r\n        return window['google'] && window['google']['maps']\r\n    };\r\n    GoogleMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        //说明地图已切换\r\n        if (this.mapbox.length < 1) return;\r\n\r\n        var map = self.map = new google.maps.Map(this.mapbox[0], {\r\n            zoom: 15,\r\n            draggable: true,\r\n            scaleControl: true,\r\n            streetViewControl: true,\r\n            zoomControl: true\r\n        });\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point);\r\n        this.marker = new google.maps.Marker({position: point, map: map, draggable: true});\r\n\r\n\r\n        var gc = new google.maps.Geocoder();\r\n\r\n        this.marker.addListener(\"dragend\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        //添加标记点击监听\r\n        this.marker.addListener(\"click\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        gc.geocode({'location': point}, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n        this.infoWindow = new google.maps.InfoWindow({map: map});\r\n        this.infoWindow.setPosition(point);\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    GoogleMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    GoogleMap.prototype.objectToPoint = function (object) {\r\n        return new google.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    GoogleMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GoogleMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setOptions({position: this.marker.getPosition()});\r\n        this.setInfoContent();\r\n\r\n    };\r\n    GoogleMap.prototype.getAddress = function (rs, status) {\r\n        if (rs && rs[0]) {\r\n            return rs[0].formatted_address;\r\n        }\r\n    };\r\n    GoogleMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new google.maps.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    function TencentMap() {\r\n        BaseMap.call(this, \"tencent\");\r\n    }\r\n\r\n    TencentMap.prototype = new BaseMap();\r\n    TencentMap.prototype.constructor = TencentMap;\r\n    TencentMap.prototype.isAPIReady = function () {\r\n        return window['qq'] && window['qq']['maps'];\r\n    };\r\n    TencentMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    TencentMap.prototype.objectToPoint = function (object) {\r\n        return new qq.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    TencentMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        //初始化地图\r\n        var map = self.map = new qq.maps.Map(this.mapbox[0], {zoom: 15});\r\n        //初始化地图控件\r\n        new qq.maps.ScaleControl({\r\n            align: qq.maps.ALIGN.BOTTOM_LEFT,\r\n            margin: qq.maps.Size(85, 15),\r\n            map: map\r\n        });\r\n        //map.addControl(new BMap.OverviewMapControl());\r\n        //map.enableScrollWheelZoom();\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point); //初始化地图中心点\r\n\r\n        //初始化地图标记\r\n        this.marker = new qq.maps.Marker({\r\n            position: point,\r\n            draggable: true,\r\n            map: map\r\n        });\r\n        this.marker.setAnimation(qq.maps.MarkerAnimation.DOWN);\r\n\r\n        //地址解析类\r\n        var gc = new qq.maps.Geocoder({\r\n            complete: function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            }\r\n        });\r\n\r\n        qq.maps.event.addListener(this.marker, 'click', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n        //设置Marker停止拖动事件\r\n        qq.maps.event.addListener(this.marker, 'dragend', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n\r\n        gc.getAddress(point);\r\n\r\n        this.infoWindow = new qq.maps.InfoWindow({map: map});\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    TencentMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n        this.infoWindow.open();\r\n        this.setInfoContent();\r\n    };\r\n\r\n    TencentMap.prototype.getAddress = function (rs) {\r\n        if(rs && rs.detail) {\r\n            return rs.detail.address;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var self = this;\r\n        var myGeo = new qq.maps.Geocoder({\r\n            complete: function (result) {\r\n                if(result && result.detail && result.detail.location){\r\n                    var point=result.detail.location;\r\n                    self.map.setCenter(point);\r\n                    self.marker.setPosition(point);\r\n                    self.showLocationInfo(point, result);\r\n                }else{\r\n                    alert(\"地址信息不正确，定位失败\");\r\n                }\r\n            },\r\n            error:function(result){\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        });\r\n        myGeo.getLocation(address);\r\n    };\r\n\r\n\r\n    function GaodeMap() {\r\n        BaseMap.call(this, \"gaode\");\r\n        this.infoOpts = {\r\n            width: 250,     //信息窗口宽度\r\n            //   height: 100,     //信息窗口高度\r\n            title: \"\"  //信息窗口标题\r\n        };\r\n    }\r\n\r\n    GaodeMap.prototype = new BaseMap();\r\n    GaodeMap.prototype.constructor = GaodeMap;\r\n    GaodeMap.prototype.isAPIReady = function () {\r\n        return !!window['AMap']\r\n    };\r\n\r\n    GaodeMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        var map = self.map = new AMap.Map(this.mapbox.attr('id'), {\r\n            resizeEnable: true,\r\n            dragEnable: true,\r\n            zoom: 13\r\n        });\r\n        map.plugin([\"AMap.ToolBar\", \"AMap.Scale\", \"AMap.OverView\"], function () {\r\n            map.addControl(new AMap.ToolBar());\r\n            map.addControl(new AMap.Scale());\r\n            map.addControl(new AMap.OverView());\r\n        });\r\n\r\n        $('[name=txtLang]').unbind().on('change', function () {\r\n            var lang = $(this).val();\r\n            if (lang) map.setLang(lang);\r\n        }).trigger('change');\r\n\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.setCenter(point);\r\n\r\n        this.marker = new AMap.Marker({position: point, map: map}); //初始化地图标记\r\n        this.marker.setDraggable(true); //标记开启拖拽\r\n\r\n\r\n        this.infoWindow = new AMap.InfoWindow();\r\n        this.infoWindow.open(map, point);\r\n\r\n        map.plugin([\"AMap.Geocoder\"], function () {\r\n            var gc = new AMap.Geocoder(); //地址解析类\r\n            //添加标记拖拽监听\r\n            self.marker.on(\"dragend\", function (e) {\r\n                //获取地址信息\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            //添加标记点击监听\r\n            self.marker.on(\"click\", function (e) {\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            gc.getAddress(point, function (st, rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    GaodeMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    GaodeMap.prototype.objectToPoint = function (object) {\r\n        return new AMap.LngLat(object.lng, object.lat);\r\n    };\r\n    GaodeMap.prototype.getCenter = function () {\r\n        var center=this.map.center();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GaodeMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.setInfoContent();\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n    };\r\n\r\n    GaodeMap.prototype.getAddress = function (rs) {\r\n        return rs.regeocode.formattedAddress;\r\n    };\r\n\r\n    GaodeMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new AMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    window.InitMap=InitMap;\r\n})(window,jQuery);"]}