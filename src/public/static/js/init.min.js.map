{"version":3,"sources":["common.js","template.js","datetime.init.js","front.js","dialog.js","jquery.tag.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","copy_obj","arr","JSON","parse","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","toString","callfunc","val","func","args","thisobj","argidx","split","indexOf","concat","apply","html_encode","html","output","temp","undefined","document","createElement","textContent","innerText","innerHTML","html_decode","text","pad_zero","n","c","Array","join","timestamp_date","timestamp","fmt","jsdate","txt_weekdays","txt_ordin","txt_months","f","Date","1","2","3","21","22","23","31","d","j","D","l","substr","getDate","w","N","S","getDay","z","getFullYear","W","L","nd","nd2","round","getTime","F","m","M","getMonth","t","y","Y","slice","getHours","A","toUpperCase","B","off","getTimezoneOffset","theSeconds","getMinutes","getSeconds","beat","String","g","G","h","H","s","O","abs","P","U","replace","iif","v","m1","m2","transOption","option","newopt","tooltips","setNav","nav","current","findCurrentNav","intval","setNavHover","hover","clearInterval","setInterval","index","this","items","removeClass","eq","addClass","prev","css","outerWidth","data","pnav","lastIndexOf","Number","prototype","format","fix","toFixed","unshift","trim","compile","list","temps","push","all","condition","cont","conts","operation","match","part","result","keys","dialogIdx","format_btn","btn","isdefault","_typeof","type","Dialog","opts","btns","console","error","options","extend","id","header","footer","backdrop","tabindex","size","contentClass","onsure","onshow","onshown","onhide","onhidden","btncount","addbtn","splice","addbtns","closed","box","generBtn","opt","idx","getDefaultBtn","show","title","body","append","bodyClass","unbind","find","remove","height","overflow","keyboard","self","instance","on","modal","click","hide","close","message","time","success","warning","info","loading","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","buttonText","isPlainObject","iconMap","color","cancel","countdown","btnText","inteval","prompt","contentHtml","is_multi","is_textarea","multiset","dftValue","inputHtml","content","multi","default","label","value","sub_is_textarea","firstInput","select","inputs","each","input","action","actions","e","pickTree","config","filter","url","call","isajax","selected","pid","name","idkey","titlekey","level","onRow","toList","json","breadTemplate","rowTemplate","contentTpl","breadcrumb","listbox","lastLoading","loadList","curLoading","ajax","dataType","code","lists","pop","prop","findIndex","pickList","searchHolder","searchkey","exthtml","extField","isloading","htmlRow","trigger","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","titletpl","pickCategory","model","pickLocate","locate","settedLocate","address","mapbox","mapinfo","map","InitMap","formatted","comp","lng","lat","search","setLocate","showAtCenter","keyCode","currentModal","jQuery","Zepto","fn","tags","nm","onupdate","tpl","item","parents","labelgroup","before","updated","vals","tag","focus","datetimepicker","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","locale","showClear","showTodayButton","showClose","keepInvalid","from","to","minDate","maxDate","width","stop","slideDown","slideUp","preventDefault","stopPropagation","opened","p","siblings","children"],"mappings":"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","file":"init.min.js","sourcesContent":["function del(obj,msg) {\r\n    dialog.confirm(msg,function(){\r\n        location.href=$(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if(window.language && window.language[key]){\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '',allLen=charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz,randomPoz+1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction copy_obj(arr){\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if(!a && !b)return true;\r\n    if(!a || !b)return false;\r\n\r\n    // Of course, we can do it use for in\r\n    // Create arrays of property names\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    // If number of properties is different,\r\n    // objects are not equivalent\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        // If values of same property are not equal,\r\n        // objects are not equivalent\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If we made it this far, objects\r\n    // are considered equivalent\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a,b) {\r\n    var obj={};\r\n    for(var i=0;i<a.length;i++){\r\n        if(b.length<i+1)break;\r\n        obj[a[i]]=b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format=function(fix){\r\n    if(fix===undefined)fix=2;\r\n    var num=this.toFixed(fix);\r\n    var z=num.split('.');\r\n    var format=[],f=z[0].split(''),l=f.length;\r\n    for(var i=0;i<l;i++){\r\n        if(i>0 && i % 3==0){\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l-i-1]);\r\n    }\r\n    return format.join('')+(z.length==2?'.'+z[1]:'');\r\n};\r\nif(!String.prototype.trim){\r\n    String.prototype.trim=function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g,'');\r\n    }\r\n}\r\nString.prototype.compile=function(data,list){\r\n\r\n    if(list){\r\n        var temps=[];\r\n        for(var i in data){\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    }else{\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*?){\\/if}/g,function(all, condition, cont){\r\n            var operation;\r\n            var conts=cont.split('{else}');\r\n            if(operation=condition.match(/\\s+(=+|<|>)\\s+/)){\r\n                operation=operation[0];\r\n                var part=condition.split(operation);\r\n                if(part[0].indexOf('@')===0){\r\n                    part[0]=data[part[0].replace('@','')];\r\n                }\r\n                if(part[1].indexOf('@')===0){\r\n                    part[1]=data[part[1].replace('@','')];\r\n                }\r\n                operation=operation.trim();\r\n                var result=false;\r\n                switch (operation){\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if(result){\r\n                    return cont;\r\n                }else if(conts[1]){\r\n                    return conts[1];\r\n                }\r\n            }else {\r\n                if (data[condition.replace('@','')]) return conts[0];\r\n                else if(conts[1]) return conts[1];\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g,function(all,m1,func,args){\r\n\r\n            if(m1.indexOf('.')>0){\r\n                var keys=m1.split('.'),val=data;\r\n                for(var i=0;i<keys.length;i++){\r\n                    if(val[keys[i]]!==undefined && val[keys[i]]!==null){\r\n                        val=val[keys[i]];\r\n                    }else{\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val,func,args);\r\n            }else{\r\n                return callfunc(data[m1],func,args,data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if(obj && obj.toString){\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val,func,args,thisobj){\r\n    if(!args){\r\n        args=[val];\r\n    }else{\r\n        if(typeof args==='string')args=args.split(',');\r\n        var argidx=args.indexOf('###');\r\n        if(argidx>=0){\r\n            args[argidx]=val;\r\n        }else{\r\n            args=[val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func]?window[func].apply(thisobj,args):((val===undefined||val===null)?'':val);\r\n}\r\n\r\n\r\nfunction html_encode(html){\r\n    if(!html)return html;\r\n    var temp = document.createElement (\"div\");\r\n    (temp.textContent != undefined ) ? (temp.textContent = html) : (temp.innerText = html);\r\n    var output = temp.innerHTML;\r\n    temp = null;\r\n    return output;\r\n}\r\nfunction html_decode(text){\r\n    if(!text)return text;\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = text;\r\n    var output = temp.innerText || temp.textContent;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\nfunction pad_zero(n, c){\r\n    if ((n = n + \"\").length < c) {\r\n        return new Array(++c - n.length).join(\"0\") + n;\r\n    } else {\r\n        return n;\r\n    }\r\n}\r\n\r\nfunction timestamp_date(timestamp, fmt){\r\n    if(!timestamp)return '';\r\n    var jsdate=new Date(timestamp*1000);\r\n    if(!fmt)fmt = 'Y-m-d H:i:s';\r\n\r\n    var txt_weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    var txt_ordin = {\r\n        1: \"st\",\r\n        2: \"nd\",\r\n        3: \"rd\",\r\n        21: \"st\",\r\n        22: \"nd\",\r\n        23: \"rd\",\r\n        31: \"st\"\r\n    };\r\n    var txt_months = [\"\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    var f = {\r\n        // Day \r\n        d: function () {\r\n            return pad_zero(f.j(), 2)\r\n        },\r\n        D: function () {\r\n            return f.l().substr(0, 3)\r\n        },\r\n        j: function () {\r\n            return jsdate.getDate()\r\n        },\r\n        l: function () {\r\n            return txt_weekdays[f.w()]\r\n        },\r\n        N: function () {\r\n            return f.w() + 1\r\n        },\r\n        S: function () {\r\n            return txt_ordin[f.j()] ? txt_ordin[f.j()] : 'th'\r\n        },\r\n        w: function () {\r\n            return jsdate.getDay()\r\n        },\r\n        z: function () {\r\n            return (jsdate - new Date(jsdate.getFullYear() + \"/1/1\")) / 864e5 >> 0\r\n        },\r\n\r\n        // Week \r\n        W: function () {\r\n            var a = f.z(),\r\n                b = 364 + f.L() - a;\r\n            var nd2, nd = (new Date(jsdate.getFullYear() + \"/1/1\").getDay() || 7) - 1;\r\n            if (b <= 2 && ((jsdate.getDay() || 7) - 1) <= 2 - b) {\r\n                return 1;\r\n            } else {\r\n                if (a <= 2 && nd >= 4 && a >= (6 - nd)) {\r\n                    nd2 = new Date(jsdate.getFullYear() - 1 + \"/12/31\");\r\n                    return timestamp_date(Math.round(nd2.getTime() / 1000),\"W\");\r\n                } else {\r\n                    return (1 + (nd <= 3 ? ((a + nd) / 7) : (a - (7 - nd)) / 7) >> 0);\r\n                }\r\n            }\r\n        },\r\n\r\n        // Month \r\n        F: function () {\r\n            return txt_months[f.n()]\r\n        },\r\n        m: function () {\r\n            return pad_zero(f.n(), 2)\r\n        },\r\n        M: function () {\r\n            return f.F().substr(0, 3)\r\n        },\r\n        n: function () {\r\n            return jsdate.getMonth() + 1\r\n        },\r\n        t: function () {\r\n            var n;\r\n            if ((n = jsdate.getMonth() + 1) == 2) {\r\n                return 28 + f.L();\r\n            } else {\r\n                if (n & 1 && n < 8 || !(n & 1) && n > 7) {\r\n                    return 31;\r\n                } else {\r\n                    return 30;\r\n                }\r\n            }\r\n        },\r\n\r\n        // Year \r\n        L: function () {\r\n            var y = f.Y();\r\n            return (!(y & 3) && (y % 1e2 || !(y % 4e2))) ? 1 : 0\r\n        },\r\n        //o not supported yet \r\n        Y: function () {\r\n            return jsdate.getFullYear()\r\n        },\r\n        y: function () {\r\n            return (jsdate.getFullYear() + \"\").slice(2)\r\n        },\r\n\r\n        // Time \r\n        a: function () {\r\n            return jsdate.getHours() > 11 ? \"pm\" : \"am\"\r\n        },\r\n        A: function () {\r\n            return f.a().toUpperCase()\r\n        },\r\n        B: function () {\r\n            // peter paul koch: \r\n            var off = (jsdate.getTimezoneOffset() + 60) * 60;\r\n            var theSeconds = (jsdate.getHours() * 3600) + (jsdate.getMinutes() * 60) + jsdate.getSeconds() + off;\r\n            var beat = Math.floor(theSeconds / 86.4);\r\n            if (beat > 1000) beat -= 1000;\r\n            if (beat < 0) beat += 1000;\r\n            if ((String(beat)).length == 1) beat = \"00\" + beat;\r\n            if ((String(beat)).length == 2) beat = \"0\" + beat;\r\n            return beat;\r\n        },\r\n        g: function () {\r\n            return jsdate.getHours() % 12 || 12\r\n        },\r\n        G: function () {\r\n            return jsdate.getHours()\r\n        },\r\n        h: function () {\r\n            return pad_zero(f.g(), 2)\r\n        },\r\n        H: function () {\r\n            return pad_zero(jsdate.getHours(), 2)\r\n        },\r\n        i: function () {\r\n            return pad_zero(jsdate.getMinutes(), 2)\r\n        },\r\n        s: function () {\r\n            return pad_zero(jsdate.getSeconds(), 2)\r\n        },\r\n        //u not supported yet \r\n\r\n        // Timezone \r\n        //e not supported yet \r\n        //I not supported yet \r\n        O: function () {\r\n            var t = pad_zero(Math.abs(jsdate.getTimezoneOffset() / 60 * 100), 4);\r\n            if (jsdate.getTimezoneOffset() > 0) t = \"-\" + t;\r\n            else t = \"+\" + t;\r\n            return t;\r\n        },\r\n        P: function () {\r\n            var O = f.O();\r\n            return (O.substr(0, 3) + \":\" + O.substr(3, 2))\r\n        },\r\n        //T not supported yet \r\n        //Z not supported yet \r\n\r\n        // Full Date/Time \r\n        c: function () {\r\n            return f.Y() + \"-\" + f.m() + \"-\" + f.d() + \"T\" + f.h() + \":\" + f.i() + \":\" + f.s() + f.P()\r\n        },\r\n        //r not supported yet \r\n        U: function () {\r\n            return Math.round(jsdate.getTime() / 1000)\r\n        }\r\n    };\r\n\r\n    return fmt.replace(/[\\\\]?([a-zA-Z])/g, function (t, s) {\r\n        var ret = '';\r\n        if (t != s) {\r\n            // escaped \r\n            ret = s;\r\n        } else if (f[s]) {\r\n            // a date function exists \r\n            ret = f[s]();\r\n        } else {\r\n            // nothing special \r\n            ret = s;\r\n        }\r\n        return ret;\r\n    });\r\n}\r\n\r\nfunction iif(v,m1,m2){\r\n    if(v==='0')v=0;\r\n    return v?m1:m2;\r\n}\r\n\r\nwindow['default']=function (v,d) {\r\n    return v?v:d;\r\n};","function transOption(option) {\r\n    if(!option)return {};\r\n    var newopt={};\r\n    for(var i in option){\r\n        switch (i){\r\n            case 'viewmode':\r\n                newopt['viewMode']=option[i];\r\n                break;\r\n            case 'keepopen':\r\n                newopt['keepOpen']=option[i];\r\n                break;\r\n            default:\r\n                newopt[i]=option[i];\r\n        }\r\n    }\r\n    return newopt;\r\n}\r\n\r\n//日期组件\r\nif($.fn.datetimepicker) {\r\n    var tooltips= {\r\n        today: '定位当前日期',\r\n        clear: '清除已选日期',\r\n        close: '关闭选择器',\r\n        selectMonth: '选择月份',\r\n        prevMonth: '上个月',\r\n        nextMonth: '下个月',\r\n        selectYear: '选择年份',\r\n        prevYear: '上一年',\r\n        nextYear: '下一年',\r\n        selectDecade: '选择年份区间',\r\n        selectTime:'选择时间',\r\n        prevDecade: '上一区间',\r\n        nextDecade: '下一区间',\r\n        prevCentury: '上个世纪',\r\n        nextCentury: '下个世纪'\r\n    };\r\n\r\n\r\n    $('.datepicker').each(function(){\r\n        var config=$.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale: 'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },transOption($(this).data()));\r\n\r\n        $(this).datetimepicker(config);\r\n    });\r\n\r\n    $('.date-range').each(function () {\r\n        var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n        var options = $.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale:'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },$(this).data());\r\n        from.datetimepicker(options).on('dp.change', function () {\r\n            if (from.val()) {\r\n                to.data('DateTimePicker').minDate(from.val());\r\n            }\r\n        });\r\n        to.datetimepicker(options).on('dp.change', function () {\r\n            if (to.val()) {\r\n                from.data('DateTimePicker').maxDate(to.val());\r\n            }\r\n        });\r\n    });\r\n}","function setNav(nav) {\r\n    \r\n    var current=findCurrentNav(nav);\r\n    setNavHover(current);\r\n\r\n    var intval=0;\r\n    $('.nav-box .navbar-collapse').hover(function(){\r\n        clearInterval(intval)\r\n    },function(){\r\n        intval = setInterval(function(){\r\n            setNavHover(current);\r\n        },500)\r\n    })\r\n    $('.nav-box .nav-item').hover(function(){\r\n        var index = $('.main-nav .nav-item').index(this);\r\n        setNavHover(index);\r\n    },function(){\r\n\r\n    })\r\n}\r\n\r\nfunction setNavHover(index){\r\n    var items=$('.main-nav .nav-item');\r\n    items.removeClass('active prev-hover')\r\n    items.eq(index).addClass('active');\r\n    $('.main-nav .nav-item.active').prev().addClass('prev-hover');\r\n\r\n    $('.nav-box .nav-bg').css('right',(items.length-index-1)*items.eq(0).outerWidth())\r\n}\r\n\r\nfunction findCurrentNav(nav){\r\n    var items=$('.main-nav .nav-item');\r\n    \r\n    for(var i=0;i<items.length;i++){\r\n        if(items.eq(i).data('model')===nav){\r\n            return i;\r\n        }\r\n    }\r\n    var pnav=nav.substr(0,nav.lastIndexOf('-'));\r\n    if(pnav == nav || !pnav){\r\n        return 0;\r\n    }\r\n    return findCurrentNav(pnav);\r\n}\r\n\r\njQuery(function($){\r\n    if($(window).width()>=991){\r\n        $('.main-nav>.dropdown').hover(\r\n            function () {\r\n                $(this).find('.dropdown-menu').stop(true,false).slideDown();\r\n            },\r\n            function () {\r\n                $(this).find('.dropdown-menu').stop(true,false).slideUp();\r\n            }\r\n        );\r\n    }else{\r\n        $('.main-nav>.dropdown>.dropdown-toggle').click(function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var opened=$(this).data('opened');\r\n            var p = $(this).parents('.dropdown');\r\n            if(opened){\r\n                p.find('.dropdown-menu').stop(true, false).slideUp();\r\n            }else {\r\n                p.siblings().children('.dropdown-menu').stop(true, false).slideUp();\r\n                p.siblings().children('.dropdown-toggle').data('opened',false);\r\n                p.find('.dropdown-menu').stop(true, false).slideDown();\r\n            }\r\n            $(this).data('opened',!opened);\r\n        })\r\n    }\r\n});","(function (window, $) {\r\n    var dialogTpl = '<div class=\"modal shirne-modal fade\" id=\"{@id}\" {if tabindex}tabindex=\"{@tabindex}\"{/if} role=\"dialog\" aria-labelledby=\"{@id}Label\" aria-hidden=\"true\">\\n' +\r\n        '    <div class=\"modal-dialog {@size}\">\\n' +\r\n        '        <div class=\"modal-content {@contentClass}\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\">{@title}</h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span aria-hidden=\"true\">&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body {@bodyClass}\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx = 0;\r\n    function format_btn(btn, isdefault) {\r\n        if (typeof (btn) === typeof 'a') {\r\n            btn = { 'text': btn, 'isdefault': isdefault ? true : false };\r\n        }\r\n        if (btn.isdefault) {\r\n            if (!btn.type) {\r\n                btn.type = 'primary'\r\n            }\r\n        }\r\n        return btn;\r\n    }\r\n    function Dialog(opts) {\r\n        if (!opts) opts = {};\r\n        //处理按钮\r\n        if (opts.btns) {\r\n            if (typeof (opts.btns) == 'string') {\r\n                opts.btns = [format_btn(opts.btns, true)];\r\n            }\r\n            else if (opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    opts.btns[i] = format_btn(opts.btns[i])\r\n                }\r\n            } else {\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns = [];\r\n            }\r\n        }\r\n\r\n        this.options = $.extend({\r\n            id: 'modal_dialog_' + dialogIdx++,\r\n            header: true,\r\n            footer: true,\r\n            backdrop: true,\r\n            tabindex: -1,\r\n            size: '',\r\n            btns: [\r\n                { 'text': '取消', 'type': 'secondary' },\r\n                { 'text': '确定', 'isdefault': true, 'type': 'primary' }\r\n            ],\r\n            contentClass: '',\r\n            onsure: null,\r\n            onshow: null,\r\n            onshown: null,\r\n            onhide: null,\r\n            onhidden: null\r\n        }, opts);\r\n        if (!this.options.btns) this.options.btns = [];\r\n        var btncount = this.options.btns.length;\r\n        if (opts.addbtn) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            opts.addbtn = format_btn(opts.addbtn)\r\n            if (btncount < 1) {\r\n                this.options.btns.unshift(opts.addbtn)\r\n            } else {\r\n                this.options.btns.splice(btncount - 1, 0, opts.addbtn)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (opts.addbtns) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            if (btncount < 1) {\r\n                this.options.btns = opts.addbtns\r\n            } else {\r\n                var args = [btncount - 1, 0]\r\n                for (var i = 0; i < opts.addbtns.length; i++) {\r\n                    args.push(format_btn(opts.addbtns[i]))\r\n                }\r\n                this.options.btns.splice.apply(this.options.btns, args)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (btncount < 1) {\r\n            this.options.footer = false;\r\n        }\r\n\r\n        this.closed = true;\r\n        this.box = $(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn = function (opt, idx) {\r\n        if (opt['type']) opt['class'] = 'btn-outline-' + opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn ' + (opt['class'] ? opt['class'] : 'btn-outline-secondary') + '\" ' + (opt.isdefault ? 'default' : '') + ' data-index=\"' + idx + '\">' + opt.text + '</a>';\r\n    };\r\n    Dialog.prototype.getDefaultBtn = function () {\r\n        var btn = null\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btn = this.options.btns[i]\r\n            if (btn.isdefault) break;\r\n        }\r\n        return btn\r\n    }\r\n    Dialog.prototype.show = function (html, title) {\r\n        this.box = $('#' + this.options.id);\r\n        if (!title) title = '系统提示';\r\n\r\n        if (this.box.length < 1) {\r\n            $(document.body).append(dialogTpl.compile({\r\n                id: this.options.id,\r\n                bodyClass: this.options.bodyClass,\r\n                contentClass: this.options.contentClass,\r\n                tabindex: this.options.tabindex,\r\n                size: this.options.size ? ('modal-' + this.options.size) : '',\r\n                title: title\r\n            }));\r\n            this.box = $('#' + this.options.id);\r\n        } else {\r\n            this.box.unbind();\r\n            this.box.find('.modal-title').text(title);\r\n        }\r\n        if (!this.options.header) {\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if (!this.options.footer) {\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if (this.options.backdrop !== true) {\r\n            this.box.data('backdrop', this.options.backdrop);\r\n\r\n            //不需要背景的情况下会影响下面元素的点击\r\n            if (this.options.backdrop === false) {\r\n                this.box.css({ 'height': 0, 'overflow': 'visible' });\r\n            }\r\n        }\r\n        if (!this.options.keyboard) {\r\n            this.box.data('keyboard', false);\r\n        }\r\n\r\n        var self = this;\r\n        Dialog.instance = self;\r\n\r\n        //生成按钮\r\n        var btns = [];\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btns.push(this.generBtn(this.options.btns[i], i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var body = this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal', function () {\r\n            if (self.options.onhide) {\r\n                self.options.onhide(body, self.box);\r\n            }\r\n            Dialog.instance = null;\r\n        });\r\n        this.box.on('hidden.bs.modal', function () {\r\n            if (self.options.onhidden) {\r\n                self.options.onhidden(body, self.box);\r\n            }\r\n            self.closed = true;\r\n            self.box.remove();\r\n            self.box = null;\r\n        });\r\n        this.box.on('show.bs.modal', function () {\r\n            if (self.options.onshow) {\r\n                self.options.onshow(body, self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal', function () {\r\n            if (self.box && self.closed) {\r\n                return self.box.modal('hide');\r\n            }\r\n            if (self.options.onshown) {\r\n                self.options.onshown(body, self.box);\r\n            }\r\n        });\r\n        if (this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                } else {\r\n                    if (self.options.btns[idx].isdefault) {\r\n                        if (self.options.onsure) {\r\n                            result = self.options.onsure.apply(this, [body, self.box]);\r\n                        }\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed = false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide = Dialog.prototype.close = function () {\r\n        if (this.box && !this.closed) {\r\n            this.closed = true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog = {\r\n        error: function (message, time) {\r\n            return this.message(message, 'error', time);\r\n        },\r\n        success: function (message, time) {\r\n            return this.message(message, 'success', time);\r\n        },\r\n        warning: function (message, time) {\r\n            return this.message(message, 'warning', time);\r\n        },\r\n        info: function (message, time) {\r\n            return this.message(message, 'info', time);\r\n        },\r\n        loading: function (message, time) {\r\n            return this.message(message ? message : '加载中...', 'loading', time);\r\n        },\r\n        message: function (message, type, time) {\r\n            var cssClass = 'bg-info text-white';\r\n            var icon = 'information-circle';\r\n            if (type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon = 'close-circle';\r\n                        cssClass = 'bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon = 'warning';\r\n                        cssClass = 'bg-warning text-white';\r\n                        break;\r\n                    case 'loading':\r\n                        icon = '<div class=\"spinner-border text-light\" role=\"status\">\\n' +\r\n                            '  <span class=\"sr-only\">Loading...</span>\\n' +\r\n                            '</div>';\r\n                        cssClass = 'bg-info text-white';\r\n                        if (!time) time = 10;\r\n                        break;\r\n                    case 'success':\r\n                        icon = 'checkmark-circle';\r\n                        cssClass = 'bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            if (type != 'loading') icon = '<i class=\"ion-md-' + icon + '\"></i>';\r\n            var html = '<div class=\"dialog-message\" >' + icon + '&nbsp;&nbsp;<span class=\"message-text\">' + message + '</span>' + (type == 'loading' ? '' : '<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a>') + '</div>';\r\n\r\n            var dlg = new Dialog({\r\n                footer: false,\r\n                header: false,\r\n                backdrop: false,\r\n                tabindex: '',\r\n                size: 'sm',\r\n                contentClass: cssClass,\r\n                onshow: function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html, '');\r\n            if (!time) time = 2;\r\n            if (time > 0) setTimeout(function () { dlg.close(); }, time * 1000);\r\n            return dlg;\r\n        },\r\n        alert: function (message, callback, icon) {\r\n            var called = false;\r\n            var iscallback = typeof callback == 'function';\r\n            var title = '';\r\n            var size = 'sm';\r\n            var html = '';\r\n            var buttonText = '确定'\r\n            if (callback !== undefined && !iscallback) {\r\n                icon = callback;\r\n            }\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['buttonText'] !== undefined) {\r\n                    buttonText = message['buttonText'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message = message['content'];\r\n            }\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon == 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            if (icon) {\r\n                html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                    message: message\r\n                }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            } else {\r\n                html = message;\r\n            }\r\n            return new Dialog({\r\n                btns: buttonText,\r\n                size: size,\r\n                header: title ? true : false,\r\n                onsure: function () {\r\n                    if (iscallback) {\r\n                        called = true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (!called && iscallback) {\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n        },\r\n        confirm: function (message, confirm, cancel, icon, countdown) {\r\n            var called = false;\r\n            if (typeof confirm !== 'function') {\r\n                icon = confirm;\r\n                if (typeof cancel === 'function') {\r\n                    confirm = cancel;\r\n                    cancel = null;\r\n                } else {\r\n                    countdown = cancel;\r\n                }\r\n            } else if (typeof cancel !== 'function') {\r\n                countdown = icon;\r\n                icon = cancel;\r\n            }\r\n            if (typeof icon === 'number') {\r\n                countdown = icon;\r\n                icon = undefined;\r\n            }\r\n\r\n            var onshown = null;\r\n            var title = '';\r\n            var size = 'sm';\r\n            var btns = [\r\n                { 'text': '取消', 'type': 'secondary' },\r\n                { 'text': '确定', 'isdefault': true, 'type': 'primary' }\r\n            ];\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['btns'] !== undefined) {\r\n                    btns = message['btns'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                if (message['onshown'] !== undefined) {\r\n                    onshown = message['onshown'];\r\n                }\r\n                message = message['content'];\r\n            }\r\n\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon === 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            var html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                message: message\r\n            }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message: message,\r\n                icon: icon,\r\n                color: color\r\n            });\r\n\r\n            var inteval = 0;\r\n\r\n            var dlg = new Dialog({\r\n                header: title ? true : false,\r\n                size: size,\r\n                backdrop: 'static',\r\n                onshown: onshown,\r\n                onsure: function () {\r\n                    if (confirm && typeof confirm === 'function') {\r\n                        called = true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    clearInterval(inteval);\r\n                    if (called === false && typeof cancel === 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n\r\n            if (countdown && typeof countdown === 'number') {\r\n                var btn = dlg.box.find('.modal-footer .btn-outline-primary');\r\n                var btnText = dlg.getDefaultBtn().text;\r\n                btn.addClass('disabled').text(btnText + '(' + countdown + ')');\r\n                inteval = setInterval(function () {\r\n                    countdown--;\r\n                    if (countdown > 0) {\r\n                        btn.text(btnText + '(' + countdown + ')');\r\n                    } else {\r\n                        btn.text(btnText);\r\n                        btn.removeClass('disabled');\r\n                        clearInterval(inteval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n            return dlg;\r\n        },\r\n        prompt: function (message, callback, cancel) {\r\n            var called = false;\r\n            var contentHtml = '<div class=\"form-group\">{@input}</div>';\r\n            var title = '请输入信息';\r\n            var is_multi = false;\r\n            var is_textarea = false;\r\n            var multiset = {};\r\n            var keyboard = true;\r\n            var dftValue = '';\r\n            if (typeof message == 'string') {\r\n                title = message;\r\n            } else {\r\n                title = message.title;\r\n                if (message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n                if (message.multi) {\r\n                    is_multi = true;\r\n                    multiset = message.multi;\r\n                }\r\n                if (message.is_textarea) {\r\n                    is_textarea = true;\r\n                }\r\n                if (message.keyboard !== undefined) {\r\n                    keyboard = message.keyboard;\r\n                } else if (is_textarea) {\r\n                    keyboard = false;\r\n                }\r\n                if (message.default) {\r\n                    dftValue = message.default.toString();\r\n                }\r\n            }\r\n            var inputHtml = '<input type=\"text\" name=\"confirm_input\" class=\"form-control\" />';\r\n            if (is_textarea) {\r\n                inputHtml = '<textarea name=\"confirm_input\" class=\"form-control\" ></textarea>';\r\n            }\r\n            if (is_multi) {\r\n                inputHtml = '';\r\n                for (var i in multiset) {\r\n                    var label = multiset[i], value = '', sub_is_textarea = false;\r\n                    if (typeof label === 'object') {\r\n                        value = label.value ? label.value : ''\r\n                        sub_is_textarea = label.is_textarea ? label.is_textarea : is_textarea;\r\n                        label = label.label ? label.label : (label.title ? label.title : i)\r\n                    }\r\n                    if (sub_is_textarea) {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><textarea name=\"confirm_input\" data-key=\"' + i + '\" class=\"form-control\" >' + value + '</textarea></div>';\r\n                    } else {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><input type=\"text\" data-key=\"' + i + '\" name=\"confirm_input\" value=\"' + value + '\" class=\"form-control\" /></div>';\r\n                    }\r\n                }\r\n            }\r\n            return new Dialog({\r\n                backdrop: 'static',\r\n                keyboard: keyboard,\r\n                onshow: function (body) {\r\n                    if (message && message.onshow) {\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                onshown: function (body) {\r\n                    var firstInput = body.find('[name=confirm_input]').eq(0);\r\n                    if (dftValue) {\r\n                        firstInput.val(dftValue);\r\n                    }\r\n                    firstInput.select();\r\n                    if (message && message.onshown) {\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                onsure: function (body) {\r\n                    var inputs = body.find('[name=confirm_input]'), val = inputs.val();\r\n                    if (is_multi) {\r\n                        val = {};\r\n                        inputs.each(function () {\r\n                            var key = $(this).data('key')\r\n                            val[key] = $(this).val()\r\n                        })\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(val, body);\r\n                        if (result === true) {\r\n                            called = true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (called == false && typeof cancel == 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({ input: inputHtml }), title);\r\n        },\r\n        action: function (list, callback, title) {\r\n            var html = '<div class=\"list-group\"  style=\"max-height: 70vh;overflow: auto;\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">' + list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">') + '</a></div>';\r\n            var actions = null;\r\n            var dlg = new Dialog({\r\n                bodyClass: 'modal-action',\r\n                backdrop: 'static',\r\n                size: 'sm',\r\n                btns: [\r\n                    { 'text': '取消', 'type': 'secondary' }\r\n                ],\r\n                onshow: function (body) {\r\n                    actions = body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val = actions.index(this);\r\n                        if (typeof callback == 'function') {\r\n                            if (callback(val) !== false) {\r\n                                dlg.close();\r\n                            }\r\n                        } else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                onsure: function (body) {\r\n                    return true;\r\n                },\r\n                onhide: function () {\r\n                    return true;\r\n                }\r\n            }).show(html, title ? title : '请选择');\r\n        },\r\n        pickTree: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                list: [],\r\n                name: '项目',\r\n                idkey: 'id',\r\n                titlekey: 'title',\r\n                level: 3,\r\n                onRow: null,\r\n                toList: function (json) {\r\n                    return json.data;\r\n                },\r\n                breadTemplate: '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"{@id}\">{@title}</a></li>',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">' + icon + '[{@id}]&nbsp;{@title}</a>'\r\n            }, config || {});\r\n            var selected = [{ id: 0, pid: -1, title: config.name }]\r\n            if (!filter) filter = {};\r\n\r\n            var title = '请选择' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                contentTpl = '<nav aria-label=\"breadcrumb\"><ol class=\"breadcrumb\"><li class=\"breadcrumb-item active\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"0\">' + config.name + '</a></li></ol></nav>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var breadcrumb = body.find('.breadcrumb');\r\n                    var listbox = body.find('.list-group');\r\n                    var lastLoading = 0;\r\n                    listbox.on('click', 'a.list-group-item', function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                if (config.list[i].pid == selected[selected.length - 1].pid) {\r\n                                    selected.pop()\r\n                                }\r\n                                selected.push(config.list[i])\r\n                                if (selected.length <= config.level) {\r\n                                    dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', true)\r\n                                } else {\r\n                                    dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', false)\r\n                                }\r\n                                breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                                loadList()\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    breadcrumb.on('click', '.breadcrumb-item a', function () {\r\n                        var id = $(this).data('id')\r\n                        var index = selected.findIndex((v) => v.id == id)\r\n                        if (index > -1) {\r\n                            selected = selected.slice(0, index + 1)\r\n                            breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                            loadList()\r\n                        }\r\n                    })\r\n\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n\r\n                    function loadList() {\r\n                        var curLoading = new Date().getTime()\r\n                        lastLoading = curLoading;\r\n                        //listbox.html('<span class=\"list-loading\">加载中...</span>');\r\n                        filter['pid'] = selected[selected.length - 1].id;\r\n\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    if (curLoading != lastLoading) return;\r\n                                    if (json.code === 1) {\r\n                                        var lists = config.toList(json);\r\n                                        if (lists && lists.length) {\r\n                                            config.list = lists\r\n                                            listbox.html(config.rowTemplate.compile(lists, true));\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> 加载失败</span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }\r\n                    loadList();\r\n                },\r\n                onsure: function (body) {\r\n                    if (selected.length < config.level) {\r\n                        dialog.warning('没有选择' + config.name + '!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(selected.slice(1));\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickList: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                list: [],\r\n                name: '项目',\r\n                searchHolder: '根据名称搜索',\r\n                idkey: 'id',\r\n                titlekey: 'title',\r\n                searchkey: 'key',\r\n                onRow: null,\r\n                extend: null,\r\n                toList: function (json) {\r\n                    return json.data;\r\n                },\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">' + icon + '[{@id}]&nbsp;{@title}</a>'\r\n            }, config || {});\r\n            var current = null;\r\n            var exthtml = '';\r\n            if (config.extend) {\r\n                exthtml = '<select name=\"' + config.extend.name + '\" class=\"form-control\"><option value=\"\">' + config.extend.title + '</option></select>';\r\n            }\r\n            if (!filter) filter = {};\r\n\r\n            var title = '请选择' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                title = '请搜索并选择' + config.name;\r\n                contentTpl = '<div class=\"input-group\">' + exthtml + '<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"' + config.searchHolder + '\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var listbox = body.find('.list-group');\r\n                    var isloading = false;\r\n                    listbox.on('click', 'a.list-group-item', function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                current = config.list[i];\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n                    var extField = null;\r\n                    if (config.extend) {\r\n                        extField = body.find('[name=' + config.extend.name + ']');\r\n                        if (config.extend.list) {\r\n                            extField.append(config.extend.htmlRow.compile(config.extend.list, true));\r\n                        } else {\r\n                            $.ajax({\r\n                                url: config.extend.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                success: function (json) {\r\n                                    extField.append(config.extend.htmlRow.compile(json.data, true));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    btn.click(function () {\r\n                        if (isloading) return;\r\n                        isloading = true;\r\n                        listbox.html('<span class=\"list-loading\">加载中...</span>');\r\n                        filter[config.searchkey] = input.val();\r\n                        if (config.extend) {\r\n                            filter[config.extend.name] = extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    isloading = false;\r\n                                    if (json.code === 1) {\r\n                                        config.list = config.toList(json);\r\n                                        if (config.list && config.list.length) {\r\n                                            listbox.html(config.rowTemplate.compile(config.list, true));\r\n                                        } else {\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> 没有检索到' + config.name + '</span>');\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> 加载失败</span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }).trigger('click');\r\n                },\r\n                onsure: function (body) {\r\n                    if (!current) {\r\n                        dialog.warning('没有选择' + config.name + '!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickUser: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('member'),\r\n                title: title,\r\n                name: '会员',\r\n                searchHolder: '根据会员id或名称，电话来搜索',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">{if @avatar}<img src=\"{@avatar}\" style=\"width:30px;height:30px;border-radius: 100%;margin-right:10px;\" />{else}<i class=\"ion-md-person\"></i>{/if} <div class=\"flex-info\"><div>[{@id}]&nbsp;{if @nickname}{@nickname}{else}{@username}{/if}&nbsp;&nbsp;&nbsp;{if @mobile}<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small>{/if}</div><div>{if @level}<small><i class=\"ion-md-people\"></i> {@level.level_name}</small>{/if}&nbsp;{if @agent}<small><i class=\"ion-md-ribbon\"></i> {@agent.name}</small>{/if}</div></div></a>'\r\n            }, callback, filter);\r\n        },\r\n        pickArticle: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('article'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                title: title,\r\n                name: '文章',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '按分类搜索',\r\n                    url: get_cate_url('article'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': '根据文章标题搜索'\r\n            }, callback, filter);\r\n        },\r\n        pickProduct: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            var issku = filter && filter['searchtype'];\r\n            var titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}{if @max_price>@min_price}~{@max_price}{/if}</div>';\r\n            if (issku) titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />[{@sku_goods_no}]&nbsp;{@price}</div>';\r\n            return this.pickList({\r\n                url: window.get_search_url('product'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}' + titletpl + '</a>',\r\n                title: title,\r\n                name: '产品',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '按分类搜索',\r\n                    url: get_cate_url('product'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': '根据产品名称搜索'\r\n            }, callback, filter);\r\n        },\r\n        pickCategory: function (callback, model, title) {\r\n            return this.pickList({\r\n                title: title,\r\n                url: window.get_cate_url(model),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action pt-0 pb-0\" style=\"line-height:30px;\">{@html}&nbsp;[{@id}]&nbsp;{@title}</a>'\r\n            }, callback);\r\n        },\r\n        pickLocate: function (type, callback, locate) {\r\n            var settedLocate = null;\r\n            var address = null;\r\n            var height = $(window).height() * 0.6;\r\n            if (!type) type = 'tencent';\r\n            var dlg = new Dialog({\r\n                size: 'lg',\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var mapbox = body.find('.map');\r\n                    var mapinfo = body.find('.mapinfo');\r\n                    var isloading = false;\r\n                    setTimeout(function () {\r\n                        var map = InitMap(type, mapbox, function (formatted, locate, comp) {\r\n                            mapinfo.html(formatted + '&nbsp;' + locate.lng + ',' + locate.lat);\r\n                            settedLocate = locate;\r\n                            address = comp;\r\n                        }, locate);\r\n                        btn.click(function () {\r\n                            var search = input.val();\r\n                            map.setLocate(search);\r\n                        });\r\n                        body.find('.setToCenter').click(function (e) {\r\n                            map.showAtCenter();\r\n                        })\r\n                    }, 500)\r\n\r\n                },\r\n                onsure: function (body) {\r\n                    if (!settedLocate) {\r\n                        dialog.warning('没有选择位置!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        var result = callback(settedLocate, address);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"填写地址检索位置\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\" style=\"height:' + height + 'px\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\">定位到地图中心</a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\">未选择位置</div>', '请选择地图位置');\r\n            return dlg;\r\n        }\r\n    };\r\n\r\n    $(document).on('keydown', function (e) {\r\n        if (e.keyCode == 13) {\r\n            var currentModal = $('.shirne-modal').eq(-1);\r\n            if (currentModal && currentModal.data('keyboard') !== false) {\r\n                currentModal.find('.modal-footer .btn[default]').trigger('click');\r\n            }\r\n        }\r\n    });\r\n\r\n    // 暴露接口\r\n    window.Dialog = $.Dialog = Dialog;\r\n    window.dialog = $.dialog = dialog;\r\n})(window, jQuery || Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn,{\r\n    tags:function(nm,onupdate){\r\n        var data=[];\r\n        var tpl='<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"'+nm+'\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item=$(this).parents('.form-control');\r\n        var labelgroup=$('<span class=\"badge-group\"></span>');\r\n        var input=this;\r\n        this.before(labelgroup);\r\n        this.on('keyup',function(){\r\n            var val=$(this).val().replace(/，/g,',');\r\n            var updated=false;\r\n            if(val && val.indexOf(',')>-1){\r\n                var vals=val.split(',');\r\n                for(var i=0;i<vals.length;i++){\r\n                    vals[i]=vals[i].replace(/^\\s|\\s$/g,'');\r\n                    if(vals[i] && data.indexOf(vals[i])===-1){\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({label:vals[i]}));\r\n                        updated=true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if(updated && onupdate)onupdate(data);\r\n            }\r\n        }).on('blur',function(){\r\n            var val=$(this).val();\r\n            if(val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click','.close',function(){\r\n            var tag=$(this).parents('.badge').find('input').val();\r\n            var id=data.indexOf(tag);\r\n            if(id)data.splice(id,1);\r\n            $(this).parents('.badge').remove();\r\n            if(onupdate)onupdate(data);\r\n        });\r\n        item.click(function(){\r\n            input.focus();\r\n        });\r\n    }\r\n});"]}