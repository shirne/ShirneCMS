{"version":3,"sources":["common.js","template.js","datetime.init.js","backend.js","dialog.js","jquery.tag.js","map.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","copy_obj","arr","JSON","parse","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","toString","callfunc","val","func","args","thisobj","argidx","split","indexOf","concat","apply","html_encode","html","output","temp","undefined","document","createElement","textContent","innerText","innerHTML","html_decode","text","pad_zero","n","c","Array","join","timestamp_date","timestamp","fmt","jsdate","txt_weekdays","txt_ordin","txt_months","f","Date","1","2","3","21","22","23","31","d","j","D","l","substr","getDate","w","N","S","getDay","z","getFullYear","W","L","nd","nd2","round","getTime","F","m","M","getMonth","t","y","Y","slice","getHours","A","toUpperCase","B","off","getTimezoneOffset","theSeconds","getMinutes","getSeconds","beat","String","g","G","h","H","s","O","abs","P","U","replace","iif","v","m1","m2","transOption","option","newopt","tooltips","radio_tab","radios","lists","prefix","on","e","curval","this","is","hide","show","filter","trigger","bindData","body","data","field","find","each","prop","getData","fields","eq","push","Number","prototype","format","fix","toFixed","unshift","trim","compile","list","temps","all","condition","cont","conts","operation","match","part","result","keys","dialogIdx","format_btn","btn","isdefault","_typeof","type","Dialog","opts","btns","console","error","options","extend","id","header","footer","backdrop","tabindex","size","contentClass","onsure","onshow","onshown","onhide","onhidden","btncount","addbtn","splice","addbtns","closed","box","generBtn","opt","idx","getDefaultBtn","title","append","bodyClass","unbind","remove","css","height","overflow","keyboard","self","instance","modal","click","close","message","time","success","warning","info","loading","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","buttonText","isPlainObject","iconMap","color","cancel","countdown","btnText","inteval","clearInterval","addClass","setInterval","removeClass","prompt","contentHtml","is_multi","is_textarea","multiset","dftValue","inputHtml","content","multi","default","label","value","sub_is_textarea","firstInput","select","inputs","input","action","actions","index","pickTree","config","url","call","isajax","selected","pid","name","idkey","titlekey","level","onRow","toList","json","breadTemplate","rowTemplate","contentTpl","breadcrumb","listbox","lastLoading","loadList","curLoading","ajax","dataType","code","pop","findIndex","pickList","current","searchHolder","searchkey","exthtml","extField","isloading","htmlRow","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","titletpl","pickCategory","model","pickLocate","locate","settedLocate","address","mapbox","mapinfo","map","InitMap","formatted","comp","lng","lat","search","setLocate","showAtCenter","keyCode","currentModal","jQuery","Zepto","fn","tags","nm","onupdate","tpl","item","parents","labelgroup","before","updated","vals","tag","focus","datetimepicker","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","locale","showClear","showTodayButton","showClose","keepInvalid","from","to","minDate","maxDate","mapObj","mapBox","onPick","apis","baidu","google","tencent","gaode","BaseMap","mapkey","mapType","ishide","isshow","toshow","marker","infoWindow","BaiduMap","GoogleMap","infoOpts","width","TencentMap","GaodeMap","isAPIReady","pointToObject","objectToPoint","setMap","showInfo","getCenter","getAddress","rs","getAddressComponent","loadAPI","src","script","apiurl","appendChild","setInfoContent","addr","setTitle","setContent","center","showLocationInfo","pt","addressComponent","constructor","point","gc","BMap","Map","addControl","NavigationControl","ScaleControl","OverviewMapControl","enableScrollWheelZoom","centerAndZoom","Marker","enableDragging","Geocoder","addEventListener","getLocation","addOverlay","InfoWindow","object","Point","parseFloat","panTo","openInfoWindow","addComp","addressComponents","province","city","district","street","streetNumber","myGeo","getPoint","setPosition","maps","zoom","draggable","scaleControl","streetViewControl","zoomControl","position","addListener","getPosition","geocode","LatLng","setOptions","status","formatted_address","comps","address_components","country","long_name","getLng","getLat","qq","align","ALIGN","BOTTOM_LEFT","margin","Size","setAnimation","MarkerAnimation","DOWN","complete","event","open","detail","setCenter","AMap","resizeEnable","dragEnable","plugin","ToolBar","Scale","OverView","setLang","setDraggable","lnglat","st","LngLat","regeocode","formattedAddress","maptype","toLowerCase","loc","stop_ajax","bread","menu","link","parent","topmenu","siblings","target","ids","checked","preventDefault","letter","needChecks","idchecks","init","hid","openText","closeText","totext","toggleClass","reload","tooltip","beforeSend","request","setRequestHeader","stopPropagation","method","tab","fileInputHander","inputgroup","file","is_img","figure","img","origurl","figcap","files","URL","createObjectURL","form","isbtn","origText","removeAttr","xhr","FormData","cache","processData","contentType","ajaxSettings","upload","percent","loaded","total","serialize","group","idele","infoele","user","username","mobile"],"mappings":"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","file":"app.min.js","sourcesContent":["function del(obj,msg) {\r\n    dialog.confirm(msg,function(){\r\n        location.href=$(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if(window.language && window.language[key]){\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '',allLen=charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz,randomPoz+1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction copy_obj(arr){\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if(!a && !b)return true;\r\n    if(!a || !b)return false;\r\n\r\n    // Of course, we can do it use for in\r\n    // Create arrays of property names\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    // If number of properties is different,\r\n    // objects are not equivalent\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        // If values of same property are not equal,\r\n        // objects are not equivalent\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If we made it this far, objects\r\n    // are considered equivalent\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a,b) {\r\n    var obj={};\r\n    for(var i=0;i<a.length;i++){\r\n        if(b.length<i+1)break;\r\n        obj[a[i]]=b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format=function(fix){\r\n    if(fix===undefined)fix=2;\r\n    var num=this.toFixed(fix);\r\n    var z=num.split('.');\r\n    var format=[],f=z[0].split(''),l=f.length;\r\n    for(var i=0;i<l;i++){\r\n        if(i>0 && i % 3==0){\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l-i-1]);\r\n    }\r\n    return format.join('')+(z.length==2?'.'+z[1]:'');\r\n};\r\nif(!String.prototype.trim){\r\n    String.prototype.trim=function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g,'');\r\n    }\r\n}\r\nString.prototype.compile=function(data,list){\r\n\r\n    if(list){\r\n        var temps=[];\r\n        for(var i in data){\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    }else{\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*?){\\/if}/g,function(all, condition, cont){\r\n            var operation;\r\n            var conts=cont.split('{else}');\r\n            if(operation=condition.match(/\\s+(=+|<|>)\\s+/)){\r\n                operation=operation[0];\r\n                var part=condition.split(operation);\r\n                if(part[0].indexOf('@')===0){\r\n                    part[0]=data[part[0].replace('@','')];\r\n                }\r\n                if(part[1].indexOf('@')===0){\r\n                    part[1]=data[part[1].replace('@','')];\r\n                }\r\n                operation=operation.trim();\r\n                var result=false;\r\n                switch (operation){\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if(result){\r\n                    return cont;\r\n                }else if(conts[1]){\r\n                    return conts[1];\r\n                }\r\n            }else {\r\n                if (data[condition.replace('@','')]) return conts[0];\r\n                else if(conts[1]) return conts[1];\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g,function(all,m1,func,args){\r\n\r\n            if(m1.indexOf('.')>0){\r\n                var keys=m1.split('.'),val=data;\r\n                for(var i=0;i<keys.length;i++){\r\n                    if(val[keys[i]]!==undefined && val[keys[i]]!==null){\r\n                        val=val[keys[i]];\r\n                    }else{\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val,func,args);\r\n            }else{\r\n                return callfunc(data[m1],func,args,data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if(obj && obj.toString){\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val,func,args,thisobj){\r\n    if(!args){\r\n        args=[val];\r\n    }else{\r\n        if(typeof args==='string')args=args.split(',');\r\n        var argidx=args.indexOf('###');\r\n        if(argidx>=0){\r\n            args[argidx]=val;\r\n        }else{\r\n            args=[val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func]?window[func].apply(thisobj,args):((val===undefined||val===null)?'':val);\r\n}\r\n\r\n\r\nfunction html_encode(html){\r\n    if(!html)return html;\r\n    var temp = document.createElement (\"div\");\r\n    (temp.textContent != undefined ) ? (temp.textContent = html) : (temp.innerText = html);\r\n    var output = temp.innerHTML;\r\n    temp = null;\r\n    return output;\r\n}\r\nfunction html_decode(text){\r\n    if(!text)return text;\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = text;\r\n    var output = temp.innerText || temp.textContent;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\nfunction pad_zero(n, c){\r\n    if ((n = n + \"\").length < c) {\r\n        return new Array(++c - n.length).join(\"0\") + n;\r\n    } else {\r\n        return n;\r\n    }\r\n}\r\n\r\nfunction timestamp_date(timestamp, fmt){\r\n    if(!timestamp)return '';\r\n    var jsdate=new Date(timestamp*1000);\r\n    if(!fmt)fmt = 'Y-m-d H:i:s';\r\n\r\n    var txt_weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    var txt_ordin = {\r\n        1: \"st\",\r\n        2: \"nd\",\r\n        3: \"rd\",\r\n        21: \"st\",\r\n        22: \"nd\",\r\n        23: \"rd\",\r\n        31: \"st\"\r\n    };\r\n    var txt_months = [\"\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    var f = {\r\n        // Day \r\n        d: function () {\r\n            return pad_zero(f.j(), 2)\r\n        },\r\n        D: function () {\r\n            return f.l().substr(0, 3)\r\n        },\r\n        j: function () {\r\n            return jsdate.getDate()\r\n        },\r\n        l: function () {\r\n            return txt_weekdays[f.w()]\r\n        },\r\n        N: function () {\r\n            return f.w() + 1\r\n        },\r\n        S: function () {\r\n            return txt_ordin[f.j()] ? txt_ordin[f.j()] : 'th'\r\n        },\r\n        w: function () {\r\n            return jsdate.getDay()\r\n        },\r\n        z: function () {\r\n            return (jsdate - new Date(jsdate.getFullYear() + \"/1/1\")) / 864e5 >> 0\r\n        },\r\n\r\n        // Week \r\n        W: function () {\r\n            var a = f.z(),\r\n                b = 364 + f.L() - a;\r\n            var nd2, nd = (new Date(jsdate.getFullYear() + \"/1/1\").getDay() || 7) - 1;\r\n            if (b <= 2 && ((jsdate.getDay() || 7) - 1) <= 2 - b) {\r\n                return 1;\r\n            } else {\r\n                if (a <= 2 && nd >= 4 && a >= (6 - nd)) {\r\n                    nd2 = new Date(jsdate.getFullYear() - 1 + \"/12/31\");\r\n                    return timestamp_date(Math.round(nd2.getTime() / 1000),\"W\");\r\n                } else {\r\n                    return (1 + (nd <= 3 ? ((a + nd) / 7) : (a - (7 - nd)) / 7) >> 0);\r\n                }\r\n            }\r\n        },\r\n\r\n        // Month \r\n        F: function () {\r\n            return txt_months[f.n()]\r\n        },\r\n        m: function () {\r\n            return pad_zero(f.n(), 2)\r\n        },\r\n        M: function () {\r\n            return f.F().substr(0, 3)\r\n        },\r\n        n: function () {\r\n            return jsdate.getMonth() + 1\r\n        },\r\n        t: function () {\r\n            var n;\r\n            if ((n = jsdate.getMonth() + 1) == 2) {\r\n                return 28 + f.L();\r\n            } else {\r\n                if (n & 1 && n < 8 || !(n & 1) && n > 7) {\r\n                    return 31;\r\n                } else {\r\n                    return 30;\r\n                }\r\n            }\r\n        },\r\n\r\n        // Year \r\n        L: function () {\r\n            var y = f.Y();\r\n            return (!(y & 3) && (y % 1e2 || !(y % 4e2))) ? 1 : 0\r\n        },\r\n        //o not supported yet \r\n        Y: function () {\r\n            return jsdate.getFullYear()\r\n        },\r\n        y: function () {\r\n            return (jsdate.getFullYear() + \"\").slice(2)\r\n        },\r\n\r\n        // Time \r\n        a: function () {\r\n            return jsdate.getHours() > 11 ? \"pm\" : \"am\"\r\n        },\r\n        A: function () {\r\n            return f.a().toUpperCase()\r\n        },\r\n        B: function () {\r\n            // peter paul koch: \r\n            var off = (jsdate.getTimezoneOffset() + 60) * 60;\r\n            var theSeconds = (jsdate.getHours() * 3600) + (jsdate.getMinutes() * 60) + jsdate.getSeconds() + off;\r\n            var beat = Math.floor(theSeconds / 86.4);\r\n            if (beat > 1000) beat -= 1000;\r\n            if (beat < 0) beat += 1000;\r\n            if ((String(beat)).length == 1) beat = \"00\" + beat;\r\n            if ((String(beat)).length == 2) beat = \"0\" + beat;\r\n            return beat;\r\n        },\r\n        g: function () {\r\n            return jsdate.getHours() % 12 || 12\r\n        },\r\n        G: function () {\r\n            return jsdate.getHours()\r\n        },\r\n        h: function () {\r\n            return pad_zero(f.g(), 2)\r\n        },\r\n        H: function () {\r\n            return pad_zero(jsdate.getHours(), 2)\r\n        },\r\n        i: function () {\r\n            return pad_zero(jsdate.getMinutes(), 2)\r\n        },\r\n        s: function () {\r\n            return pad_zero(jsdate.getSeconds(), 2)\r\n        },\r\n        //u not supported yet \r\n\r\n        // Timezone \r\n        //e not supported yet \r\n        //I not supported yet \r\n        O: function () {\r\n            var t = pad_zero(Math.abs(jsdate.getTimezoneOffset() / 60 * 100), 4);\r\n            if (jsdate.getTimezoneOffset() > 0) t = \"-\" + t;\r\n            else t = \"+\" + t;\r\n            return t;\r\n        },\r\n        P: function () {\r\n            var O = f.O();\r\n            return (O.substr(0, 3) + \":\" + O.substr(3, 2))\r\n        },\r\n        //T not supported yet \r\n        //Z not supported yet \r\n\r\n        // Full Date/Time \r\n        c: function () {\r\n            return f.Y() + \"-\" + f.m() + \"-\" + f.d() + \"T\" + f.h() + \":\" + f.i() + \":\" + f.s() + f.P()\r\n        },\r\n        //r not supported yet \r\n        U: function () {\r\n            return Math.round(jsdate.getTime() / 1000)\r\n        }\r\n    };\r\n\r\n    return fmt.replace(/[\\\\]?([a-zA-Z])/g, function (t, s) {\r\n        var ret = '';\r\n        if (t != s) {\r\n            // escaped \r\n            ret = s;\r\n        } else if (f[s]) {\r\n            // a date function exists \r\n            ret = f[s]();\r\n        } else {\r\n            // nothing special \r\n            ret = s;\r\n        }\r\n        return ret;\r\n    });\r\n}\r\n\r\nfunction iif(v,m1,m2){\r\n    if(v==='0')v=0;\r\n    return v?m1:m2;\r\n}\r\n\r\nwindow['default']=function (v,d) {\r\n    return v?v:d;\r\n};","function transOption(option) {\r\n    if(!option)return {};\r\n    var newopt={};\r\n    for(var i in option){\r\n        switch (i){\r\n            case 'viewmode':\r\n                newopt['viewMode']=option[i];\r\n                break;\r\n            case 'keepopen':\r\n                newopt['keepOpen']=option[i];\r\n                break;\r\n            default:\r\n                newopt[i]=option[i];\r\n        }\r\n    }\r\n    return newopt;\r\n}\r\n\r\n//\r\nif($.fn.datetimepicker) {\r\n    var tooltips= {\r\n        today: '',\r\n        clear: '',\r\n        close: '',\r\n        selectMonth: '',\r\n        prevMonth: '',\r\n        nextMonth: '',\r\n        selectYear: '',\r\n        prevYear: '',\r\n        nextYear: '',\r\n        selectDecade: '',\r\n        selectTime:'',\r\n        prevDecade: '',\r\n        nextDecade: '',\r\n        prevCentury: '',\r\n        nextCentury: ''\r\n    };\r\n\r\n\r\n    $('.datepicker').each(function(){\r\n        var config=$.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale: 'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },transOption($(this).data()));\r\n\r\n        $(this).datetimepicker(config);\r\n    });\r\n\r\n    $('.date-range').each(function () {\r\n        var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n        var options = $.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale:'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },$(this).data());\r\n        from.datetimepicker(options).on('dp.change', function () {\r\n            if (from.val()) {\r\n                to.data('DateTimePicker').minDate(from.val());\r\n            }\r\n        });\r\n        to.datetimepicker(options).on('dp.change', function () {\r\n            if (to.val()) {\r\n                from.data('DateTimePicker').maxDate(to.val());\r\n            }\r\n        });\r\n    });\r\n}","window.stop_ajax = false;\r\n\r\nfunction radio_tab(radios, lists, prefix) {\r\n    $(radios).on('change', function (e) {\r\n        if (!$(this).is(':checked')) return;\r\n        var curval = $(this).val();\r\n        $(lists).hide();\r\n        $('.' + prefix + curval).show();\r\n    }).filter(':checked').trigger('change');\r\n}\r\n\r\n\r\n//\r\nfunction bindData(body, data) {\r\n    for (var i in data) {\r\n        var field = body.find('[name=' + i + ']')\r\n        if (field.attr('type') == 'radio') {\r\n            field.each(function () {\r\n                if ($(this).val() == data[i]) {\r\n                    $(this).prop('checked', true)\r\n                }\r\n            })\r\n        } else if (field.attr('type') == 'checkbox') {\r\n            field.each(function () {\r\n                if (data[i].indexOf($(this).val()) > -1) {\r\n                    $(this).prop('checked', true)\r\n                }\r\n            })\r\n        } else {\r\n            body.find('[name=' + i + ']').val(data[i]);\r\n        }\r\n    }\r\n}\r\n\r\n//\r\nfunction getData(body) {\r\n    var data = {};\r\n    var fields = body.find('[name]');\r\n    for (var i = 0; i < fields.length; i++) {\r\n        var field = fields.eq(i)\r\n        if (field.attr('type') == 'radio') {\r\n            field.each(function () {\r\n                if ($(this).prop('checked')) {\r\n                    data[$(this).attr('name')] = $(this).val();\r\n                }\r\n            })\r\n        } else if (field.attr('type') == 'checkbox') {\r\n            var val = []\r\n            field.each(function () {\r\n                if ($(this).prop('checked')) {\r\n                    val.push($(this).val());\r\n                }\r\n            })\r\n            data[field.attr('name')] = val\r\n        } else {\r\n            data[field.attr('name')] = field.val();\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\njQuery(function ($) {\r\n    //\r\n    var bread = $(\".breadcrumb\");\r\n    var menu = bread.data('menu');\r\n    if (menu) {\r\n        var link = $('.side-nav a[data-key=' + menu + ']');\r\n\r\n        var html = [];\r\n        if (link.length > 0) {\r\n            if (link.is('.menu_top')) {\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + link.find('i').attr('class') + '\"></i>&nbsp;' + link.text() + '</a></li>');\r\n            } else {\r\n                var parent = link.parents('.collapse').eq(0);\r\n                parent.addClass('show');\r\n                link.addClass(\"active\");\r\n                var topmenu = parent.siblings('.card-header').find('a.menu_top');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + topmenu.find('i').attr('class') + '\"></i>&nbsp;' + topmenu.text() + '</a></li>');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\">' + link.text() + '</a></li>');\r\n            }\r\n        }\r\n        var title = bread.data('title');\r\n        if (title) {\r\n            html.push('<li class=\"breadcrumb-item active\" aria-current=\"page\">' + title + '</li>');\r\n        }\r\n        bread.html(html.join(\"\\n\"));\r\n    }\r\n\r\n    $(window).on('scroll', function (e) {\r\n\r\n    }).trigger('scroll');\r\n\r\n    //\r\n    $('.checkall-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        if ($(this).is('.active')) {\r\n            ids.prop('checked', false);\r\n        } else {\r\n            ids.prop('checked', true);\r\n        }\r\n    });\r\n    $('.checkreverse-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        for (var i = 0; i < ids.length; i++) {\r\n            if (ids[i].checked) {\r\n                ids.eq(i).prop('checked', false);\r\n            } else {\r\n                ids.eq(i).prop('checked', true);\r\n            }\r\n        }\r\n    });\r\n\r\n    //\r\n    $('.action-btn').click(function (e) {\r\n        e.preventDefault();\r\n        var action = $(this).data('action');\r\n        if (!action) {\r\n            return dialog.error('');\r\n        }\r\n        action = 'action' + action.replace(/^[a-z]/, function (letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        if (!window[action] || typeof window[action] !== 'function') {\r\n            return dialog.error('');\r\n        }\r\n        var needChecks = $(this).data('need-checks');\r\n        if (needChecks === undefined) needChecks = true;\r\n        if (needChecks) {\r\n            var target = $(this).data('target');\r\n            if (!target) target = 'id';\r\n            var ids = $('[name=' + target + ']:checked');\r\n            if (ids.length < 1) {\r\n                return dialog.warning('');\r\n            } else {\r\n                var idchecks = [];\r\n                for (var i = 0; i < ids.length; i++) {\r\n                    idchecks.push(ids.eq(i).val());\r\n                }\r\n                window[action].call(this, idchecks);\r\n            }\r\n        } else {\r\n            window[action].call(this);\r\n        }\r\n    });\r\n\r\n    //  input[hidden]\r\n    $('.radiostatus').click(function (e) {\r\n        var init = $(this).data('init');\r\n        var hid = $(this).find('input');\r\n        var openText = hid.data('open');\r\n        var closeText = hid.data('close');\r\n        var value = hid.val();\r\n        if (!init) {\r\n            $(this).data('init', 1);\r\n            $(this).append('<span></span>');\r\n        } else {\r\n            value = value == '1' ? 0 : 1;\r\n            hid.val(value);\r\n        }\r\n        if (value == '1') {\r\n            $(this).find('span').text(openText)\r\n            $(this).prop('title', '' + closeText);\r\n            $(this).removeClass('off')\r\n        } else {\r\n            $(this).find('span').text(closeText)\r\n            $(this).prop('title', '' + openText);\r\n            $(this).addClass('off')\r\n        }\r\n\r\n    }).trigger('click');\r\n\r\n    //  \r\n    $('.chgstatus').click(function (e) {\r\n        if ($(this).data('ajaxing')) return;\r\n        $(this).data('ajaxing', 1);\r\n        var self = $(this);\r\n        var parent = self.parents('td');\r\n        var id = parent.data('id');\r\n        var status = self.data('status');\r\n        $.ajax({\r\n            url: parent.data('url'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            data: {\r\n                id: id,\r\n                status: status\r\n            },\r\n            success: function (json) {\r\n                self.data('ajaxing', 0);\r\n                if (json.code == 1) {\r\n                    dialog.success(json.msg);\r\n                    self.toggleClass('off');\r\n                    var totext = self.attr('title').replace('', '');\r\n                    self.text(totext);\r\n                    setTimeout(function () {\r\n                        location.reload();\r\n                    }, 1000);\r\n                } else {\r\n                    dialog.error(json.msg);\r\n                }\r\n            }\r\n        })\r\n    });\r\n\r\n    //\r\n    $('.operations .btn,.has-tooltip').tooltip();\r\n\r\n    //\r\n    $('a[rel=ajax]').click(function (e) {\r\n        e.preventDefault();\r\n        var self = $(this);\r\n        var title = $(this).data('title');\r\n        if (!title) title = $(this).text();\r\n        if (!title) title = $(this).attr('title');\r\n        var dlg = new Dialog({\r\n            btns: [''],\r\n            onshow: function (body) {\r\n                $.ajax({\r\n                    url: self.attr('href'),\r\n                    beforeSend: function (request) {\r\n                        request.setRequestHeader(\"X-Requested-With\", \"htmlhttp\");\r\n                    },\r\n                    success: function (text) {\r\n                        body.html(text);\r\n                    }\r\n                });\r\n            }\r\n        }).show('<p class=\"loading\">' + lang('loading...') + '</p>', title);\r\n\r\n    });\r\n\r\n    //\r\n    $('.link-confirm').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var text = $(this).data('confirm');\r\n        var url = $(this).attr('href');\r\n        if (text) text = text.replace(/(\\\\n|\\n)+/g, \"<br />\");\r\n        if (!text) text = lang('Confirm operation?');\r\n        var method = $(this).data('method')\r\n        if (!method) method = 'GET'\r\n\r\n        dialog.confirm(text, function () {\r\n            $.ajax({\r\n                url: url,\r\n                type: method,\r\n                dataType: 'JSON',\r\n                success: function (json) {\r\n                    dialog.alert(json.msg, function () {\r\n                        if (json.code == 1) {\r\n                            if (json.url) {\r\n                                location.href = json.url;\r\n                            } else {\r\n                                location.reload();\r\n                            }\r\n                        }\r\n                    });\r\n                },\r\n                error: function () {\r\n                    dialog.alert(lang('Server error.'));\r\n                }\r\n            })\r\n        });\r\n    });\r\n\r\n    //\r\n    $('.img-view').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var url = $(this).attr('href');\r\n        if (!url) url = $(this).data('img');\r\n        var dlg = new Dialog({\r\n            btns: ['']\r\n        }).show('<a href=\"' + url + '\" class=\"d-block text-center\" target=\"_blank\"><img class=\"img-fluid\" src=\"' + url + '\" /></a><div class=\"text-muted text-center\"></div>', '');\r\n    });\r\n\r\n    //tab\r\n    $('.nav-tabs a').click(function (e) {\r\n        e.preventDefault();\r\n        $(this).tab('show');\r\n    });\r\n\r\n    //\r\n    window.fileInputHander = function () {\r\n        var self = $(this);\r\n        if (!this.files || !this.files[0]) return;\r\n        var inputgroup = $(this).parents('.input-group').eq(0);\r\n        var parent = inputgroup.parents('div').eq(0);\r\n        var label = $(this).parents('.custom-file').find('.custom-file-label');\r\n        if (!label.data('origtext')) {\r\n            label.data('origtext', label.text());\r\n        }\r\n        label.text($(this).val());\r\n\r\n        if (!window.URL && !window.URL.createObjectURL) return;\r\n        var file = self[0].files[0];\r\n        var is_img = file.type && file.type.match(/(\\.|\\/)(jpe?g|png|gif|webp)$/);\r\n\r\n\r\n        var figure = parent.find('.figure');\r\n        if (!figure.length) {\r\n            parent.append('<figure class=\"figure\">\\n' +\r\n                '                            <img src=\"/static/images/blank.gif\" class=\"figure-img img-fluid rounded\" alt=\"image\">\\n' +\r\n                '                            <figcaption class=\"figure-caption text-center\"></figcaption>\\n' +\r\n                '                        </figure>');\r\n            figure = parent.find('.figure');\r\n        }\r\n        if (is_img) {\r\n            var img = figure.find('img');\r\n            var origurl = img.data('origurl');\r\n            if (!origurl) {\r\n                origurl = img.attr('src');\r\n                img.data('origurl', origurl);\r\n            }\r\n            var figcap = figure.find('figcaption');\r\n            if (figcap.data('origtext') === undefined) {\r\n                figcap.data('origtext', figcap.text());\r\n            }\r\n            img.attr('src', window.URL.createObjectURL(file));\r\n            figcap.text(self.val());\r\n        }\r\n\r\n        var cancel = inputgroup.find('a.cancel');\r\n        if (!cancel.length) {\r\n            inputgroup.append('<div class=\"input-group-append\"><a href=\"javascript:\" class=\"btn btn-outline-danger cancel\"></a></div>');\r\n            cancel = inputgroup.find('a.cancel');\r\n            cancel.click(function (e) {\r\n                dialog.confirm('?', function () {\r\n                    self.val('');\r\n                    label.text(label.data('origtext'));\r\n                    if (is_img) {\r\n                        img.attr('src', origurl);\r\n                        figcap.text(figcap.data('origtext'));\r\n                    }\r\n                    cancel.parent().remove();\r\n                })\r\n\r\n            })\r\n        }\r\n    };\r\n    $('.custom-file .custom-file-input').on('change', window.fileInputHander);\r\n\r\n    //Ajax\r\n    $('.btn-primary[type=submit]').click(function (e) {\r\n        var form = $(this).parents('form');\r\n        if (form.is('.noajax')) return true;\r\n        var btn = this;\r\n\r\n        var isbtn = $(btn).prop('tagName').toUpperCase() == 'BUTTON';\r\n        var origText = isbtn ? $(btn).text() : $(btn).val();\r\n        var options = {\r\n            url: $(form).attr('action'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            success: function (json) {\r\n                window.stop_ajax = false;\r\n                isbtn ? $(btn).text(origText) : $(btn).val(origText);\r\n                if (json.code == 1) {\r\n                    dialog.alert(json.msg, function () {\r\n                        if (json.url) {\r\n                            location.href = json.url;\r\n                        } else {\r\n                            location.reload();\r\n                        }\r\n                    });\r\n                } else {\r\n                    dialog.warning(json.msg);\r\n                    $(btn).removeAttr('disabled');\r\n                }\r\n            },\r\n            error: function (xhr) {\r\n                window.stop_ajax = false;\r\n                isbtn ? $(btn).text(origText) : $(btn).val(origText);\r\n                $(btn).removeAttr('disabled');\r\n                dialog.error('');\r\n            }\r\n        };\r\n        if (form.attr('enctype') === 'multipart/form-data') {\r\n            if (!FormData) {\r\n                window.stop_ajax = false;\r\n                return true;\r\n            }\r\n            options.data = new FormData(form[0]);\r\n            options.cache = false;\r\n            options.processData = false;\r\n            options.contentType = false;\r\n            options.xhr = function () { //\r\n                var xhr = $.ajaxSettings.xhr();\r\n                if (xhr.upload) {\r\n                    xhr.upload.addEventListener('progress', function (event) {\r\n                        var percent = Math.floor(event.loaded / event.total * 100);\r\n                        $(btn).text(origText + '  (' + percent + '%)');\r\n                    }, false);\r\n                }\r\n                return xhr;\r\n            };\r\n        } else {\r\n            options.data = $(form).serialize();\r\n        }\r\n\r\n        e.preventDefault();\r\n        $(this).attr('disabled', true);\r\n        window.stop_ajax = true;\r\n        $.ajax(options);\r\n    });\r\n\r\n    //\r\n    $('.pickuser').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('[name=member_id]');\r\n        var infoele = group.find('[name=member_info]');\r\n        dialog.pickUser(function (user) {\r\n            idele.val(user.id);\r\n            infoele.val('[' + user.id + '] ' + user.username + (user.mobile ? (' / ' + user.mobile) : ''));\r\n        }, $(this).data('filter'));\r\n    });\r\n\r\n    //\r\n    $('.pick-locate').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('input[type=text]');\r\n        dialog.pickLocate('qq', function (locate) {\r\n            idele.val(locate.lng + ',' + locate.lat);\r\n        }, idele.val());\r\n    });\r\n});","(function (window, $) {\r\n    var dialogTpl = '<div class=\"modal shirne-modal fade\" id=\"{@id}\" {if tabindex}tabindex=\"{@tabindex}\"{/if} role=\"dialog\" aria-labelledby=\"{@id}Label\" aria-hidden=\"true\">\\n' +\r\n        '    <div class=\"modal-dialog {@size}\">\\n' +\r\n        '        <div class=\"modal-content {@contentClass}\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\">{@title}</h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span aria-hidden=\"true\">&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body {@bodyClass}\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx = 0;\r\n    function format_btn(btn, isdefault) {\r\n        if (typeof (btn) === typeof 'a') {\r\n            btn = { 'text': btn, 'isdefault': isdefault ? true : false };\r\n        }\r\n        if (btn.isdefault) {\r\n            if (!btn.type) {\r\n                btn.type = 'primary'\r\n            }\r\n        }\r\n        return btn;\r\n    }\r\n    function Dialog(opts) {\r\n        if (!opts) opts = {};\r\n        //\r\n        if (opts.btns) {\r\n            if (typeof (opts.btns) == 'string') {\r\n                opts.btns = [format_btn(opts.btns, true)];\r\n            }\r\n            else if (opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    opts.btns[i] = format_btn(opts.btns[i])\r\n                }\r\n            } else {\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns = [];\r\n            }\r\n        }\r\n\r\n        this.options = $.extend({\r\n            id: 'modal_dialog_' + dialogIdx++,\r\n            header: true,\r\n            footer: true,\r\n            backdrop: true,\r\n            tabindex: -1,\r\n            size: '',\r\n            btns: [\r\n                { 'text': '', 'type': 'secondary' },\r\n                { 'text': '', 'isdefault': true, 'type': 'primary' }\r\n            ],\r\n            contentClass: '',\r\n            onsure: null,\r\n            onshow: null,\r\n            onshown: null,\r\n            onhide: null,\r\n            onhidden: null\r\n        }, opts);\r\n        if (!this.options.btns) this.options.btns = [];\r\n        var btncount = this.options.btns.length;\r\n        if (opts.addbtn) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            opts.addbtn = format_btn(opts.addbtn)\r\n            if (btncount < 1) {\r\n                this.options.btns.unshift(opts.addbtn)\r\n            } else {\r\n                this.options.btns.splice(btncount - 1, 0, opts.addbtn)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (opts.addbtns) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            if (btncount < 1) {\r\n                this.options.btns = opts.addbtns\r\n            } else {\r\n                var args = [btncount - 1, 0]\r\n                for (var i = 0; i < opts.addbtns.length; i++) {\r\n                    args.push(format_btn(opts.addbtns[i]))\r\n                }\r\n                this.options.btns.splice.apply(this.options.btns, args)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (btncount < 1) {\r\n            this.options.footer = false;\r\n        }\r\n\r\n        this.closed = true;\r\n        this.box = $(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn = function (opt, idx) {\r\n        if (opt['type']) opt['class'] = 'btn-outline-' + opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn ' + (opt['class'] ? opt['class'] : 'btn-outline-secondary') + '\" ' + (opt.isdefault ? 'default' : '') + ' data-index=\"' + idx + '\">' + opt.text + '</a>';\r\n    };\r\n    Dialog.prototype.getDefaultBtn = function () {\r\n        var btn = null\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btn = this.options.btns[i]\r\n            if (btn.isdefault) break;\r\n        }\r\n        return btn\r\n    }\r\n    Dialog.prototype.show = function (html, title) {\r\n        this.box = $('#' + this.options.id);\r\n        if (!title) title = '';\r\n\r\n        if (this.box.length < 1) {\r\n            $(document.body).append(dialogTpl.compile({\r\n                id: this.options.id,\r\n                bodyClass: this.options.bodyClass,\r\n                contentClass: this.options.contentClass,\r\n                tabindex: this.options.tabindex,\r\n                size: this.options.size ? ('modal-' + this.options.size) : '',\r\n                title: title\r\n            }));\r\n            this.box = $('#' + this.options.id);\r\n        } else {\r\n            this.box.unbind();\r\n            this.box.find('.modal-title').text(title);\r\n        }\r\n        if (!this.options.header) {\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if (!this.options.footer) {\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if (this.options.backdrop !== true) {\r\n            this.box.data('backdrop', this.options.backdrop);\r\n\r\n            //\r\n            if (this.options.backdrop === false) {\r\n                this.box.css({ 'height': 0, 'overflow': 'visible' });\r\n            }\r\n        }\r\n        if (!this.options.keyboard) {\r\n            this.box.data('keyboard', false);\r\n        }\r\n\r\n        var self = this;\r\n        Dialog.instance = self;\r\n\r\n        //\r\n        var btns = [];\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btns.push(this.generBtn(this.options.btns[i], i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var body = this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal', function () {\r\n            if (self.options.onhide) {\r\n                self.options.onhide(body, self.box);\r\n            }\r\n            Dialog.instance = null;\r\n        });\r\n        this.box.on('hidden.bs.modal', function () {\r\n            if (self.options.onhidden) {\r\n                self.options.onhidden(body, self.box);\r\n            }\r\n            self.closed = true;\r\n            self.box.remove();\r\n            self.box = null;\r\n        });\r\n        this.box.on('show.bs.modal', function () {\r\n            if (self.options.onshow) {\r\n                self.options.onshow(body, self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal', function () {\r\n            if (self.box && self.closed) {\r\n                return self.box.modal('hide');\r\n            }\r\n            if (self.options.onshown) {\r\n                self.options.onshown(body, self.box);\r\n            }\r\n        });\r\n        if (this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                } else {\r\n                    if (self.options.btns[idx].isdefault) {\r\n                        if (self.options.onsure) {\r\n                            result = self.options.onsure.apply(this, [body, self.box]);\r\n                        }\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed = false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide = Dialog.prototype.close = function () {\r\n        if (this.box && !this.closed) {\r\n            this.closed = true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog = {\r\n        error: function (message, time) {\r\n            return this.message(message, 'error', time);\r\n        },\r\n        success: function (message, time) {\r\n            return this.message(message, 'success', time);\r\n        },\r\n        warning: function (message, time) {\r\n            return this.message(message, 'warning', time);\r\n        },\r\n        info: function (message, time) {\r\n            return this.message(message, 'info', time);\r\n        },\r\n        loading: function (message, time) {\r\n            return this.message(message ? message : '...', 'loading', time);\r\n        },\r\n        message: function (message, type, time) {\r\n            var cssClass = 'bg-info text-white';\r\n            var icon = 'information-circle';\r\n            if (type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon = 'close-circle';\r\n                        cssClass = 'bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon = 'warning';\r\n                        cssClass = 'bg-warning text-white';\r\n                        break;\r\n                    case 'loading':\r\n                        icon = '<div class=\"spinner-border text-light\" role=\"status\">\\n' +\r\n                            '  <span class=\"sr-only\">Loading...</span>\\n' +\r\n                            '</div>';\r\n                        cssClass = 'bg-info text-white';\r\n                        if (!time) time = 10;\r\n                        break;\r\n                    case 'success':\r\n                        icon = 'checkmark-circle';\r\n                        cssClass = 'bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            if (type != 'loading') icon = '<i class=\"ion-md-' + icon + '\"></i>';\r\n            var html = '<div class=\"dialog-message\" >' + icon + '&nbsp;&nbsp;<span class=\"message-text\">' + message + '</span>' + (type == 'loading' ? '' : '<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a>') + '</div>';\r\n\r\n            var dlg = new Dialog({\r\n                footer: false,\r\n                header: false,\r\n                backdrop: false,\r\n                tabindex: '',\r\n                size: 'sm',\r\n                contentClass: cssClass,\r\n                onshow: function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html, '');\r\n            if (!time) time = 2;\r\n            if (time > 0) setTimeout(function () { dlg.close(); }, time * 1000);\r\n            return dlg;\r\n        },\r\n        alert: function (message, callback, icon) {\r\n            var called = false;\r\n            var iscallback = typeof callback == 'function';\r\n            var title = '';\r\n            var size = 'sm';\r\n            var html = '';\r\n            var buttonText = ''\r\n            if (callback !== undefined && !iscallback) {\r\n                icon = callback;\r\n            }\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['buttonText'] !== undefined) {\r\n                    buttonText = message['buttonText'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message = message['content'];\r\n            }\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon == 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            if (icon) {\r\n                html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                    message: message\r\n                }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            } else {\r\n                html = message;\r\n            }\r\n            return new Dialog({\r\n                btns: buttonText,\r\n                size: size,\r\n                header: title ? true : false,\r\n                onsure: function () {\r\n                    if (iscallback) {\r\n                        called = true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (!called && iscallback) {\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n        },\r\n        confirm: function (message, confirm, cancel, icon, countdown) {\r\n            var called = false;\r\n            if (typeof confirm !== 'function') {\r\n                icon = confirm;\r\n                if (typeof cancel === 'function') {\r\n                    confirm = cancel;\r\n                    cancel = null;\r\n                } else {\r\n                    countdown = cancel;\r\n                }\r\n            } else if (typeof cancel !== 'function') {\r\n                countdown = icon;\r\n                icon = cancel;\r\n            }\r\n            if (typeof icon === 'number') {\r\n                countdown = icon;\r\n                icon = undefined;\r\n            }\r\n\r\n            var onshown = null;\r\n            var title = '';\r\n            var size = 'sm';\r\n            var btns = [\r\n                { 'text': '', 'type': 'secondary' },\r\n                { 'text': '', 'isdefault': true, 'type': 'primary' }\r\n            ];\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['btns'] !== undefined) {\r\n                    btns = message['btns'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                if (message['onshown'] !== undefined) {\r\n                    onshown = message['onshown'];\r\n                }\r\n                message = message['content'];\r\n            }\r\n\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon === 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            var html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                message: message\r\n            }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message: message,\r\n                icon: icon,\r\n                color: color\r\n            });\r\n\r\n            var inteval = 0;\r\n\r\n            var dlg = new Dialog({\r\n                header: title ? true : false,\r\n                size: size,\r\n                backdrop: 'static',\r\n                onshown: onshown,\r\n                onsure: function () {\r\n                    if (confirm && typeof confirm === 'function') {\r\n                        called = true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    clearInterval(inteval);\r\n                    if (called === false && typeof cancel === 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n\r\n            if (countdown && typeof countdown === 'number') {\r\n                var btn = dlg.box.find('.modal-footer .btn-outline-primary');\r\n                var btnText = dlg.getDefaultBtn().text;\r\n                btn.addClass('disabled').text(btnText + '(' + countdown + ')');\r\n                inteval = setInterval(function () {\r\n                    countdown--;\r\n                    if (countdown > 0) {\r\n                        btn.text(btnText + '(' + countdown + ')');\r\n                    } else {\r\n                        btn.text(btnText);\r\n                        btn.removeClass('disabled');\r\n                        clearInterval(inteval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n            return dlg;\r\n        },\r\n        prompt: function (message, callback, cancel) {\r\n            var called = false;\r\n            var contentHtml = '<div class=\"form-group\">{@input}</div>';\r\n            var title = '';\r\n            var is_multi = false;\r\n            var is_textarea = false;\r\n            var multiset = {};\r\n            var keyboard = true;\r\n            var dftValue = '';\r\n            if (typeof message == 'string') {\r\n                title = message;\r\n            } else {\r\n                title = message.title;\r\n                if (message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n                if (message.multi) {\r\n                    is_multi = true;\r\n                    multiset = message.multi;\r\n                }\r\n                if (message.is_textarea) {\r\n                    is_textarea = true;\r\n                }\r\n                if (message.keyboard !== undefined) {\r\n                    keyboard = message.keyboard;\r\n                } else if (is_textarea) {\r\n                    keyboard = false;\r\n                }\r\n                if (message.default) {\r\n                    dftValue = message.default.toString();\r\n                }\r\n            }\r\n            var inputHtml = '<input type=\"text\" name=\"confirm_input\" class=\"form-control\" />';\r\n            if (is_textarea) {\r\n                inputHtml = '<textarea name=\"confirm_input\" class=\"form-control\" ></textarea>';\r\n            }\r\n            if (is_multi) {\r\n                inputHtml = '';\r\n                for (var i in multiset) {\r\n                    var label = multiset[i], value = '', sub_is_textarea = false;\r\n                    if (typeof label === 'object') {\r\n                        value = label.value ? label.value : ''\r\n                        sub_is_textarea = label.is_textarea ? label.is_textarea : is_textarea;\r\n                        label = label.label ? label.label : (label.title ? label.title : i)\r\n                    }\r\n                    if (sub_is_textarea) {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><textarea name=\"confirm_input\" data-key=\"' + i + '\" class=\"form-control\" >' + value + '</textarea></div>';\r\n                    } else {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><input type=\"text\" data-key=\"' + i + '\" name=\"confirm_input\" value=\"' + value + '\" class=\"form-control\" /></div>';\r\n                    }\r\n                }\r\n            }\r\n            return new Dialog({\r\n                backdrop: 'static',\r\n                keyboard: keyboard,\r\n                onshow: function (body) {\r\n                    if (message && message.onshow) {\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                onshown: function (body) {\r\n                    var firstInput = body.find('[name=confirm_input]').eq(0);\r\n                    if (dftValue) {\r\n                        firstInput.val(dftValue);\r\n                    }\r\n                    firstInput.select();\r\n                    if (message && message.onshown) {\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                onsure: function (body) {\r\n                    var inputs = body.find('[name=confirm_input]'), val = inputs.val();\r\n                    if (is_multi) {\r\n                        val = {};\r\n                        inputs.each(function () {\r\n                            var key = $(this).data('key')\r\n                            val[key] = $(this).val()\r\n                        })\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(val, body);\r\n                        if (result === true) {\r\n                            called = true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (called == false && typeof cancel == 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({ input: inputHtml }), title);\r\n        },\r\n        action: function (list, callback, title) {\r\n            var html = '<div class=\"list-group\"  style=\"max-height: 70vh;overflow: auto;\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">' + list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">') + '</a></div>';\r\n            var actions = null;\r\n            var dlg = new Dialog({\r\n                bodyClass: 'modal-action',\r\n                backdrop: 'static',\r\n                size: 'sm',\r\n                btns: [\r\n                    { 'text': '', 'type': 'secondary' }\r\n                ],\r\n                onshow: function (body) {\r\n                    actions = body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val = actions.index(this);\r\n                        if (typeof callback == 'function') {\r\n                            if (callback(val) !== false) {\r\n                                dlg.close();\r\n                            }\r\n                        } else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                onsure: function (body) {\r\n                    return true;\r\n                },\r\n                onhide: function () {\r\n                    return true;\r\n                }\r\n            }).show(html, title ? title : '');\r\n        },\r\n        pickTree: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                list: [],\r\n                name: '',\r\n                idkey: 'id',\r\n                titlekey: 'title',\r\n                level: 3,\r\n                onRow: null,\r\n                toList: function (json) {\r\n                    return json.data;\r\n                },\r\n                breadTemplate: '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"{@id}\">{@title}</a></li>',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">' + icon + '[{@id}]&nbsp;{@title}</a>'\r\n            }, config || {});\r\n            var selected = [{ id: 0, pid: -1, title: config.name }]\r\n            if (!filter) filter = {};\r\n\r\n            var title = '' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                contentTpl = '<nav aria-label=\"breadcrumb\"><ol class=\"breadcrumb\"><li class=\"breadcrumb-item active\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"0\">' + config.name + '</a></li></ol></nav>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var breadcrumb = body.find('.breadcrumb');\r\n                    var listbox = body.find('.list-group');\r\n                    var lastLoading = 0;\r\n                    listbox.on('click', 'a.list-group-item', function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                if (config.list[i].pid == selected[selected.length - 1].pid) {\r\n                                    selected.pop()\r\n                                }\r\n                                selected.push(config.list[i])\r\n                                if (selected.length <= config.level) {\r\n                                    dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', true)\r\n                                } else {\r\n                                    dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', false)\r\n                                }\r\n                                breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                                loadList()\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    breadcrumb.on('click', '.breadcrumb-item a', function () {\r\n                        var id = $(this).data('id')\r\n                        var index = selected.findIndex((v) => v.id == id)\r\n                        if (index > -1) {\r\n                            selected = selected.slice(0, index + 1)\r\n                            breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                            loadList()\r\n                        }\r\n                    })\r\n\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n\r\n                    function loadList() {\r\n                        var curLoading = new Date().getTime()\r\n                        lastLoading = curLoading;\r\n                        //listbox.html('<span class=\"list-loading\">...</span>');\r\n                        filter['pid'] = selected[selected.length - 1].id;\r\n\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    if (curLoading != lastLoading) return;\r\n                                    if (json.code === 1) {\r\n                                        var lists = config.toList(json);\r\n                                        if (lists && lists.length) {\r\n                                            config.list = lists\r\n                                            listbox.html(config.rowTemplate.compile(lists, true));\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> </span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }\r\n                    loadList();\r\n                },\r\n                onsure: function (body) {\r\n                    if (selected.length < config.level) {\r\n                        dialog.warning('' + config.name + '!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(selected.slice(1));\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickList: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                list: [],\r\n                name: '',\r\n                searchHolder: '',\r\n                idkey: 'id',\r\n                titlekey: 'title',\r\n                searchkey: 'key',\r\n                onRow: null,\r\n                extend: null,\r\n                toList: function (json) {\r\n                    return json.data;\r\n                },\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">' + icon + '[{@id}]&nbsp;{@title}</a>'\r\n            }, config || {});\r\n            var current = null;\r\n            var exthtml = '';\r\n            if (config.extend) {\r\n                exthtml = '<select name=\"' + config.extend.name + '\" class=\"form-control\"><option value=\"\">' + config.extend.title + '</option></select>';\r\n            }\r\n            if (!filter) filter = {};\r\n\r\n            var title = '' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                title = '' + config.name;\r\n                contentTpl = '<div class=\"input-group\">' + exthtml + '<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"' + config.searchHolder + '\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var listbox = body.find('.list-group');\r\n                    var isloading = false;\r\n                    listbox.on('click', 'a.list-group-item', function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                current = config.list[i];\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n                    var extField = null;\r\n                    if (config.extend) {\r\n                        extField = body.find('[name=' + config.extend.name + ']');\r\n                        if (config.extend.list) {\r\n                            extField.append(config.extend.htmlRow.compile(config.extend.list, true));\r\n                        } else {\r\n                            $.ajax({\r\n                                url: config.extend.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                success: function (json) {\r\n                                    extField.append(config.extend.htmlRow.compile(json.data, true));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    btn.click(function () {\r\n                        if (isloading) return;\r\n                        isloading = true;\r\n                        listbox.html('<span class=\"list-loading\">...</span>');\r\n                        filter[config.searchkey] = input.val();\r\n                        if (config.extend) {\r\n                            filter[config.extend.name] = extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    isloading = false;\r\n                                    if (json.code === 1) {\r\n                                        config.list = config.toList(json);\r\n                                        if (config.list && config.list.length) {\r\n                                            listbox.html(config.rowTemplate.compile(config.list, true));\r\n                                        } else {\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> ' + config.name + '</span>');\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> </span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }).trigger('click');\r\n                },\r\n                onsure: function (body) {\r\n                    if (!current) {\r\n                        dialog.warning('' + config.name + '!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickUser: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('member'),\r\n                title: title,\r\n                name: '',\r\n                searchHolder: 'id',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">{if @avatar}<img src=\"{@avatar}\" style=\"width:30px;height:30px;border-radius: 100%;margin-right:10px;\" />{else}<i class=\"ion-md-person\"></i>{/if} <div class=\"flex-info\"><div>[{@id}]&nbsp;{if @nickname}{@nickname}{else}{@username}{/if}&nbsp;&nbsp;&nbsp;{if @mobile}<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small>{/if}</div><div>{if @level}<small><i class=\"ion-md-people\"></i> {@level.level_name}</small>{/if}&nbsp;{if @agent}<small><i class=\"ion-md-ribbon\"></i> {@agent.name}</small>{/if}</div></div></a>'\r\n            }, callback, filter);\r\n        },\r\n        pickArticle: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('article'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                title: title,\r\n                name: '',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '',\r\n                    url: get_cate_url('article'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': ''\r\n            }, callback, filter);\r\n        },\r\n        pickProduct: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            var issku = filter && filter['searchtype'];\r\n            var titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}{if @max_price>@min_price}~{@max_price}{/if}</div>';\r\n            if (issku) titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />[{@sku_goods_no}]&nbsp;{@price}</div>';\r\n            return this.pickList({\r\n                url: window.get_search_url('product'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}' + titletpl + '</a>',\r\n                title: title,\r\n                name: '',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '',\r\n                    url: get_cate_url('product'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': ''\r\n            }, callback, filter);\r\n        },\r\n        pickCategory: function (callback, model, title) {\r\n            return this.pickList({\r\n                title: title,\r\n                url: window.get_cate_url(model),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action pt-0 pb-0\" style=\"line-height:30px;\">{@html}&nbsp;[{@id}]&nbsp;{@title}</a>'\r\n            }, callback);\r\n        },\r\n        pickLocate: function (type, callback, locate) {\r\n            var settedLocate = null;\r\n            var address = null;\r\n            var height = $(window).height() * 0.6;\r\n            if (!type) type = 'tencent';\r\n            var dlg = new Dialog({\r\n                size: 'lg',\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var mapbox = body.find('.map');\r\n                    var mapinfo = body.find('.mapinfo');\r\n                    var isloading = false;\r\n                    setTimeout(function () {\r\n                        var map = InitMap(type, mapbox, function (formatted, locate, comp) {\r\n                            mapinfo.html(formatted + '&nbsp;' + locate.lng + ',' + locate.lat);\r\n                            settedLocate = locate;\r\n                            address = comp;\r\n                        }, locate);\r\n                        btn.click(function () {\r\n                            var search = input.val();\r\n                            map.setLocate(search);\r\n                        });\r\n                        body.find('.setToCenter').click(function (e) {\r\n                            map.showAtCenter();\r\n                        })\r\n                    }, 500)\r\n\r\n                },\r\n                onsure: function (body) {\r\n                    if (!settedLocate) {\r\n                        dialog.warning('!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        var result = callback(settedLocate, address);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\" style=\"height:' + height + 'px\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\"></a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\"></div>', '');\r\n            return dlg;\r\n        }\r\n    };\r\n\r\n    $(document).on('keydown', function (e) {\r\n        if (e.keyCode == 13) {\r\n            var currentModal = $('.shirne-modal').eq(-1);\r\n            if (currentModal && currentModal.data('keyboard') !== false) {\r\n                currentModal.find('.modal-footer .btn[default]').trigger('click');\r\n            }\r\n        }\r\n    });\r\n\r\n    // \r\n    window.Dialog = $.Dialog = Dialog;\r\n    window.dialog = $.dialog = dialog;\r\n})(window, jQuery || Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn,{\r\n    tags:function(nm,onupdate){\r\n        var data=[];\r\n        var tpl='<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"'+nm+'\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item=$(this).parents('.form-control');\r\n        var labelgroup=$('<span class=\"badge-group\"></span>');\r\n        var input=this;\r\n        this.before(labelgroup);\r\n        this.on('keyup',function(){\r\n            var val=$(this).val().replace(//g,',');\r\n            var updated=false;\r\n            if(val && val.indexOf(',')>-1){\r\n                var vals=val.split(',');\r\n                for(var i=0;i<vals.length;i++){\r\n                    vals[i]=vals[i].replace(/^\\s|\\s$/g,'');\r\n                    if(vals[i] && data.indexOf(vals[i])===-1){\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({label:vals[i]}));\r\n                        updated=true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if(updated && onupdate)onupdate(data);\r\n            }\r\n        }).on('blur',function(){\r\n            var val=$(this).val();\r\n            if(val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click','.close',function(){\r\n            var tag=$(this).parents('.badge').find('input').val();\r\n            var id=data.indexOf(tag);\r\n            if(id)data.splice(id,1);\r\n            $(this).parents('.badge').remove();\r\n            if(onupdate)onupdate(data);\r\n        });\r\n        item.click(function(){\r\n            input.focus();\r\n        });\r\n    }\r\n});","\r\n(function(window,$) {\r\n\r\n\r\n    var apis = {\r\n        'baidu': '//api.map.baidu.com/api?ak=__KEY__&v=1.5&services=false&callback=',\r\n        'google': '//maps.google.com/maps/api/js?key=__KEY__&callback=', //&language=zh\r\n        'tencent': '//map.qq.com/api/js?v=2.exp&key=__KEY__&callback=',\r\n        'gaode': '//webapi.amap.com/maps?v=1.3&key=__KEY__&callback='\r\n    };\r\n\r\n    function loadScript(src) {\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n        script.src = src;\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    var mapObj,mapBox,onPick;\r\n\r\n    function InitMap(maptype,box,callback,locate) {\r\n        if (mapObj) mapObj.hide();\r\n        mapBox=$(box);\r\n        onPick=callback;\r\n\r\n        switch (maptype.toLowerCase()) {\r\n            case 'baidu':\r\n                mapObj = new BaiduMap();\r\n                break;\r\n            case 'google':\r\n                mapObj = new GoogleMap();\r\n                break;\r\n            case 'tencent':\r\n            case 'qq':\r\n                mapObj = new TencentMap();\r\n                break;\r\n            case 'gaode':\r\n                mapObj = new GaodeMap();\r\n                break;\r\n        }\r\n        if (!mapObj) return dialog.warning('');\r\n        if(locate){\r\n            if(typeof locate==='string'){\r\n                var loc=locate.split(',');\r\n                locate={\r\n                    lng:parseFloat(loc[0]),\r\n                    lat:parseFloat(loc[1])\r\n                }\r\n            }\r\n            mapObj.locate=locate;\r\n        }\r\n        mapObj.setMap();\r\n\r\n        return mapObj;\r\n    }\r\n\r\n    function BaseMap(type) {\r\n        if(type !== undefined) {\r\n            var key = 'MAPKEY_' + type.toUpperCase();\r\n\r\n            if (!window[key]) {\r\n                throw 'Pls define the ' + key + ' on window.';\r\n            }\r\n\r\n            this.mapkey = window[key];\r\n            this.mapType = type;\r\n            this.ishide = false;\r\n            this.isshow = false;\r\n            this.toshow = false;\r\n            this.marker = null;\r\n            this.infoWindow = null;\r\n            this.mapbox = null;\r\n            this.locate = null;\r\n            this.map = null;\r\n        }\r\n    }\r\n\r\n    BaseMap.prototype.isAPIReady = function () {\r\n        return false;\r\n    };\r\n    BaseMap.prototype.pointToObject = function () {\r\n    };\r\n    BaseMap.prototype.objectToPoint = function () {\r\n    };\r\n    BaseMap.prototype.setMap = function () {\r\n    };\r\n    BaseMap.prototype.showInfo = function () {\r\n    };\r\n    BaseMap.prototype.getCenter = function () {\r\n    };\r\n    BaseMap.prototype.getAddress = function (rs) {\r\n        return \"\";\r\n    };\r\n    BaseMap.prototype.getAddressComponent = function (rs) {\r\n        return {};\r\n    };\r\n    BaseMap.prototype.setLocate = function (address) {\r\n    };\r\n\r\n    BaseMap.prototype.loadAPI = function () {\r\n        var self = this;\r\n        if (!this.isAPIReady()) {\r\n            this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\">loading...</div>');\r\n            mapBox.append(this.mapbox);\r\n\r\n            //console.log(this.mapType+' maploading...');\r\n            var func = 'mapload' + new Date().getTime();\r\n            window[func] = function () {\r\n                self.setMap();\r\n                delete window[func];\r\n            };\r\n            var apiurl=apis[this.mapType].replace('__KEY__',this.mapkey);\r\n            loadScript(apiurl + func);\r\n            return false;\r\n        } else {\r\n            //console.log(this.mapType + ' maploaded');\r\n            this.mapbox = $('#' + this.mapType + 'map');\r\n            if (this.mapbox.length < 1) {\r\n                this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\"></div>');\r\n                mapBox.append(this.mapbox);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    BaseMap.prototype.setInfoContent = function () {\r\n        if (!this.infoWindow) return;\r\n        var title = '<b></b>';\r\n        var addr = '<p style=\"line-height:1.6em;\"></p>';\r\n        if (this.infoWindow.setTitle) {\r\n            this.infoWindow.setTitle(title);\r\n            this.infoWindow.setContent(addr);\r\n        } else {\r\n            var content = '<h3>' + title + '</h3><div style=\"width:250px\">' + addr + '</div>';\r\n            this.infoWindow.setContent(content);\r\n        }\r\n    };\r\n    BaseMap.prototype.showAtCenter=function () {\r\n        var center=this.getCenter();\r\n        this.showInfo(center);\r\n    };\r\n    BaseMap.prototype.showLocationInfo = function (pt, rs) {\r\n\r\n        this.showInfo();\r\n        var address=this.getAddress(rs);\r\n        var addressComponent=this.getAddressComponent(rs);\r\n        var locate={};\r\n        if (typeof (pt.lng) === 'function') {\r\n            locate.lng=pt.lng();\r\n            locate.lat=pt.lat();\r\n        } else {\r\n            locate.lng=pt.lng;\r\n            locate.lat=pt.lat;\r\n        }\r\n\r\n        onPick(address,locate,addressComponent);\r\n    };\r\n    BaseMap.prototype.show = function () {\r\n        this.ishide = false;\r\n        this.setMap();\r\n        this.showInfo();\r\n    };\r\n    BaseMap.prototype.hide = function () {\r\n        this.ishide = true;\r\n        if (this.infoWindow) {\r\n            this.infoWindow.close();\r\n        }\r\n        if (this.mapbox) {\r\n            $(this.mapbox).remove();\r\n        }\r\n    };\r\n\r\n\r\n    function BaiduMap() {\r\n        BaseMap.call(this, \"baidu\");\r\n    }\r\n\r\n    BaiduMap.prototype = new BaseMap();\r\n    BaiduMap.prototype.constructor = BaiduMap;\r\n    BaiduMap.prototype.isAPIReady = function () {\r\n        return !!window['BMap'];\r\n    };\r\n\r\n    BaiduMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        var map = self.map = new BMap.Map(this.mapbox.attr('id')); //\r\n        map.addControl(new BMap.NavigationControl());  //\r\n        map.addControl(new BMap.ScaleControl());\r\n        map.addControl(new BMap.OverviewMapControl());\r\n        map.enableScrollWheelZoom();\r\n\r\n        if(!this.locate)this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        \r\n        map.centerAndZoom(point, 15); //\r\n        this.marker = new BMap.Marker(point); //\r\n        this.marker.enableDragging(); //\r\n\r\n        var gc = new BMap.Geocoder(); //\r\n        //\r\n        this.marker.addEventListener(\"dragend\", function (e) {\r\n            //\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        //\r\n        this.marker.addEventListener(\"click\", function (e) {\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        map.addOverlay(this.marker); //\r\n\r\n        gc.getLocation(point, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n\r\n        this.infoWindow = new BMap.InfoWindow(\"\", {\r\n            width: 250,\r\n            title: \"\"\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    BaiduMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    BaiduMap.prototype.objectToPoint = function (object) {\r\n        return new BMap.Point(parseFloat(object.lng),parseFloat(object.lat));\r\n    };\r\n    BaiduMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    BaiduMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.panTo(new BMap.Point(point.lng,point.lat));\r\n        }\r\n        this.setInfoContent();\r\n\r\n        this.marker.openInfoWindow(this.infoWindow);\r\n    };\r\n    BaiduMap.prototype.getAddress = function (rs) {\r\n        var addComp = rs.addressComponents;\r\n        if(addComp) {\r\n            return addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street + \", \" + addComp.streetNumber;\r\n        }\r\n    };\r\n    BaiduMap.prototype.getAddressComponent = function (rs) {\r\n        return rs.addressComponents;\r\n    };\r\n    BaiduMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new BMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n\r\n    function GoogleMap() {\r\n        BaseMap.call(this, \"google\");\r\n        this.infoOpts = {\r\n            width: 250,     //\r\n            //   height: 100,     //\r\n            title: \"\"  //\r\n        };\r\n    }\r\n\r\n    GoogleMap.prototype = new BaseMap();\r\n    GoogleMap.prototype.constructor = GoogleMap;\r\n    GoogleMap.prototype.isAPIReady = function () {\r\n        return window['google'] && window['google']['maps']\r\n    };\r\n    GoogleMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        //\r\n        if (this.mapbox.length < 1) return;\r\n\r\n        var map = self.map = new google.maps.Map(this.mapbox[0], {\r\n            zoom: 15,\r\n            draggable: true,\r\n            scaleControl: true,\r\n            streetViewControl: true,\r\n            zoomControl: true\r\n        });\r\n\r\n        //\r\n        if(!this.locate)this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point);\r\n        this.marker = new google.maps.Marker({position: point, map: map, draggable: true});\r\n\r\n\r\n        var gc = new google.maps.Geocoder();\r\n\r\n        this.marker.addListener(\"dragend\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        //\r\n        this.marker.addListener(\"click\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        gc.geocode({'location': point}, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n        this.infoWindow = new google.maps.InfoWindow({map: map});\r\n        this.infoWindow.setPosition(point);\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    GoogleMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    GoogleMap.prototype.objectToPoint = function (object) {\r\n        return new google.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    GoogleMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GoogleMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setOptions({position: this.marker.getPosition()});\r\n        this.setInfoContent();\r\n\r\n    };\r\n    GoogleMap.prototype.getAddress = function (rs, status) {\r\n        if (rs && rs[0]) {\r\n            return rs[0].formatted_address;\r\n        }\r\n    };\r\n    GoogleMap.prototype.getAddressComponent = function (rs, status) {\r\n        var result={};\r\n        if (rs && rs[0]) {\r\n            var comps=rs[0].address_components\r\n            if(comps[0])result.country=comps[0].long_name\r\n            if(comps[1])result.province=comps[1].long_name\r\n            if(comps[2])result.city=comps[2].long_name\r\n            if(comps[3])result.district=comps[3].long_name\r\n            if(comps[4])result.street=comps[4].long_name\r\n            if(comps[5])result.address=comps[5].long_name\r\n        }\r\n        return result;\r\n    };\r\n    GoogleMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new google.maps.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    function TencentMap() {\r\n        BaseMap.call(this, \"tencent\");\r\n    }\r\n\r\n    TencentMap.prototype = new BaseMap();\r\n    TencentMap.prototype.constructor = TencentMap;\r\n    TencentMap.prototype.isAPIReady = function () {\r\n        return window['qq'] && window['qq']['maps'];\r\n    };\r\n    TencentMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    TencentMap.prototype.objectToPoint = function (object) {\r\n        return new qq.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    TencentMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        //\r\n        var map = self.map = new qq.maps.Map(this.mapbox[0], {zoom: 15});\r\n        //\r\n        new qq.maps.ScaleControl({\r\n            align: qq.maps.ALIGN.BOTTOM_LEFT,\r\n            margin: qq.maps.Size(85, 15),\r\n            map: map\r\n        });\r\n        //map.addControl(new BMap.OverviewMapControl());\r\n        //map.enableScrollWheelZoom();\r\n\r\n        //\r\n        if(!this.locate)this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point); //\r\n\r\n        //\r\n        this.marker = new qq.maps.Marker({\r\n            position: point,\r\n            draggable: true,\r\n            map: map\r\n        });\r\n        this.marker.setAnimation(qq.maps.MarkerAnimation.DOWN);\r\n\r\n        //\r\n        var gc = new qq.maps.Geocoder({\r\n            complete: function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            }\r\n        });\r\n\r\n        qq.maps.event.addListener(this.marker, 'click', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n        //Marker\r\n        qq.maps.event.addListener(this.marker, 'dragend', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n\r\n        gc.getAddress(point);\r\n\r\n        this.infoWindow = new qq.maps.InfoWindow({map: map});\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    TencentMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n        this.infoWindow.open();\r\n        this.setInfoContent();\r\n    };\r\n\r\n    TencentMap.prototype.getAddress = function (rs) {\r\n        if(rs && rs.detail) {\r\n            return rs.detail.address;\r\n        }\r\n        return \"\";\r\n    };\r\n    \r\n    TencentMap.prototype.getAddressComponent = function (rs) {\r\n        if(rs && rs.detail) {\r\n            var comp = rs.detail.addressComponents\r\n            if(!comp.province){\r\n                comp.province=comp.city;\r\n            }\r\n            if(comp.streetNumber){\r\n                comp.address=comp.streetNumber\r\n            }\r\n            return comp;\r\n        }\r\n        return {};\r\n    };\r\n\r\n    TencentMap.prototype.setLocate = function (address) {\r\n        // \r\n        var self = this;\r\n        var myGeo = new qq.maps.Geocoder({\r\n            complete: function (result) {\r\n                if(result && result.detail && result.detail.location){\r\n                    var point=result.detail.location;\r\n                    self.map.setCenter(point);\r\n                    self.marker.setPosition(point);\r\n                    self.showLocationInfo(point, result);\r\n                }else{\r\n                    alert(\"\");\r\n                }\r\n            },\r\n            error:function(result){\r\n                alert(\"\");\r\n            }\r\n        });\r\n        myGeo.getLocation(address);\r\n    };\r\n\r\n\r\n    function GaodeMap() {\r\n        BaseMap.call(this, \"gaode\");\r\n        this.infoOpts = {\r\n            width: 250,     //\r\n            //   height: 100,     //\r\n            title: \"\"  //\r\n        };\r\n    }\r\n\r\n    GaodeMap.prototype = new BaseMap();\r\n    GaodeMap.prototype.constructor = GaodeMap;\r\n    GaodeMap.prototype.isAPIReady = function () {\r\n        return !!window['AMap']\r\n    };\r\n\r\n    GaodeMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        var map = self.map = new AMap.Map(this.mapbox.attr('id'), {\r\n            resizeEnable: true,\r\n            dragEnable: true,\r\n            zoom: 13\r\n        });\r\n        map.plugin([\"AMap.ToolBar\", \"AMap.Scale\", \"AMap.OverView\"], function () {\r\n            map.addControl(new AMap.ToolBar());\r\n            map.addControl(new AMap.Scale());\r\n            map.addControl(new AMap.OverView());\r\n        });\r\n\r\n        $('[name=txtLang]').unbind().on('change', function () {\r\n            var lang = $(this).val();\r\n            if (lang) map.setLang(lang);\r\n        }).trigger('change');\r\n\r\n\r\n        //\r\n        if(!this.locate)this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.setCenter(point);\r\n\r\n        this.marker = new AMap.Marker({position: point, map: map}); //\r\n        this.marker.setDraggable(true); //\r\n\r\n\r\n        this.infoWindow = new AMap.InfoWindow();\r\n        this.infoWindow.open(map, point);\r\n\r\n        map.plugin([\"AMap.Geocoder\"], function () {\r\n            var gc = new AMap.Geocoder(); //\r\n            //\r\n            self.marker.on(\"dragend\", function (e) {\r\n                //\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            //\r\n            self.marker.on(\"click\", function (e) {\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            gc.getAddress(point, function (st, rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    GaodeMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    GaodeMap.prototype.objectToPoint = function (object) {\r\n        return new AMap.LngLat(object.lng, object.lat);\r\n    };\r\n    GaodeMap.prototype.getCenter = function () {\r\n        var center=this.map.center();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GaodeMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.setInfoContent();\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n    };\r\n\r\n    GaodeMap.prototype.getAddress = function (rs) {\r\n        return rs.regeocode.formattedAddress;\r\n    };\r\n    GaodeMap.prototype.getAddressComponent = function (rs) {\r\n        var comp = rs.regeocode.addressComponent\r\n        return comp;\r\n    };\r\n\r\n    GaodeMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new AMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    window.InitMap=InitMap;\r\n})(window,jQuery);"]}