{"version":3,"sources":["common.js","template.js","datetime.init.js","dialog.js","jquery.tag.js","backend.js","map.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","parseObject","result","JSON","parse","e","console","error","parseArray","Array","strPad","pad","toString","copy_obj","arr","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","callfunc","val","func","args","thisobj","argidx","split","indexOf","concat","apply","html_encode","html","output","temp","undefined","document","createElement","textContent","innerText","innerHTML","html_decode","text","pad_zero","n","c","join","timestamp_date","timestamp","fmt","jsdate","txt_weekdays","txt_ordin","txt_months","f","Date","1","2","3","21","22","23","31","d","j","D","l","substr","getDate","w","N","S","getDay","z","getFullYear","W","L","nd","nd2","round","getTime","F","m","M","getMonth","t","y","Y","slice","getHours","A","toUpperCase","B","off","getTimezoneOffset","theSeconds","getMinutes","getSeconds","beat","String","g","G","h","H","s","O","abs","P","U","replace","iif","v","m1","m2","transOption","option","newopt","Number","prototype","format","fix","this","toFixed","unshift","trim","compile","data","list","temps","push","all","condition","cont","conts","operation","match","part","keys","dialogIdx","format_btn","btn","isdefault","_typeof","type","Dialog","opts","btns","options","extend","id","header","footer","backdrop","tabindex","size","contentClass","onsure","onshow","onshown","onhide","onhidden","btncount","addbtn","splice","addbtns","closed","box","generBtn","opt","idx","getDefaultBtn","show","title","body","append","bodyClass","unbind","find","remove","css","height","overflow","keyboard","self","instance","on","modal","click","hide","close","message","time","success","warning","info","loading","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","buttonText","isPlainObject","iconMap","color","cancel","countdown","btnText","inteval","clearInterval","addClass","setInterval","removeClass","prompt","contentHtml","is_multi","is_textarea","multiset","dftValue","inputHtml","content","multi","default","label","value","sub_is_textarea","sub_type","values","k","map","firstInput","eq","each","prop","select","inputs","input","action","actions","index","pickTree","config","filter","url","call","isajax","idkey","titleKey","titlekey","isMulti","root","pid","initTree","globalSearch","name","pidkey","level","onRow","toList","json","breadTemplate","rowTemplate","selected","picked","contentTpl","breadcrumb","multibox","listbox","lastLoading","updatePicked","item","findItem","loadList","withpid","curLoading","ajax","dataType","code","lists","parents","target","is","tree","pop","findIndex","pickList","current","autoSearch","searchHolder","searchkey","exthtml","extField","lastSearch","isloading","searchList","loadingTime","htmlRow","trigger","clearTimeout","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","titletpl","pickCategory","model","pickLocate","locate","settedLocate","address","mapbox","mapinfo","InitMap","formatted","comp","lng","lat","search","setLocate","showAtCenter","keyCode","currentModal","createTitle","subTitle","jQuery","Zepto","fn","tags","nm","onupdate","tpl","labelgroup","before","updated","vals","tag","focus","tooltips","datetimepickerTooltips","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","datetimeConfig","locale","showClear","showTodayButton","showClose","keepInvalid","daterangeConfig","radio_tab","radios","prefix","curval","editData","datetimepicker","bindData","reload","err","form","FormData","cache","processData","contentType","serialize","getData","isObject","isArray","field","suffix","fields","from","to","minDate","maxDate","mapObj","mapBox","onPick","apis","baidu","google","tencent","gaode","BaseMap","mapkey","mapType","ishide","isshow","toshow","marker","infoWindow","BaiduMap","GoogleMap","infoOpts","width","TencentMap","GaodeMap","isAPIReady","pointToObject","objectToPoint","setMap","showInfo","getCenter","getAddress","rs","getAddressComponent","loadAPI","src","script","apiurl","appendChild","setInfoContent","addr","setTitle","setContent","center","showLocationInfo","pt","addressComponent","constructor","point","gc","BMap","Map","addControl","NavigationControl","ScaleControl","OverviewMapControl","enableScrollWheelZoom","centerAndZoom","Marker","enableDragging","Geocoder","addEventListener","getLocation","addOverlay","InfoWindow","object","Point","parseFloat","panTo","openInfoWindow","addComp","addressComponents","province","city","district","street","streetNumber","myGeo","getPoint","setPosition","maps","zoom","draggable","scaleControl","streetViewControl","zoomControl","position","addListener","getPosition","geocode","LatLng","setOptions","status","formatted_address","comps","address_components","country","long_name","getLng","getLat","qq","align","ALIGN","BOTTOM_LEFT","margin","Size","setAnimation","MarkerAnimation","DOWN","complete","event","open","detail","setCenter","AMap","resizeEnable","dragEnable","plugin","ToolBar","Scale","OverView","setLang","setDraggable","lnglat","st","LngLat","regeocode","formattedAddress","maptype","toLowerCase","loc","stop_ajax","toHtmlEntities","charCodeAt","fromHtmlEntities","fromCharCode","bread","menu","link","parent","topmenu","siblings","ids","checked","preventDefault","letter","needChecks","idchecks","init","hid","openText","closeText","totext","toggleClass","tooltip","beforeSend","request","setRequestHeader","stopPropagation","method","tab","fileInputHander","inputgroup","file","is_img","figure","img","origurl","figcap","files","URL","createObjectURL","isbtn","origText","removeAttr","xhr","ajaxSettings","upload","percent","loaded","total","group","idele","infoele","user","username","mobile"],"mappings":"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","file":"app.min.js","sourcesContent":["function del(obj, msg) {\r\n    dialog.confirm(msg, function () {\r\n        location.href = $(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if (window.language && window.language[key]) {\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '', allLen = charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz, randomPoz + 1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction parseObject(str) {\r\n    try {\r\n        var result = JSON.parse(str)\r\n        if (result) {\r\n            return result\r\n        }\r\n    } catch (e) {\r\n        console.error(e)\r\n    }\r\n    return {};\r\n}\r\n\r\nfunction parseArray(str) {\r\n    try {\r\n        var result = JSON.parse(str)\r\n        if (result instanceof Array) {\r\n            return result\r\n        }\r\n    } catch (e) {\r\n        console.error(e)\r\n    }\r\n    return [];\r\n}\r\n\r\nfunction strPad(str, len, pad) {\r\n    str = str.toString();\r\n    if (str.length >= len) return str;\r\n    return strPad(pad + str, len, pad);\r\n}\r\n\r\nfunction copy_obj(arr) {\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if (!a && !b) return true;\r\n    if (!a || !b) return false;\r\n\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a, b) {\r\n    var obj = {};\r\n    for (var i = 0; i < a.length; i++) {\r\n        if (b.length < i + 1) break;\r\n        obj[a[i]] = b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format = function (fix) {\r\n    if (fix === undefined) fix = 2;\r\n    var num = this.toFixed(fix);\r\n    var z = num.split('.');\r\n    var format = [], f = z[0].split(''), l = f.length;\r\n    for (var i = 0; i < l; i++) {\r\n        if (i > 0 && i % 3 == 0) {\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l - i - 1]);\r\n    }\r\n    return format.join('') + (z.length == 2 ? '.' + z[1] : '');\r\n};\r\nif (!String.prototype.trim) {\r\n    String.prototype.trim = function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g, '');\r\n    }\r\n}\r\nString.prototype.compile = function (data, list) {\r\n\r\n    if (list) {\r\n        var temps = [];\r\n        for (var i in data) {\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    } else {\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*?){\\/if}/g, function (all, condition, cont) {\r\n            var operation;\r\n            var conts = cont.split('{else}');\r\n            if (operation = condition.match(/\\s+(=+|<|>)\\s+/)) {\r\n                operation = operation[0];\r\n                var part = condition.split(operation);\r\n                if (part[0].indexOf('@') === 0) {\r\n                    part[0] = data[part[0].replace('@', '')];\r\n                }\r\n                if (part[1].indexOf('@') === 0) {\r\n                    part[1] = data[part[1].replace('@', '')];\r\n                }\r\n                operation = operation.trim();\r\n                var result = false;\r\n                switch (operation) {\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if (result) {\r\n                    return cont;\r\n                } else if (conts[1]) {\r\n                    return conts[1];\r\n                }\r\n            } else {\r\n                if (data[condition.replace('@', '')]) return conts[0];\r\n                else if (conts[1]) return conts[1];\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g, function (all, m1, func, args) {\r\n\r\n            if (m1.indexOf('.') > 0) {\r\n                var keys = m1.split('.'), val = data;\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    if (val[keys[i]] !== undefined && val[keys[i]] !== null) {\r\n                        val = val[keys[i]];\r\n                    } else {\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val, func, args);\r\n            } else {\r\n                return callfunc(data[m1], func, args, data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if (obj && obj.toString) {\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val, func, args, thisobj) {\r\n    if (!args) {\r\n        args = [val];\r\n    } else {\r\n        if (typeof args === 'string') args = args.split(',');\r\n        var argidx = args.indexOf('###');\r\n        if (argidx >= 0) {\r\n            args[argidx] = val;\r\n        } else {\r\n            args = [val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func] ? window[func].apply(thisobj, args) : ((val === undefined || val === null) ? '' : val);\r\n}\r\n\r\n\r\nfunction html_encode(html) {\r\n    if (!html) return html;\r\n    var temp = document.createElement(\"div\");\r\n    (temp.textContent != undefined) ? (temp.textContent = html) : (temp.innerText = html);\r\n    var output = temp.innerHTML;\r\n    temp = null;\r\n    return output;\r\n}\r\nfunction html_decode(text) {\r\n    if (!text) return text;\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = text;\r\n    var output = temp.innerText || temp.textContent;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\nfunction pad_zero(n, c) {\r\n    if ((n = n + \"\").length < c) {\r\n        return new Array(++c - n.length).join(\"0\") + n;\r\n    } else {\r\n        return n;\r\n    }\r\n}\r\n\r\nfunction timestamp_date(timestamp, fmt) {\r\n    if (!timestamp) return '';\r\n    var jsdate = new Date(timestamp * 1000);\r\n    if (!fmt) fmt = 'Y-m-d H:i:s';\r\n\r\n    var txt_weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    var txt_ordin = {\r\n        1: \"st\",\r\n        2: \"nd\",\r\n        3: \"rd\",\r\n        21: \"st\",\r\n        22: \"nd\",\r\n        23: \"rd\",\r\n        31: \"st\"\r\n    };\r\n    var txt_months = [\"\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    var f = {\r\n        // Day \r\n        d: function () {\r\n            return pad_zero(f.j(), 2)\r\n        },\r\n        D: function () {\r\n            return f.l().substr(0, 3)\r\n        },\r\n        j: function () {\r\n            return jsdate.getDate()\r\n        },\r\n        l: function () {\r\n            return txt_weekdays[f.w()]\r\n        },\r\n        N: function () {\r\n            return f.w() + 1\r\n        },\r\n        S: function () {\r\n            return txt_ordin[f.j()] ? txt_ordin[f.j()] : 'th'\r\n        },\r\n        w: function () {\r\n            return jsdate.getDay()\r\n        },\r\n        z: function () {\r\n            return (jsdate - new Date(jsdate.getFullYear() + \"/1/1\")) / 864e5 >> 0\r\n        },\r\n\r\n        // Week \r\n        W: function () {\r\n            var a = f.z(),\r\n                b = 364 + f.L() - a;\r\n            var nd2, nd = (new Date(jsdate.getFullYear() + \"/1/1\").getDay() || 7) - 1;\r\n            if (b <= 2 && ((jsdate.getDay() || 7) - 1) <= 2 - b) {\r\n                return 1;\r\n            } else {\r\n                if (a <= 2 && nd >= 4 && a >= (6 - nd)) {\r\n                    nd2 = new Date(jsdate.getFullYear() - 1 + \"/12/31\");\r\n                    return timestamp_date(Math.round(nd2.getTime() / 1000), \"W\");\r\n                } else {\r\n                    return (1 + (nd <= 3 ? ((a + nd) / 7) : (a - (7 - nd)) / 7) >> 0);\r\n                }\r\n            }\r\n        },\r\n\r\n        // Month \r\n        F: function () {\r\n            return txt_months[f.n()]\r\n        },\r\n        m: function () {\r\n            return pad_zero(f.n(), 2)\r\n        },\r\n        M: function () {\r\n            return f.F().substr(0, 3)\r\n        },\r\n        n: function () {\r\n            return jsdate.getMonth() + 1\r\n        },\r\n        t: function () {\r\n            var n;\r\n            if ((n = jsdate.getMonth() + 1) == 2) {\r\n                return 28 + f.L();\r\n            } else {\r\n                if (n & 1 && n < 8 || !(n & 1) && n > 7) {\r\n                    return 31;\r\n                } else {\r\n                    return 30;\r\n                }\r\n            }\r\n        },\r\n\r\n        // Year \r\n        L: function () {\r\n            var y = f.Y();\r\n            return (!(y & 3) && (y % 1e2 || !(y % 4e2))) ? 1 : 0\r\n        },\r\n        //o not supported yet \r\n        Y: function () {\r\n            return jsdate.getFullYear()\r\n        },\r\n        y: function () {\r\n            return (jsdate.getFullYear() + \"\").slice(2)\r\n        },\r\n\r\n        // Time \r\n        a: function () {\r\n            return jsdate.getHours() > 11 ? \"pm\" : \"am\"\r\n        },\r\n        A: function () {\r\n            return f.a().toUpperCase()\r\n        },\r\n        B: function () {\r\n            // peter paul koch: \r\n            var off = (jsdate.getTimezoneOffset() + 60) * 60;\r\n            var theSeconds = (jsdate.getHours() * 3600) + (jsdate.getMinutes() * 60) + jsdate.getSeconds() + off;\r\n            var beat = Math.floor(theSeconds / 86.4);\r\n            if (beat > 1000) beat -= 1000;\r\n            if (beat < 0) beat += 1000;\r\n            if ((String(beat)).length == 1) beat = \"00\" + beat;\r\n            if ((String(beat)).length == 2) beat = \"0\" + beat;\r\n            return beat;\r\n        },\r\n        g: function () {\r\n            return jsdate.getHours() % 12 || 12\r\n        },\r\n        G: function () {\r\n            return jsdate.getHours()\r\n        },\r\n        h: function () {\r\n            return pad_zero(f.g(), 2)\r\n        },\r\n        H: function () {\r\n            return pad_zero(jsdate.getHours(), 2)\r\n        },\r\n        i: function () {\r\n            return pad_zero(jsdate.getMinutes(), 2)\r\n        },\r\n        s: function () {\r\n            return pad_zero(jsdate.getSeconds(), 2)\r\n        },\r\n        //u not supported yet \r\n\r\n        // Timezone \r\n        //e not supported yet \r\n        //I not supported yet \r\n        O: function () {\r\n            var t = pad_zero(Math.abs(jsdate.getTimezoneOffset() / 60 * 100), 4);\r\n            if (jsdate.getTimezoneOffset() > 0) t = \"-\" + t;\r\n            else t = \"+\" + t;\r\n            return t;\r\n        },\r\n        P: function () {\r\n            var O = f.O();\r\n            return (O.substr(0, 3) + \":\" + O.substr(3, 2))\r\n        },\r\n        //T not supported yet \r\n        //Z not supported yet \r\n\r\n        // Full Date/Time \r\n        c: function () {\r\n            return f.Y() + \"-\" + f.m() + \"-\" + f.d() + \"T\" + f.h() + \":\" + f.i() + \":\" + f.s() + f.P()\r\n        },\r\n        //r not supported yet \r\n        U: function () {\r\n            return Math.round(jsdate.getTime() / 1000)\r\n        }\r\n    };\r\n\r\n    return fmt.replace(/[\\\\]?([a-zA-Z])/g, function (t, s) {\r\n        var ret = '';\r\n        if (t != s) {\r\n            // escaped \r\n            ret = s;\r\n        } else if (f[s]) {\r\n            // a date function exists \r\n            ret = f[s]();\r\n        } else {\r\n            // nothing special \r\n            ret = s;\r\n        }\r\n        return ret;\r\n    });\r\n}\r\n\r\nfunction iif(v, m1, m2) {\r\n    if (v === '0') v = 0;\r\n    return v ? m1 : m2;\r\n}\r\n\r\nwindow['default'] = function (v, d) {\r\n    return v ? v : d;\r\n};","function transOption(option) {\r\n    if (!option) return {};\r\n    var newopt = {};\r\n    for (var i in option) {\r\n        newopt[i.replace(/(_|-)[a-z]/g, function (d) {\r\n            return d.substring(1).toUpperCase()\r\n        })] = option[i];\r\n    }\r\n    return newopt;\r\n}\r\n\r\nvar tooltips = window.datetimepickerTooltips ? window.datetimepickerTooltips : {\r\n    today: '',\r\n    clear: '',\r\n    close: '',\r\n    selectMonth: '',\r\n    prevMonth: '',\r\n    nextMonth: '',\r\n    selectYear: '',\r\n    prevYear: '',\r\n    nextYear: '',\r\n    selectDecade: '',\r\n    selectTime: '',\r\n    prevDecade: '',\r\n    nextDecade: '',\r\n    prevCentury: '',\r\n    nextCentury: ''\r\n};\r\n\r\nfunction datetimeConfig(input) {\r\n    return $.extend({\r\n        tooltips: tooltips,\r\n        format: 'YYYY-MM-DD',\r\n        locale: 'zh-cn',\r\n        showClear: true,\r\n        showTodayButton: true,\r\n        showClose: true,\r\n        keepInvalid: true\r\n    }, transOption($(input).data()));\r\n}\r\n\r\nfunction daterangeConfig(input) {\r\n    return $.extend({\r\n        tooltips: tooltips,\r\n        format: 'YYYY-MM-DD',\r\n        locale: 'zh-cn',\r\n        showClear: true,\r\n        showTodayButton: true,\r\n        showClose: true,\r\n        keepInvalid: true\r\n    }, transOption($(input).data()));\r\n}\r\n\r\njQuery(function ($) {\r\n\r\n    //\r\n    if ($.fn.datetimepicker) {\r\n        $('.datepicker').each(function () {\r\n            $(this).datetimepicker(datetimeConfig(this));\r\n        });\r\n\r\n        $('.date-range').each(function () {\r\n            var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n            var options = daterangeConfig(this);\r\n            from.datetimepicker(options).on('dp.change', function () {\r\n                if (from.val()) {\r\n                    to.data('DateTimePicker').minDate(from.val());\r\n                }\r\n            });\r\n            to.datetimepicker(options).on('dp.change', function () {\r\n                if (to.val()) {\r\n                    from.data('DateTimePicker').maxDate(to.val());\r\n                }\r\n            });\r\n        });\r\n    }\r\n})","(function (window, $) {\r\n    var dialogTpl = '<div class=\"modal shirne-modal fade\" id=\"{@id}\" {if tabindex}tabindex=\"{@tabindex}\"{/if} role=\"dialog\" aria-labelledby=\"{@id}Label\" >\\n' +\r\n        '    <div class=\"modal-dialog {@size}\">\\n' +\r\n        '        <div class=\"modal-content {@contentClass}\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\">{@title}</h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span>&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body {@bodyClass}\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx = 0;\r\n    function format_btn(btn, isdefault) {\r\n        if (typeof (btn) === typeof 'a') {\r\n            btn = { 'text': btn, 'isdefault': isdefault ? true : false };\r\n        }\r\n        if (btn.isdefault) {\r\n            if (!btn.type) {\r\n                btn.type = 'primary'\r\n            }\r\n        }\r\n        return btn;\r\n    }\r\n    function Dialog(opts) {\r\n        if (!opts) opts = {};\r\n        //\r\n        if (opts.btns) {\r\n            if (typeof (opts.btns) == 'string') {\r\n                opts.btns = [format_btn(opts.btns, true)];\r\n            }\r\n            else if (opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    opts.btns[i] = format_btn(opts.btns[i])\r\n                }\r\n            } else {\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns = [];\r\n            }\r\n        }\r\n\r\n        this.options = $.extend({\r\n            id: 'modal_dialog_' + dialogIdx++,\r\n            header: true,\r\n            footer: true,\r\n            backdrop: true,\r\n            tabindex: -1,\r\n            size: '',\r\n            btns: [\r\n                { 'text': '', 'type': 'secondary' },\r\n                { 'text': '', 'isdefault': true, 'type': 'primary' }\r\n            ],\r\n            contentClass: '',\r\n            onsure: null,\r\n            onshow: null,\r\n            onshown: null,\r\n            onhide: null,\r\n            onhidden: null\r\n        }, opts);\r\n        if (!this.options.btns) this.options.btns = [];\r\n        var btncount = this.options.btns.length;\r\n        if (opts.addbtn) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            opts.addbtn = format_btn(opts.addbtn)\r\n            if (btncount < 1) {\r\n                this.options.btns.unshift(opts.addbtn)\r\n            } else {\r\n                this.options.btns.splice(btncount - 1, 0, opts.addbtn)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (opts.addbtns) {\r\n            if (!this.options.btns) this.options.btns = [];\r\n            if (btncount < 1) {\r\n                this.options.btns = opts.addbtns\r\n            } else {\r\n                var args = [btncount - 1, 0]\r\n                for (var i = 0; i < opts.addbtns.length; i++) {\r\n                    args.push(format_btn(opts.addbtns[i]))\r\n                }\r\n                this.options.btns.splice.apply(this.options.btns, args)\r\n            }\r\n            btncount = 1\r\n        }\r\n        if (btncount < 1) {\r\n            this.options.footer = false;\r\n        }\r\n\r\n        this.closed = true;\r\n        this.box = $(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn = function (opt, idx) {\r\n        if (opt['type']) opt['class'] = 'btn-outline-' + opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn ' + (opt['class'] ? opt['class'] : 'btn-outline-secondary') + '\" ' + (opt.isdefault ? 'default' : '') + ' data-index=\"' + idx + '\">' + opt.text + '</a>';\r\n    };\r\n    Dialog.prototype.getDefaultBtn = function () {\r\n        var btn = null\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btn = this.options.btns[i]\r\n            if (btn.isdefault) break;\r\n        }\r\n        return btn\r\n    }\r\n    Dialog.prototype.show = function (html, title) {\r\n        this.box = $('#' + this.options.id);\r\n        if (!title) title = '';\r\n\r\n        if (this.box.length < 1) {\r\n            $(document.body).append(dialogTpl.compile({\r\n                id: this.options.id,\r\n                bodyClass: this.options.bodyClass,\r\n                contentClass: this.options.contentClass,\r\n                tabindex: this.options.tabindex,\r\n                size: this.options.size ? ('modal-' + this.options.size) : '',\r\n                title: title\r\n            }));\r\n            this.box = $('#' + this.options.id);\r\n        } else {\r\n            this.box.unbind();\r\n            this.box.find('.modal-title').text(title);\r\n        }\r\n        if (!this.options.header) {\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if (!this.options.footer) {\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if (this.options.backdrop !== true) {\r\n            this.box.data('backdrop', this.options.backdrop);\r\n\r\n            //\r\n            if (this.options.backdrop === false) {\r\n                this.box.css({ 'height': 0, 'overflow': 'visible' });\r\n            }\r\n        }\r\n        if (!this.options.keyboard) {\r\n            this.box.data('keyboard', false);\r\n        }\r\n\r\n        var self = this;\r\n        Dialog.instance = self;\r\n\r\n        //\r\n        var btns = [];\r\n        for (var i = 0; i < this.options.btns.length; i++) {\r\n            btns.push(this.generBtn(this.options.btns[i], i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var body = this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal', function () {\r\n            if (self.options.onhide) {\r\n                self.options.onhide(body, self.box);\r\n            }\r\n            Dialog.instance = null;\r\n        });\r\n        this.box.on('hidden.bs.modal', function () {\r\n            if (self.options.onhidden) {\r\n                self.options.onhidden(body, self.box);\r\n            }\r\n            self.closed = true;\r\n            self.box.remove();\r\n            self.box = null;\r\n        });\r\n        this.box.on('show.bs.modal', function () {\r\n            if (self.options.onshow) {\r\n                self.options.onshow(body, self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal', function () {\r\n            if (self.box && self.closed) {\r\n                return self.box.modal('hide');\r\n            }\r\n            if (self.options.onshown) {\r\n                self.options.onshown(body, self.box);\r\n            }\r\n        });\r\n        if (this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                } else {\r\n                    if (self.options.btns[idx].isdefault) {\r\n                        if (self.options.onsure) {\r\n                            result = self.options.onsure.apply(this, [body, self.box]);\r\n                        }\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed = false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide = Dialog.prototype.close = function () {\r\n        if (this.box && !this.closed) {\r\n            this.closed = true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog = {\r\n        error: function (message, time) {\r\n            return this.message(message, 'error', time);\r\n        },\r\n        success: function (message, time) {\r\n            return this.message(message, 'success', time);\r\n        },\r\n        warning: function (message, time) {\r\n            return this.message(message, 'warning', time);\r\n        },\r\n        info: function (message, time) {\r\n            return this.message(message, 'info', time);\r\n        },\r\n        loading: function (message, time) {\r\n            return this.message(message ? message : '...', 'loading', time);\r\n        },\r\n        message: function (message, type, time) {\r\n            var cssClass = 'bg-info text-white';\r\n            var icon = 'information-circle';\r\n            if (type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon = 'close-circle';\r\n                        cssClass = 'bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon = 'warning';\r\n                        cssClass = 'bg-warning text-white';\r\n                        break;\r\n                    case 'loading':\r\n                        icon = '<div class=\"spinner-border text-light\" role=\"status\">\\n' +\r\n                            '  <span class=\"sr-only\">Loading...</span>\\n' +\r\n                            '</div>';\r\n                        cssClass = 'bg-info text-white';\r\n                        if (!time) time = 10;\r\n                        break;\r\n                    case 'success':\r\n                        icon = 'checkmark-circle';\r\n                        cssClass = 'bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            if (type != 'loading') icon = '<i class=\"ion-md-' + icon + '\"></i>';\r\n            var html = '<div class=\"dialog-message\" >' + icon + '&nbsp;&nbsp;<span class=\"message-text\">' + message + '</span>' + (type == 'loading' ? '' : '<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a>') + '</div>';\r\n\r\n            var dlg = new Dialog({\r\n                footer: false,\r\n                header: false,\r\n                backdrop: false,\r\n                tabindex: '',\r\n                size: 'sm',\r\n                contentClass: cssClass,\r\n                onshow: function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html, '');\r\n            if (!time) time = 2;\r\n            if (time > 0) setTimeout(function () { dlg.close(); }, time * 1000);\r\n            return dlg;\r\n        },\r\n        alert: function (message, callback, icon) {\r\n            var called = false;\r\n            var iscallback = typeof callback == 'function';\r\n            var title = '';\r\n            var size = 'sm';\r\n            var html = '';\r\n            var buttonText = ''\r\n            if (callback !== undefined && !iscallback) {\r\n                icon = callback;\r\n            }\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['buttonText'] !== undefined) {\r\n                    buttonText = message['buttonText'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message = message['content'];\r\n            }\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon == 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            if (icon) {\r\n                html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                    message: message\r\n                }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            } else {\r\n                html = message;\r\n            }\r\n            return new Dialog({\r\n                btns: buttonText,\r\n                size: size,\r\n                header: title ? true : false,\r\n                onsure: function () {\r\n                    if (iscallback) {\r\n                        called = true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (!called && iscallback) {\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n        },\r\n        confirm: function (message, confirm, cancel, icon, countdown) {\r\n            var called = false;\r\n            if (typeof confirm !== 'function') {\r\n                icon = confirm;\r\n                if (typeof cancel === 'function') {\r\n                    confirm = cancel;\r\n                    cancel = null;\r\n                } else {\r\n                    countdown = cancel;\r\n                }\r\n            } else if (typeof cancel !== 'function') {\r\n                countdown = icon;\r\n                icon = cancel;\r\n            }\r\n            if (typeof icon === 'number') {\r\n                countdown = icon;\r\n                icon = undefined;\r\n            }\r\n\r\n            var onshown = null;\r\n            var title = '';\r\n            var size = 'sm';\r\n            var btns = [\r\n                { 'text': '', 'type': 'secondary' },\r\n                { 'text': '', 'isdefault': true, 'type': 'primary' }\r\n            ];\r\n            if ($.isPlainObject(message)) {\r\n                if (message['title']) {\r\n                    title = message['title'];\r\n                }\r\n                if (message['size'] !== undefined) {\r\n                    size = message['size'];\r\n                }\r\n                if (message['btns'] !== undefined) {\r\n                    btns = message['btns'];\r\n                }\r\n                if (message['content'] === undefined) {\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                if (message['onshown'] !== undefined) {\r\n                    onshown = message['onshown'];\r\n                }\r\n                if (message['cancel_text']) {\r\n                    btns[0].text = message['cancel_text'];\r\n                }\r\n                if (message['confirm_text']) {\r\n                    btns[1].text = message['confirm_text'];\r\n                }\r\n                message = message['content'];\r\n            }\r\n\r\n            var iconMap = {\r\n                success: 'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning: 'alert',\r\n                error: 'remove-circle'\r\n            };\r\n            var color = 'primary';\r\n            if (icon === undefined) icon = 'information-circle';\r\n            else if (iconMap[icon]) {\r\n                color = icon === 'error' ? 'danger' : icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            var html = icon == 'none' ? '<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                message: message\r\n            }) : '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message: message,\r\n                icon: icon,\r\n                color: color\r\n            });\r\n\r\n            var inteval = 0;\r\n\r\n            var dlg = new Dialog({\r\n                header: title ? true : false,\r\n                size: size,\r\n                backdrop: 'static',\r\n                onshown: onshown,\r\n                btns: btns,\r\n                onsure: function () {\r\n                    if (confirm && typeof confirm === 'function') {\r\n                        called = true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    clearInterval(inteval);\r\n                    if (called === false && typeof cancel === 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n\r\n            if (countdown && typeof countdown === 'number') {\r\n                var btn = dlg.box.find('.modal-footer .btn-outline-primary');\r\n                var btnText = dlg.getDefaultBtn().text;\r\n                btn.addClass('disabled').text(btnText + '(' + countdown + ')');\r\n                inteval = setInterval(function () {\r\n                    countdown--;\r\n                    if (countdown > 0) {\r\n                        btn.text(btnText + '(' + countdown + ')');\r\n                    } else {\r\n                        btn.text(btnText);\r\n                        btn.removeClass('disabled');\r\n                        clearInterval(inteval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n            return dlg;\r\n        },\r\n        prompt: function (message, callback, cancel) {\r\n            var called = false;\r\n            var contentHtml = '<div class=\"form-group\">{@input}</div>';\r\n            var title = '';\r\n            var is_multi = false;\r\n            var is_textarea = false;\r\n            var multiset = {};\r\n            var keyboard = true;\r\n            var dftValue = '';\r\n            if (typeof message == 'string') {\r\n                title = message;\r\n            } else {\r\n                title = message.title;\r\n                if (message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n                if (message.multi) {\r\n                    is_multi = true;\r\n                    multiset = message.multi;\r\n                }\r\n                if (message.is_textarea) {\r\n                    is_textarea = true;\r\n                }\r\n                if (message.keyboard !== undefined) {\r\n                    keyboard = message.keyboard;\r\n                } else if (is_textarea) {\r\n                    keyboard = false;\r\n                }\r\n                if (message.default) {\r\n                    dftValue = is_multi ? message.default : message.default.toString();\r\n                }\r\n            }\r\n            var inputHtml = '<input type=\"text\" name=\"confirm_input\" class=\"form-control prompt-control\" />';\r\n            if (is_textarea) {\r\n                inputHtml = '<textarea name=\"confirm_input\" class=\"form-control prompt-control\" ></textarea>';\r\n            }\r\n            if (is_multi) {\r\n                inputHtml = '';\r\n                for (var i in multiset) {\r\n                    var label = multiset[i], value = '', sub_is_textarea = false, sub_type = '', values = [];\r\n                    if (typeof label === 'object') {\r\n                        value = label.value ? label.value : ''\r\n                        sub_is_textarea = label.is_textarea ? label.is_textarea : is_textarea;\r\n                        sub_type = label.type\r\n                        if (label.values) {\r\n                            for (var k in label.values) {\r\n                                values.push({\r\n                                    value: k,\r\n                                    label: label.values[k]\r\n                                })\r\n                            }\r\n                        }\r\n                        label = label.label ? label.label : (label.title ? label.title : i)\r\n\r\n                    }\r\n\r\n                    if (sub_is_textarea) {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><textarea name=\"' + i + '\" class=\"form-control prompt-control\" >' + value + '</textarea></div>';\r\n                    } else if (sub_type == 'radio') {\r\n                        inputHtml += '<div class=\"form-group mt-2\"><label class=\"form-label mr-3\">' + label + '</label>' + values.map(function (v) {\r\n                            return '<div class=\"form-check form-check-inline\">' +\r\n                                '  <input class=\"form-check-input prompt-control\" type=\"radio\" name=\"' + i + '\" id=\"prompt-radio-' + i + '-' + v.value + '\" value=\"' + v.value + '\">' +\r\n                                '  <label class=\"form-check-label\" for=\"prompt-radio-' + i + '-' + v.value + '\">' + v.label + '</label>' +\r\n                                '</div>'\r\n                        }).join('') + '</div>';\r\n                    } else if (sub_type == 'checkbox') {\r\n                        inputHtml += '<div class=\"form-group mt-2\"><label class=\"form-label\">' + label + '</label>' + values.map(function (v) {\r\n                            return '<div class=\"form-check form-check-inline\">' +\r\n                                '  <input class=\"form-check-input prompt-control\" type=\"checkbox\" name=\"' + i + '\" id=\"prompt-checkbox-' + i + '-' + v.value + '\" value=\"' + v.value + '\">' +\r\n                                '  <label class=\"form-check-label\" for=\"prompt-checkbox-' + i + '-' + v.value + '\">' + v.label + '</label>' +\r\n                                '</div>'\r\n                        }).join('') + '</div>';\r\n                    } else if (sub_type == 'select') {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><select class=\"form-control prompt-control\" name=\"' + i + '\">' + values.map(function (v) {\r\n                            return '<option value=\"' + v.value + '\">' + v.label + '</option>'\r\n                        }).join('') + '</select></div>';\r\n                    } else {\r\n                        inputHtml += '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">' + label + '</span></div><input type=\"text\"  name=\"' + i + '\" value=\"' + value + '\" class=\"form-control prompt-control\" /></div>';\r\n                    }\r\n                }\r\n            }\r\n            return new Dialog({\r\n                backdrop: 'static',\r\n                keyboard: keyboard,\r\n                onshow: function (body) {\r\n                    if (message && message.onshow) {\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                onshown: function (body) {\r\n                    var firstInput = body.find('.prompt-control').eq(0);\r\n                    if (dftValue) {\r\n                        if (typeof dftValue === 'object') {\r\n                            for (var i in dftValue) {\r\n                                var f = body.find('[name=' + i + ']')\r\n                                if (f.attr('type') == 'radio') {\r\n                                    f.each(function () {\r\n                                        if ($(this).val() == dftValue[i]) {\r\n                                            $(this).prop('checked', true)\r\n                                        }\r\n                                    })\r\n                                } else {\r\n                                    f.val(dftValue[i]);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            firstInput.val(dftValue);\r\n                        }\r\n                    }\r\n                    firstInput.select();\r\n                    if (message && message.onshown) {\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                onsure: function (body) {\r\n                    var inputs = body.find('.prompt-control'), val = inputs.val();\r\n                    if (is_multi) {\r\n                        val = {};\r\n                        inputs.each(function () {\r\n                            var key = $(this).attr('name')\r\n                            if ($(this).attr('type') == 'radio') {\r\n                                if ($(this).prop('checked')) {\r\n                                    val[key] = $(this).val()\r\n                                }\r\n                            } else if ($(this).attr('type') == 'checkbox') {\r\n                                if (!val[key]) val[key] = []\r\n                                if ($(this).prop('checked')) {\r\n                                    val[key].push($(this).val())\r\n                                }\r\n                            } else {\r\n                                val[key] = $(this).val()\r\n                            }\r\n                        })\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(val, body);\r\n                        if (result === true) {\r\n                            called = true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                onhide: function () {\r\n                    if (called == false && typeof cancel == 'function') {\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({ input: inputHtml }), title);\r\n        },\r\n        action: function (list, callback, title) {\r\n            var html = '<div class=\"list-group\"  style=\"max-height: 70vh;overflow: auto;\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">' + list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">') + '</a></div>';\r\n            var actions = null;\r\n            var dlg = new Dialog({\r\n                bodyClass: 'modal-action',\r\n                backdrop: 'static',\r\n                size: 'sm',\r\n                btns: [\r\n                    { 'text': '', 'type': 'secondary' }\r\n                ],\r\n                onshow: function (body) {\r\n                    actions = body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val = actions.index(this);\r\n                        if (typeof callback == 'function') {\r\n                            if (callback(val) !== false) {\r\n                                dlg.close();\r\n                            }\r\n                        } else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                onsure: function (body) {\r\n                    return true;\r\n                },\r\n                onhide: function () {\r\n                    return true;\r\n                }\r\n            }).show(html, title ? title : '');\r\n        },\r\n        pickTree: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            var idkey = config && config.idkey ? config.idkey : 'id'\r\n            var titleKey = config && config.titlekey ? config.titlekey : 'title'\r\n            var isMulti = config && config.isMulti\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                initTree: '',\r\n                isMulti: false,\r\n                globalSearch: false,\r\n                list: [],\r\n                name: '',\r\n                idkey: idkey,\r\n                pidkey: 'pid',\r\n                titlekey: titleKey,\r\n                level: 3,\r\n                onRow: null,\r\n                toList: function (json) {\r\n                    return json.data;\r\n                },\r\n                breadTemplate: '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"{@' + idkey + '}\">{@' + titleKey + '}</a></li>',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@' + idkey + '}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\"><span class=\"item-name\">' + icon + '[{@' + idkey + '}]&nbsp;{if @tree_names}{@tree_names}{else}{@' + titleKey + '}{/if}</span>' + (isMulti ? '<i class=\"ion-md-add add\"></i>' : '') + '</a>'\r\n            }, config || {});\r\n            var root = { id: 0, pid: -1, title: config.name }\r\n            var selected = [root]\r\n            var picked = config.selected ? config.selected : []\r\n            if (!filter) filter = {};\r\n\r\n            var title = '' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                contentTpl = '<nav aria-label=\"breadcrumb\"><ol class=\"breadcrumb\"><li class=\"breadcrumb-item active\" aria-current=\"page\"><a href=\"javascript:\" data-id=\"0\">' + config.name + '</a></li></ol></nav>' + contentTpl;\r\n            }\r\n            if (isMulti) {\r\n                contentTpl = '<div class=\"multi-box\"></div>' + contentTpl\r\n            }\r\n            if (config.globalSearch) {\r\n                contentTpl = '<div class=\"input-group search-box mb-2\"><input type=\"text\" class=\"form-control\" /><div class=\"input-group-append\"><button class=\"btn btn-outline-secondary search-btn\" type=\"button\" ><i class=\"ion-md-search\"></i></button></div></div>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var breadcrumb = body.find('.breadcrumb');\r\n                    var multibox = body.find('.multi-box');\r\n                    var listbox = body.find('.list-group');\r\n                    var lastLoading = 0;\r\n\r\n                    function updatePicked() {\r\n                        if (!isMulti) return\r\n                        multibox.html(picked.map(function (item, idx) {\r\n                            return '<span class=\"badge badge-secondary\" data-idx=\"' + idx + '\">' + item[config.titlekey] + '<a href=\"javascript:\" class=\"close\" aria-label=\"\">&times;</a></span>';\r\n                        }).join(''));\r\n                    }\r\n\r\n                    body.find('.search-btn').click(function () {\r\n                        var keyinput = body.find('.search-box input[type=text]')\r\n                        var key = keyinput.val()\r\n                        if (key) {\r\n                            filter = {\r\n                                key: key,\r\n                                pid: -1\r\n                            }\r\n                            loadList(false);\r\n                        } else {\r\n                            filter = {}\r\n                            loadList();\r\n                        }\r\n                    })\r\n                    function findItem(id) {\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                return config.list[i]\r\n                            }\r\n                        }\r\n                        return null\r\n                    }\r\n                    if (isMulti) {\r\n                        multibox.on('click', '.badge .close', function () {\r\n                            var idx = $(this).parents('.badge').data('idx')\r\n                            picked.splice(idx, 1)\r\n                            updatePicked()\r\n                        })\r\n                        listbox.on('click', '.list-group-item .add', function (e) {\r\n                            var row = $(this).parents('.list-group-item').eq(0)\r\n                            var item = findItem(row.data('id'))\r\n                            if (item) {\r\n                                picked.push(item)\r\n                                updatePicked()\r\n                            }\r\n                        })\r\n                    }\r\n                    listbox.on('click', '.list-group-item', function () {\r\n                        if ($(e.target).is('.add')) return;\r\n                        var id = $(this).data('id');\r\n\r\n                        var item = findItem(id)\r\n                        if (item) {\r\n                            listbox.find('a.list-group-item').removeClass('active');\r\n                            $(this).addClass('active');\r\n                            if (item.tree) {\r\n                                selected = item.tree\r\n                                selected.unshift(root)\r\n                            } else {\r\n                                if (item.pid == selected[selected.length - 1].pid) {\r\n                                    selected.pop()\r\n                                }\r\n                                selected.push(item)\r\n                            }\r\n\r\n                            if (selected.length <= config.level) {\r\n                                dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', true)\r\n                            } else {\r\n                                dlg.box.find('.modal-footer .btn-outline-primary').prop('disabled', false)\r\n                            }\r\n                            breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                            loadList()\r\n                        }\r\n\r\n                    });\r\n                    breadcrumb.on('click', '.breadcrumb-item a', function () {\r\n                        var id = $(this).data('id')\r\n                        var index = selected.findIndex((v) => v.id == id)\r\n                        if (index > -1) {\r\n                            selected = selected.slice(0, index + 1)\r\n                            breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                            loadList()\r\n                        }\r\n                    })\r\n\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n\r\n                    function loadList(withpid) {\r\n                        var curLoading = new Date().getTime()\r\n                        lastLoading = curLoading;\r\n                        //listbox.html('<span class=\"list-loading\">...</span>');\r\n                        if (withpid !== false) filter['pid'] = selected[selected.length - 1][config.idkey];\r\n\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    if (curLoading != lastLoading) return;\r\n                                    if (json.code === 1) {\r\n                                        var lists = config.toList(json);\r\n                                        if (lists && lists.length) {\r\n                                            config.list = lists\r\n                                            listbox.html(config.rowTemplate.compile(lists, true));\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> </span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    if (config.initTree) {\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: {\r\n                                    tree: config.initTree\r\n                                },\r\n                                success: function (json) {\r\n                                    if (json.code === 1 && json.data && json.data.length) {\r\n                                        selected = json.data\r\n                                        selected.unshift(root)\r\n                                        breadcrumb.html(config.breadTemplate.compile(selected, true));\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> </span>');\r\n                                    }\r\n                                    loadList();\r\n                                }\r\n                            }\r\n                        );\r\n                    } else {\r\n                        loadList();\r\n                    }\r\n                },\r\n                onsure: function (body) {\r\n                    if (config.isMulti) {\r\n                        if (picked.length < 1) {\r\n                            dialog.warning('' + config.name + '!');\r\n                            return false;\r\n                        }\r\n                        if (typeof callback == 'function') {\r\n                            var result = callback(picked);\r\n                            return result;\r\n                        }\r\n                    } else {\r\n                        if (selected.length < config.level) {\r\n                            dialog.warning('' + config.name + '!');\r\n                            return false;\r\n                        }\r\n                        if (typeof callback == 'function') {\r\n                            var result = callback(selected.slice(1));\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickList: function (config, callback, filter) {\r\n            if (typeof config === 'string') config = { url: config };\r\n            if (Object.prototype.toString.call(config) == '[object Array]') {\r\n                config = {\r\n                    isajax: false,\r\n                    list: config\r\n                };\r\n            }\r\n            var icon = config.icon ? '<i class=\"ion-md-checkmark\"></i> ' : ''\r\n            config = $.extend({\r\n                url: '',\r\n                title: '',\r\n                isajax: true,\r\n                autoSearch: true,\r\n                list: [],\r\n                name: '',\r\n                searchHolder: '',\r\n                idkey: 'id',\r\n                titlekey: 'title',\r\n                searchkey: 'key',\r\n                onRow: null,\r\n                extend: null,\r\n                toList: function (json) {\r\n                    if (json.data instanceof Array) {\r\n                        return json.data;\r\n                    }\r\n                    if (json.data.lists) {\r\n                        return json.data.lists\r\n                    }\r\n                    return [];\r\n                },\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">' + icon + '[{@id}]&nbsp;{@title}</a>'\r\n            }, config || {});\r\n            var current = null;\r\n            var exthtml = '';\r\n            if (config.extend) {\r\n                exthtml = '<select name=\"' + config.extend.name + '\" class=\"form-control\"><option value=\"\">' + config.extend.title + '</option></select>';\r\n            }\r\n            if (!filter) filter = {};\r\n\r\n            var title = '' + config.name;\r\n            var contentTpl = '<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if (config.isajax) {\r\n                title = '' + config.name;\r\n                contentTpl = '<div class=\"input-group\">' + exthtml + '<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"' + config.searchHolder + '\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' + contentTpl;\r\n            }\r\n            if (!config.title) config.title = title;\r\n\r\n            var dlg = new Dialog({\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var listbox = body.find('.list-group');\r\n                    var isloading = false;\r\n                    listbox.on('click', 'a.list-group-item', function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if (config.list[i][config.idkey] == id) {\r\n                                current = config.list[i];\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    if (!config.isajax) {\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n                    var extField = null;\r\n                    if (config.extend) {\r\n                        extField = body.find('[name=' + config.extend.name + ']');\r\n                        if (config.extend.list) {\r\n                            extField.append(config.extend.htmlRow.compile(config.extend.list, true));\r\n                        } else {\r\n                            $.ajax({\r\n                                url: config.extend.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                success: function (json) {\r\n                                    if (json.data instanceof Array) {\r\n                                        extField.append(config.extend.htmlRow.compile(json.data, true));\r\n                                    } else if (json.data.lists) {\r\n                                        extField.append(config.extend.htmlRow.compile(json.data.lists, true));\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    var lastSearch = 0;\r\n                    function searchList() {\r\n                        var loadingTime = new Date().getTime();\r\n                        lastSearch = loadingTime;\r\n                        filter[config.searchkey] = input.val();\r\n                        if (config.extend) {\r\n                            filter[config.extend.name] = extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url: config.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                data: filter,\r\n                                success: function (json) {\r\n                                    if (loadingTime != lastSearch) return;\r\n                                    isloading = false;\r\n                                    if (json.code === 1) {\r\n                                        config.list = config.toList(json);\r\n                                        if (config.list && config.list.length) {\r\n                                            listbox.html(config.rowTemplate.compile(config.list, true));\r\n                                        } else {\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> ' + config.name + '</span>');\r\n                                        }\r\n                                    } else {\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> </span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    btn.click(function () {\r\n                        if (isloading) return;\r\n                        isloading = true;\r\n                        listbox.html('<span class=\"list-loading\">...</span>');\r\n\r\n                        searchList();\r\n                    }).trigger('click');\r\n\r\n                    if (config.autoSearch) {\r\n                        var t = 0;\r\n                        input.on('input', function () {\r\n                            clearTimeout(t)\r\n                            t = setTimeout(function () {\r\n                                searchList();\r\n                            }, 500);\r\n                        })\r\n                    }\r\n                },\r\n                onsure: function (body) {\r\n                    if (!current) {\r\n                        dialog.warning('' + config.name + '!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback == 'function') {\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl, config.title);\r\n            return dlg;\r\n        },\r\n        pickUser: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('member'),\r\n                title: title,\r\n                name: '',\r\n                searchHolder: 'id',\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">{if @avatar}<img src=\"{@avatar}\" style=\"width:30px;height:30px;border-radius: 100%;margin-right:10px;\" />{else}<i class=\"ion-md-person\"></i>{/if} <div class=\"flex-info\"><div>[{@id}]&nbsp;{if @nickname}{@nickname}{else}{@username}{/if}&nbsp;&nbsp;&nbsp;{if @mobile}<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small>{/if}</div><div>{if @level}<small><i class=\"ion-md-people\"></i> {@level.level_name}</small>{/if}&nbsp;{if @agent}<small><i class=\"ion-md-ribbon\"></i> {@agent.name}</small>{/if}</div></div></a>'\r\n            }, callback, filter);\r\n        },\r\n        pickArticle: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url: window.get_search_url('article'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                title: title,\r\n                name: '',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '',\r\n                    url: get_cate_url('article'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': ''\r\n            }, callback, filter);\r\n        },\r\n        pickProduct: function (callback, title, filter) {\r\n            if (typeof title == 'object' && !filter) {\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            var issku = filter && filter['searchtype'];\r\n            var titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}{if @max_price>@min_price}~{@max_price}{/if}</div>';\r\n            if (issku) titletpl = '<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />[{@sku_goods_no}]&nbsp;{@price}</div>';\r\n            return this.pickList({\r\n                url: window.get_search_url('product'),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}' + titletpl + '</a>',\r\n                title: title,\r\n                name: '',\r\n                idkey: 'id',\r\n                extend: {\r\n                    name: 'cate',\r\n                    title: '',\r\n                    url: get_cate_url('product'),\r\n                    htmlRow: '<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder': ''\r\n            }, callback, filter);\r\n        },\r\n        pickCategory: function (callback, model, title) {\r\n            return this.pickList({\r\n                title: title,\r\n                url: window.get_cate_url(model),\r\n                rowTemplate: '<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action pt-0 pb-0\" style=\"line-height:30px;\">{@html}&nbsp;[{@id}]&nbsp;{@title}</a>'\r\n            }, callback);\r\n        },\r\n        pickLocate: function (type, callback, locate) {\r\n            var settedLocate = null;\r\n            var address = null;\r\n            var height = $(window).height() * 0.6;\r\n            if (!type) type = 'tencent';\r\n            var dlg = new Dialog({\r\n                size: 'lg',\r\n                backdrop: 'static',\r\n                onshown: function (body) {\r\n                    var btn = body.find('.searchbtn');\r\n                    var input = body.find('.searchtext');\r\n                    var mapbox = body.find('.map');\r\n                    var mapinfo = body.find('.mapinfo');\r\n                    var isloading = false;\r\n                    setTimeout(function () {\r\n                        var map = InitMap(type, mapbox, function (formatted, locate, comp) {\r\n                            mapinfo.html(formatted + '&nbsp;' + locate.lng + ',' + locate.lat);\r\n                            settedLocate = locate;\r\n                            address = comp;\r\n                        }, locate);\r\n                        btn.click(function () {\r\n                            var search = input.val();\r\n                            map.setLocate(search);\r\n                        });\r\n                        body.find('.setToCenter').click(function (e) {\r\n                            map.showAtCenter();\r\n                        })\r\n                    }, 500)\r\n\r\n                },\r\n                onsure: function (body) {\r\n                    if (!settedLocate) {\r\n                        dialog.warning('!');\r\n                        return false;\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        var result = callback(settedLocate, address);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\" style=\"height:' + height + 'px\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\"></a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\"></div>', '');\r\n            return dlg;\r\n        }\r\n    };\r\n\r\n    $(document).on('keydown', function (e) {\r\n        if (e.keyCode == 13) {\r\n            var currentModal = $('.shirne-modal').eq(-1);\r\n            if (currentModal && currentModal.data('keyboard') !== false) {\r\n                currentModal.find('.modal-footer .btn[default]').trigger('click');\r\n            }\r\n        }\r\n    });\r\n\r\n    // \r\n    window.Dialog = $.Dialog = Dialog;\r\n    window.dialog = $.dialog = dialog;\r\n\r\n    window.createTitle = function (title, subTitle) {\r\n        return '<div class=\"main-title\">' + title + '</div><div class=\"sub-title\">' + subTitle + '</div>';\r\n    }\r\n})(window, jQuery || Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn, {\r\n    tags: function (nm, onupdate) {\r\n        var data = [];\r\n        var tpl = '<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"' + nm + '\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item = $(this).parents('.form-control');\r\n        var labelgroup = $('<span class=\"badge-group\"></span>');\r\n        var input = this;\r\n        this.before(labelgroup);\r\n        this.on('keyup', function () {\r\n            var val = $(this).val().replace(//g, ',');\r\n            var updated = false;\r\n            if (val && val.indexOf(',') > -1) {\r\n                var vals = val.split(',');\r\n                for (var i = 0; i < vals.length; i++) {\r\n                    vals[i] = vals[i].replace(/^\\s|\\s$/g, '');\r\n                    if (vals[i] && data.indexOf(vals[i]) === -1) {\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({ label: vals[i] }));\r\n                        updated = true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if (updated && onupdate) onupdate(data);\r\n            }\r\n        }).on('blur', function () {\r\n            var val = $(this).val();\r\n            if (val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click', '.close', function () {\r\n            var tag = $(this).parents('.badge').find('input').val();\r\n            var id = data.indexOf(tag);\r\n            if (id) data.splice(id, 1);\r\n            $(this).parents('.badge').remove();\r\n            if (onupdate) onupdate(data);\r\n        });\r\n        item.click(function () {\r\n            input.focus();\r\n        });\r\n    }\r\n});","window.stop_ajax = false;\r\n\r\nfunction radio_tab(radios, lists, prefix) {\r\n    $(radios).on('change', function (e) {\r\n        if (!$(this).is(':checked')) return;\r\n        var curval = $(this).val();\r\n        $(lists).hide();\r\n        $('.' + prefix + curval).show();\r\n    }).filter(':checked').trigger('change');\r\n}\r\n\r\n// \r\nfunction editData(id, url, tpl, name) {\r\n    var dlg = new Dialog({\r\n        onshown: function (body) {\r\n            if ($.fn.datetimepicker) {\r\n                body.find('.datepicker').each(function () {\r\n                    $(this).datetimepicker({ format: 'YYYY-MM-DD' })\r\n                })\r\n            }\r\n            if (id > 0) {\r\n                $.ajax({\r\n                    url: url + '?id=' + id,\r\n                    dataType: 'JSON',\r\n                    type: 'GET',\r\n                    success: function (json) {\r\n                        //console.log(json);\r\n                        if (json.code == 1) {\r\n                            bindData(body, json.data.model);\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        onsure: function (body) {\r\n            var options = {\r\n                url: url,\r\n                type: 'POST',\r\n                dataType: 'JSON',\r\n                success: function (json) {\r\n                    //console.log(json);\r\n                    dialog.alert(json.msg);\r\n                    if (json.code == 1) {\r\n                        location.reload();\r\n                        dlg.close();\r\n                    }\r\n                },\r\n                error: function (err) {\r\n                    dialog.error(err.toString())\r\n                }\r\n            }\r\n            var form = body.find('form')\r\n            if (form.length > 0) {\r\n                if (form.attr('enctype') == 'multipart/form-data') {\r\n                    options.data = new FormData(form[0])\r\n                    options.cache = false;\r\n                    options.processData = false;\r\n                    options.contentType = false;\r\n                } else {\r\n                    options.data = $(form).serialize()\r\n                }\r\n            } else {\r\n                options.data = getData(body)\r\n            }\r\n            $.ajax(options);\r\n            return false;\r\n        }\r\n    }).show(tpl, (id > 0 ? '' : '') + name);\r\n}\r\n\r\nString.prototype.toHtmlEntities = function () {\r\n    return this.replace(/./gm, function (s) {\r\n        // return \"&#\" + s.charCodeAt(0) + \";\";\r\n        return (s.match(/[a-z0-9\\s]+/i)) ? s : '&#' + s.charCodeAt(0) + ';';\r\n    });\r\n};\r\n\r\nString.prototype.fromHtmlEntities = function () {\r\n    return this.replace(/&#\\d+;/gm, function (s) {\r\n        return String.fromCharCode(s.match(/\\d+/gm)[0]);\r\n    })\r\n};\r\n\r\nfunction isObject(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Object]'\r\n}\r\n\r\n\r\nfunction isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Array]'\r\n}\r\n\r\n//\r\nfunction bindData(body, data) {\r\n    for (var i in data) {\r\n        if (isObject(data[i])) {\r\n            for (var k in data[i]) {\r\n                var field = body.find('[name=\"' + i + '[' + k + ']\"]')\r\n                if (field.attr('type') == 'radio') {\r\n                    field.each(function () {\r\n                        if ($(this).val() == data[i][k]) {\r\n                            $(this).prop('checked', true)\r\n                        }\r\n                    })\r\n                } else if (field.attr('type') == 'checkbox') {\r\n\r\n                    if (data[i][k] == $(this).val()) {\r\n                        $(this).prop('checked', true)\r\n                    }\r\n\r\n                } else {\r\n                    field.val(data[i][k]);\r\n                }\r\n            }\r\n            continue;\r\n        }\r\n        var suffix = ''\r\n        if (isArray(data[i])) {\r\n            suffix = '[]'\r\n        }\r\n        var field = body.find('[name=\"' + i + suffix + '\"]')\r\n        if (field.attr('type') == 'radio') {\r\n            field.each(function () {\r\n                if ($(this).val() == data[i]) {\r\n                    $(this).prop('checked', true)\r\n                }\r\n            })\r\n        } else if (field.attr('type') == 'checkbox') {\r\n            field.each(function () {\r\n                if (data[i].indexOf($(this).val()) > -1) {\r\n                    $(this).prop('checked', true)\r\n                }\r\n            })\r\n        } else {\r\n            field.val(data[i]);\r\n        }\r\n    }\r\n}\r\n\r\n//\r\nfunction getData(body) {\r\n    var data = {};\r\n    var fields = body.find('[name]');\r\n    for (var i = 0; i < fields.length; i++) {\r\n        var field = fields.eq(i)\r\n        var name = field.attr('name')\r\n        if (data[name] != undefined) continue;\r\n        if (field.attr('type') == 'radio') {\r\n            body.find('[name=' + name + ']').each(function () {\r\n                if ($(this).prop('checked')) {\r\n                    data[name] = $(this).val();\r\n                }\r\n            })\r\n        } else if (field.attr('type') == 'checkbox') {\r\n            var val = []\r\n            body.find('[name=\"' + name + '\"]').each(function () {\r\n                if ($(this).prop('checked')) {\r\n                    val.push($(this).val());\r\n                }\r\n            })\r\n            data[name] = val\r\n        } else {\r\n            data[name] = field.val();\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\njQuery(function ($) {\r\n    //\r\n    var bread = $(\".breadcrumb\");\r\n    var menu = bread.data('menu');\r\n    if (menu) {\r\n        var link = $('.side-nav a[data-key=' + menu + ']');\r\n\r\n        var html = [];\r\n        if (link.length > 0) {\r\n            if (link.is('.menu_top')) {\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + link.find('i').attr('class') + '\"></i>&nbsp;' + link.text() + '</a></li>');\r\n            } else {\r\n                var parent = link.parents('.collapse').eq(0);\r\n                parent.addClass('show');\r\n                link.addClass(\"active\");\r\n                var topmenu = parent.siblings('.card-header').find('a.menu_top');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + topmenu.find('i').attr('class') + '\"></i>&nbsp;' + topmenu.text() + '</a></li>');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\">' + link.text() + '</a></li>');\r\n            }\r\n        }\r\n        var title = bread.data('title');\r\n        if (title) {\r\n            html.push('<li class=\"breadcrumb-item active\" aria-current=\"page\">' + title + '</li>');\r\n        }\r\n        bread.html(html.join(\"\\n\"));\r\n    }\r\n\r\n    $(window).on('scroll', function (e) {\r\n\r\n    }).trigger('scroll');\r\n\r\n    //\r\n    $('.checkall-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        if ($(this).is('.active')) {\r\n            ids.prop('checked', false);\r\n        } else {\r\n            ids.prop('checked', true);\r\n        }\r\n    });\r\n    $('.checkreverse-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        for (var i = 0; i < ids.length; i++) {\r\n            if (ids[i].checked) {\r\n                ids.eq(i).prop('checked', false);\r\n            } else {\r\n                ids.eq(i).prop('checked', true);\r\n            }\r\n        }\r\n    });\r\n\r\n    //\r\n    $('.action-btn').click(function (e) {\r\n        e.preventDefault();\r\n        var action = $(this).data('action');\r\n        if (!action) {\r\n            return dialog.error('');\r\n        }\r\n        action = 'action' + action.replace(/^[a-z]/, function (letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        if (!window[action] || typeof window[action] !== 'function') {\r\n            return dialog.error('');\r\n        }\r\n        var needChecks = $(this).data('need-checks');\r\n        if (needChecks === undefined) needChecks = true;\r\n        if (needChecks) {\r\n            var target = $(this).data('target');\r\n            if (!target) target = 'id';\r\n            var ids = $('[name=' + target + ']:checked');\r\n            if (ids.length < 1) {\r\n                return dialog.warning('');\r\n            } else {\r\n                var idchecks = [];\r\n                for (var i = 0; i < ids.length; i++) {\r\n                    idchecks.push(ids.eq(i).val());\r\n                }\r\n                window[action].call(this, idchecks);\r\n            }\r\n        } else {\r\n            window[action].call(this);\r\n        }\r\n    });\r\n\r\n    //  input[hidden]\r\n    $('.radiostatus').click(function (e) {\r\n        var init = $(this).data('init');\r\n        var hid = $(this).find('input');\r\n        var openText = hid.data('open');\r\n        var closeText = hid.data('close');\r\n        var value = hid.val();\r\n        if (!init) {\r\n            $(this).data('init', 1);\r\n            $(this).append('<span></span>');\r\n        } else {\r\n            value = value == '1' ? 0 : 1;\r\n            hid.val(value);\r\n        }\r\n        if (value == '1') {\r\n            $(this).find('span').text(openText)\r\n            $(this).prop('title', '' + closeText);\r\n            $(this).removeClass('off')\r\n        } else {\r\n            $(this).find('span').text(closeText)\r\n            $(this).prop('title', '' + openText);\r\n            $(this).addClass('off')\r\n        }\r\n\r\n    }).trigger('click');\r\n\r\n    //  \r\n    $('.chgstatus').click(function (e) {\r\n        if ($(this).data('ajaxing')) return;\r\n        $(this).data('ajaxing', 1);\r\n        var self = $(this);\r\n        var parent = self.parents('td');\r\n        var id = parent.data('id');\r\n        var status = self.data('status');\r\n        $.ajax({\r\n            url: parent.data('url'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            data: {\r\n                id: id,\r\n                status: status\r\n            },\r\n            success: function (json) {\r\n                self.data('ajaxing', 0);\r\n                if (json.code == 1) {\r\n                    dialog.success(json.msg);\r\n                    self.toggleClass('off');\r\n                    var totext = self.attr('title').replace('', '');\r\n                    self.text(totext);\r\n                    setTimeout(function () {\r\n                        location.reload();\r\n                    }, 1000);\r\n                } else {\r\n                    dialog.error(json.msg);\r\n                }\r\n            }\r\n        })\r\n    });\r\n\r\n    //\r\n    $('.operations .btn,.has-tooltip').tooltip();\r\n\r\n    //\r\n    $('a[rel=ajax]').click(function (e) {\r\n        e.preventDefault();\r\n        var self = $(this);\r\n        var title = $(this).data('title');\r\n        if (!title) title = $(this).text();\r\n        if (!title) title = $(this).attr('title');\r\n        var dlg = new Dialog({\r\n            btns: [''],\r\n            onshow: function (body) {\r\n                $.ajax({\r\n                    url: self.attr('href'),\r\n                    beforeSend: function (request) {\r\n                        request.setRequestHeader(\"X-Requested-With\", \"htmlhttp\");\r\n                    },\r\n                    success: function (text) {\r\n                        body.html(text);\r\n                    }\r\n                });\r\n            }\r\n        }).show('<p class=\"loading\">' + lang('loading...') + '</p>', title);\r\n\r\n    });\r\n\r\n    //\r\n    $('.link-confirm').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var text = $(this).data('confirm');\r\n        var url = $(this).attr('href');\r\n        if (text) text = text.replace(/(\\\\n|\\n)+/g, \"<br />\");\r\n        if (!text) text = lang('Confirm operation?');\r\n        var method = $(this).data('method')\r\n        if (!method) method = 'GET'\r\n\r\n        dialog.confirm(text, function () {\r\n            $.ajax({\r\n                url: url,\r\n                type: method,\r\n                dataType: 'JSON',\r\n                success: function (json) {\r\n                    dialog.alert(json.msg, function () {\r\n                        if (json.code == 1) {\r\n                            if (json.url) {\r\n                                location.href = json.url;\r\n                            } else {\r\n                                location.reload();\r\n                            }\r\n                        }\r\n                    });\r\n                },\r\n                error: function () {\r\n                    dialog.alert(lang('Server error.'));\r\n                }\r\n            })\r\n        });\r\n    });\r\n\r\n    //\r\n    $('.img-view').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var url = $(this).attr('href');\r\n        if (!url) url = $(this).data('img');\r\n        var dlg = new Dialog({\r\n            btns: ['']\r\n        }).show('<a href=\"' + url + '\" class=\"d-block text-center\" target=\"_blank\"><img class=\"img-fluid\" src=\"' + url + '\" /></a><div class=\"text-muted text-center\"></div>', '');\r\n    });\r\n\r\n    //tab\r\n    $('.nav-tabs a').click(function (e) {\r\n        e.preventDefault();\r\n        $(this).tab('show');\r\n    });\r\n\r\n    //\r\n    window.fileInputHander = function () {\r\n        var self = $(this);\r\n        if (!this.files || !this.files[0]) return;\r\n        var inputgroup = $(this).parents('.input-group').eq(0);\r\n        var parent = inputgroup.parents('div').eq(0);\r\n        var label = $(this).parents('.custom-file').find('.custom-file-label');\r\n        if (!label.data('origtext')) {\r\n            label.data('origtext', label.text());\r\n        }\r\n        label.text($(this).val());\r\n\r\n        if (!window.URL && !window.URL.createObjectURL) return;\r\n        var file = self[0].files[0];\r\n        var is_img = file.type && file.type.match(/(\\.|\\/)(jpe?g|png|gif|webp)$/);\r\n\r\n\r\n        var figure = parent.find('.figure');\r\n        if (!figure.length) {\r\n            parent.append('<figure class=\"figure\">\\n' +\r\n                '                            <img src=\"/static/images/blank.gif\" class=\"figure-img img-fluid rounded\" alt=\"image\">\\n' +\r\n                '                            <figcaption class=\"figure-caption text-center\"></figcaption>\\n' +\r\n                '                        </figure>');\r\n            figure = parent.find('.figure');\r\n        }\r\n        if (is_img) {\r\n            var img = figure.find('img');\r\n            var origurl = img.data('origurl');\r\n            if (!origurl) {\r\n                origurl = img.attr('src');\r\n                img.data('origurl', origurl);\r\n            }\r\n            var figcap = figure.find('figcaption');\r\n            if (figcap.data('origtext') === undefined) {\r\n                figcap.data('origtext', figcap.text());\r\n            }\r\n            img.attr('src', window.URL.createObjectURL(file));\r\n            figcap.text(self.val());\r\n        }\r\n\r\n        var cancel = inputgroup.find('a.cancel');\r\n        if (!cancel.length) {\r\n            inputgroup.append('<div class=\"input-group-append\"><a href=\"javascript:\" class=\"btn btn-outline-danger cancel\"></a></div>');\r\n            cancel = inputgroup.find('a.cancel');\r\n            cancel.click(function (e) {\r\n                dialog.confirm('?', function () {\r\n                    self.val('');\r\n                    label.text(label.data('origtext'));\r\n                    if (is_img) {\r\n                        img.attr('src', origurl);\r\n                        figcap.text(figcap.data('origtext'));\r\n                    }\r\n                    cancel.parent().remove();\r\n                })\r\n\r\n            })\r\n        }\r\n    };\r\n    $('.custom-file .custom-file-input').on('change', window.fileInputHander);\r\n\r\n    //Ajax\r\n    $('.btn-primary[type=submit]').click(function (e) {\r\n        var form = $(this).parents('form');\r\n        if (form.is('.noajax')) return true;\r\n        var btn = this;\r\n\r\n        var isbtn = $(btn).prop('tagName').toUpperCase() == 'BUTTON';\r\n        var origText = isbtn ? $(btn).text() : $(btn).val();\r\n        var options = {\r\n            url: $(form).attr('action'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            success: function (json) {\r\n                window.stop_ajax = false;\r\n                isbtn ? $(btn).text(origText) : $(btn).val(origText);\r\n                if (json.code == 1) {\r\n                    dialog.alert(json.msg, function () {\r\n                        if (json.url) {\r\n                            location.href = json.url;\r\n                        } else {\r\n                            location.reload();\r\n                        }\r\n                    });\r\n                } else {\r\n                    dialog.warning(json.msg);\r\n                    $(btn).removeAttr('disabled');\r\n                }\r\n            },\r\n            error: function (xhr) {\r\n                window.stop_ajax = false;\r\n                isbtn ? $(btn).text(origText) : $(btn).val(origText);\r\n                $(btn).removeAttr('disabled');\r\n                dialog.error('');\r\n            }\r\n        };\r\n        if (form.attr('enctype') === 'multipart/form-data') {\r\n            if (!FormData) {\r\n                window.stop_ajax = false;\r\n                return true;\r\n            }\r\n            options.data = new FormData(form[0]);\r\n            options.cache = false;\r\n            options.processData = false;\r\n            options.contentType = false;\r\n            options.xhr = function () { //\r\n                var xhr = $.ajaxSettings.xhr();\r\n                if (xhr.upload) {\r\n                    xhr.upload.addEventListener('progress', function (event) {\r\n                        var percent = Math.floor(event.loaded / event.total * 100);\r\n                        $(btn).text(origText + '  (' + percent + '%)');\r\n                    }, false);\r\n                }\r\n                return xhr;\r\n            };\r\n        } else {\r\n            options.data = $(form).serialize();\r\n        }\r\n\r\n        e.preventDefault();\r\n        $(this).attr('disabled', true);\r\n        window.stop_ajax = true;\r\n        $.ajax(options);\r\n    });\r\n\r\n    //\r\n    $('.pickuser').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('[name=member_id]');\r\n        var infoele = group.find('[name=member_info]');\r\n        dialog.pickUser(function (user) {\r\n            idele.val(user.id);\r\n            infoele.val('[' + user.id + '] ' + user.username + (user.mobile ? (' / ' + user.mobile) : ''));\r\n        }, $(this).data('filter'));\r\n    });\r\n\r\n    //\r\n    $('.pick-locate').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('input[type=text]');\r\n        dialog.pickLocate('qq', function (locate) {\r\n            idele.val(locate.lng + ',' + locate.lat);\r\n        }, idele.val());\r\n    });\r\n});","\r\n(function (window, $) {\r\n\r\n\r\n    var apis = {\r\n        'baidu': '//api.map.baidu.com/api?ak=__KEY__&v=1.5&services=false&callback=',\r\n        'google': '//maps.google.com/maps/api/js?key=__KEY__&callback=', //&language=zh\r\n        'tencent': '//map.qq.com/api/js?v=2.exp&key=__KEY__&callback=',\r\n        'gaode': '//webapi.amap.com/maps?v=1.3&key=__KEY__&callback='\r\n    };\r\n\r\n    function loadScript(src) {\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n        script.src = src;\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    var mapObj, mapBox, onPick;\r\n\r\n    function InitMap(maptype, box, callback, locate) {\r\n        if (mapObj) mapObj.hide();\r\n        mapBox = $(box);\r\n        onPick = callback;\r\n\r\n        switch (maptype.toLowerCase()) {\r\n            case 'baidu':\r\n                mapObj = new BaiduMap();\r\n                break;\r\n            case 'google':\r\n                mapObj = new GoogleMap();\r\n                break;\r\n            case 'tencent':\r\n            case 'qq':\r\n                mapObj = new TencentMap();\r\n                break;\r\n            case 'gaode':\r\n                mapObj = new GaodeMap();\r\n                break;\r\n        }\r\n        if (!mapObj) return dialog.warning('');\r\n        if (locate) {\r\n            if (typeof locate === 'string') {\r\n                var loc = locate.split(',');\r\n                locate = {\r\n                    lng: parseFloat(loc[0]),\r\n                    lat: parseFloat(loc[1])\r\n                }\r\n            }\r\n            mapObj.locate = locate;\r\n        }\r\n        mapObj.setMap();\r\n\r\n        return mapObj;\r\n    }\r\n\r\n    function BaseMap(type) {\r\n        if (type !== undefined) {\r\n            var key = 'MAPKEY_' + type.toUpperCase();\r\n\r\n            if (!window[key]) {\r\n                throw 'Pls define the ' + key + ' on window.';\r\n            }\r\n\r\n            this.mapkey = window[key];\r\n            this.mapType = type;\r\n            this.ishide = false;\r\n            this.isshow = false;\r\n            this.toshow = false;\r\n            this.marker = null;\r\n            this.infoWindow = null;\r\n            this.mapbox = null;\r\n            this.locate = null;\r\n            this.map = null;\r\n        }\r\n    }\r\n\r\n    BaseMap.prototype.isAPIReady = function () {\r\n        return false;\r\n    };\r\n    BaseMap.prototype.pointToObject = function () {\r\n    };\r\n    BaseMap.prototype.objectToPoint = function () {\r\n    };\r\n    BaseMap.prototype.setMap = function () {\r\n    };\r\n    BaseMap.prototype.showInfo = function () {\r\n    };\r\n    BaseMap.prototype.getCenter = function () {\r\n    };\r\n    BaseMap.prototype.getAddress = function (rs) {\r\n        return \"\";\r\n    };\r\n    BaseMap.prototype.getAddressComponent = function (rs) {\r\n        return {};\r\n    };\r\n    BaseMap.prototype.setLocate = function (address) {\r\n    };\r\n\r\n    BaseMap.prototype.loadAPI = function () {\r\n        var self = this;\r\n        if (!this.isAPIReady()) {\r\n            this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\">loading...</div>');\r\n            mapBox.append(this.mapbox);\r\n\r\n            //console.log(this.mapType+' maploading...');\r\n            var func = 'mapload' + new Date().getTime();\r\n            window[func] = function () {\r\n                self.setMap();\r\n                delete window[func];\r\n            };\r\n            var apiurl = apis[this.mapType].replace('__KEY__', this.mapkey);\r\n            loadScript(apiurl + func);\r\n            return false;\r\n        } else {\r\n            //console.log(this.mapType + ' maploaded');\r\n            this.mapbox = $('#' + this.mapType + 'map');\r\n            if (this.mapbox.length < 1) {\r\n                this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\"></div>');\r\n                mapBox.append(this.mapbox);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    BaseMap.prototype.setInfoContent = function () {\r\n        if (!this.infoWindow) return;\r\n        var title = '<b></b>';\r\n        var addr = '<p style=\"line-height:1.6em;\"></p>';\r\n        if (this.infoWindow.setTitle) {\r\n            this.infoWindow.setTitle(title);\r\n            this.infoWindow.setContent(addr);\r\n        } else {\r\n            var content = '<h3>' + title + '</h3><div style=\"width:250px\">' + addr + '</div>';\r\n            this.infoWindow.setContent(content);\r\n        }\r\n    };\r\n    BaseMap.prototype.showAtCenter = function () {\r\n        var center = this.getCenter();\r\n        this.showInfo(center);\r\n    };\r\n    BaseMap.prototype.showLocationInfo = function (pt, rs) {\r\n\r\n        this.showInfo();\r\n        var address = this.getAddress(rs);\r\n        var addressComponent = this.getAddressComponent(rs);\r\n        var locate = {};\r\n        if (typeof (pt.lng) === 'function') {\r\n            locate.lng = pt.lng();\r\n            locate.lat = pt.lat();\r\n        } else {\r\n            locate.lng = pt.lng;\r\n            locate.lat = pt.lat;\r\n        }\r\n\r\n        onPick(address, locate, addressComponent);\r\n    };\r\n    BaseMap.prototype.show = function () {\r\n        this.ishide = false;\r\n        this.setMap();\r\n        this.showInfo();\r\n    };\r\n    BaseMap.prototype.hide = function () {\r\n        this.ishide = true;\r\n        if (this.infoWindow) {\r\n            this.infoWindow.close();\r\n        }\r\n        if (this.mapbox) {\r\n            $(this.mapbox).remove();\r\n        }\r\n    };\r\n\r\n\r\n    function BaiduMap() {\r\n        BaseMap.call(this, \"baidu\");\r\n    }\r\n\r\n    BaiduMap.prototype = new BaseMap();\r\n    BaiduMap.prototype.constructor = BaiduMap;\r\n    BaiduMap.prototype.isAPIReady = function () {\r\n        return !!window['BMap'];\r\n    };\r\n\r\n    BaiduMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        var map = self.map = new BMap.Map(this.mapbox.attr('id')); //\r\n        map.addControl(new BMap.NavigationControl());  //\r\n        map.addControl(new BMap.ScaleControl());\r\n        map.addControl(new BMap.OverviewMapControl());\r\n        map.enableScrollWheelZoom();\r\n\r\n        if (!this.locate) this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n\r\n        map.centerAndZoom(point, 15); //\r\n        this.marker = new BMap.Marker(point); //\r\n        this.marker.enableDragging(); //\r\n\r\n        var gc = new BMap.Geocoder(); //\r\n        //\r\n        this.marker.addEventListener(\"dragend\", function (e) {\r\n            //\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        //\r\n        this.marker.addEventListener(\"click\", function (e) {\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        map.addOverlay(this.marker); //\r\n\r\n        gc.getLocation(point, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n\r\n        this.infoWindow = new BMap.InfoWindow(\"\", {\r\n            width: 250,\r\n            title: \"\"\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    BaiduMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng: point.lng,\r\n            lat: point.lat\r\n        };\r\n    };\r\n    BaiduMap.prototype.objectToPoint = function (object) {\r\n        return new BMap.Point(parseFloat(object.lng), parseFloat(object.lat));\r\n    };\r\n    BaiduMap.prototype.getCenter = function () {\r\n        var center = this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    BaiduMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if (point) {\r\n            this.locate = point;\r\n            this.marker.panTo(new BMap.Point(point.lng, point.lat));\r\n        }\r\n        this.setInfoContent();\r\n\r\n        this.marker.openInfoWindow(this.infoWindow);\r\n    };\r\n    BaiduMap.prototype.getAddress = function (rs) {\r\n        var addComp = rs.addressComponents;\r\n        if (addComp) {\r\n            return addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street + \", \" + addComp.streetNumber;\r\n        }\r\n    };\r\n    BaiduMap.prototype.getAddressComponent = function (rs) {\r\n        return rs.addressComponents;\r\n    };\r\n    BaiduMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new BMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n\r\n    function GoogleMap() {\r\n        BaseMap.call(this, \"google\");\r\n        this.infoOpts = {\r\n            width: 250,     //\r\n            //   height: 100,     //\r\n            title: \"\"  //\r\n        };\r\n    }\r\n\r\n    GoogleMap.prototype = new BaseMap();\r\n    GoogleMap.prototype.constructor = GoogleMap;\r\n    GoogleMap.prototype.isAPIReady = function () {\r\n        return window['google'] && window['google']['maps']\r\n    };\r\n    GoogleMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        //\r\n        if (this.mapbox.length < 1) return;\r\n\r\n        var map = self.map = new google.maps.Map(this.mapbox[0], {\r\n            zoom: 15,\r\n            draggable: true,\r\n            scaleControl: true,\r\n            streetViewControl: true,\r\n            zoomControl: true\r\n        });\r\n\r\n        //\r\n        if (!this.locate) this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point);\r\n        this.marker = new google.maps.Marker({ position: point, map: map, draggable: true });\r\n\r\n\r\n        var gc = new google.maps.Geocoder();\r\n\r\n        this.marker.addListener(\"dragend\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({ 'location': point }, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        //\r\n        this.marker.addListener(\"click\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({ 'location': point }, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        gc.geocode({ 'location': point }, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n        this.infoWindow = new google.maps.InfoWindow({ map: map });\r\n        this.infoWindow.setPosition(point);\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    GoogleMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng: point.lng,\r\n            lat: point.lat\r\n        };\r\n    };\r\n    GoogleMap.prototype.objectToPoint = function (object) {\r\n        return new google.maps.LatLng(parseFloat(object.lat), parseFloat(object.lng));\r\n    };\r\n    GoogleMap.prototype.getCenter = function () {\r\n        var center = this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GoogleMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if (point) {\r\n            this.locate = point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setOptions({ position: this.marker.getPosition() });\r\n        this.setInfoContent();\r\n\r\n    };\r\n    GoogleMap.prototype.getAddress = function (rs, status) {\r\n        if (rs && rs[0]) {\r\n            return rs[0].formatted_address;\r\n        }\r\n    };\r\n    GoogleMap.prototype.getAddressComponent = function (rs, status) {\r\n        var result = {};\r\n        if (rs && rs[0]) {\r\n            var comps = rs[0].address_components\r\n            if (comps[0]) result.country = comps[0].long_name\r\n            if (comps[1]) result.province = comps[1].long_name\r\n            if (comps[2]) result.city = comps[2].long_name\r\n            if (comps[3]) result.district = comps[3].long_name\r\n            if (comps[4]) result.street = comps[4].long_name\r\n            if (comps[5]) result.address = comps[5].long_name\r\n        }\r\n        return result;\r\n    };\r\n    GoogleMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new google.maps.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    function TencentMap() {\r\n        BaseMap.call(this, \"tencent\");\r\n    }\r\n\r\n    TencentMap.prototype = new BaseMap();\r\n    TencentMap.prototype.constructor = TencentMap;\r\n    TencentMap.prototype.isAPIReady = function () {\r\n        return window['qq'] && window['qq']['maps'];\r\n    };\r\n    TencentMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng: point.getLng(),\r\n            lat: point.getLat()\r\n        };\r\n    };\r\n    TencentMap.prototype.objectToPoint = function (object) {\r\n        return new qq.maps.LatLng(parseFloat(object.lat), parseFloat(object.lng));\r\n    };\r\n    TencentMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        //\r\n        var map = self.map = new qq.maps.Map(this.mapbox[0], { zoom: 15 });\r\n        //\r\n        new qq.maps.ScaleControl({\r\n            align: qq.maps.ALIGN.BOTTOM_LEFT,\r\n            margin: qq.maps.Size(85, 15),\r\n            map: map\r\n        });\r\n        //map.addControl(new BMap.OverviewMapControl());\r\n        //map.enableScrollWheelZoom();\r\n\r\n        //\r\n        if (!this.locate) this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point); //\r\n\r\n        //\r\n        this.marker = new qq.maps.Marker({\r\n            position: point,\r\n            draggable: true,\r\n            map: map\r\n        });\r\n        this.marker.setAnimation(qq.maps.MarkerAnimation.DOWN);\r\n\r\n        //\r\n        var gc = new qq.maps.Geocoder({\r\n            complete: function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            }\r\n        });\r\n\r\n        qq.maps.event.addListener(this.marker, 'click', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n        //Marker\r\n        qq.maps.event.addListener(this.marker, 'dragend', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n\r\n        gc.getAddress(point);\r\n\r\n        this.infoWindow = new qq.maps.InfoWindow({ map: map });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.getCenter = function () {\r\n        var center = this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    TencentMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if (point) {\r\n            this.locate = point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n        this.infoWindow.open();\r\n        this.setInfoContent();\r\n    };\r\n\r\n    TencentMap.prototype.getAddress = function (rs) {\r\n        if (rs && rs.detail) {\r\n            return rs.detail.address;\r\n        }\r\n        return \"\";\r\n    };\r\n\r\n    TencentMap.prototype.getAddressComponent = function (rs) {\r\n        if (rs && rs.detail) {\r\n            var comp = rs.detail.addressComponents\r\n            if (!comp.province) {\r\n                comp.province = comp.city;\r\n            }\r\n            if (comp.streetNumber) {\r\n                comp.address = comp.streetNumber\r\n            }\r\n            return comp;\r\n        }\r\n        return {};\r\n    };\r\n\r\n    TencentMap.prototype.setLocate = function (address) {\r\n        // \r\n        var self = this;\r\n        var myGeo = new qq.maps.Geocoder({\r\n            complete: function (result) {\r\n                if (result && result.detail && result.detail.location) {\r\n                    var point = result.detail.location;\r\n                    self.map.setCenter(point);\r\n                    self.marker.setPosition(point);\r\n                    self.showLocationInfo(point, result);\r\n                } else {\r\n                    alert(\"\");\r\n                }\r\n            },\r\n            error: function (result) {\r\n                alert(\"\");\r\n            }\r\n        });\r\n        myGeo.getLocation(address);\r\n    };\r\n\r\n\r\n    function GaodeMap() {\r\n        BaseMap.call(this, \"gaode\");\r\n        this.infoOpts = {\r\n            width: 250,     //\r\n            //   height: 100,     //\r\n            title: \"\"  //\r\n        };\r\n    }\r\n\r\n    GaodeMap.prototype = new BaseMap();\r\n    GaodeMap.prototype.constructor = GaodeMap;\r\n    GaodeMap.prototype.isAPIReady = function () {\r\n        return !!window['AMap']\r\n    };\r\n\r\n    GaodeMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        var map = self.map = new AMap.Map(this.mapbox.attr('id'), {\r\n            resizeEnable: true,\r\n            dragEnable: true,\r\n            zoom: 13\r\n        });\r\n        map.plugin([\"AMap.ToolBar\", \"AMap.Scale\", \"AMap.OverView\"], function () {\r\n            map.addControl(new AMap.ToolBar());\r\n            map.addControl(new AMap.Scale());\r\n            map.addControl(new AMap.OverView());\r\n        });\r\n\r\n        $('[name=txtLang]').unbind().on('change', function () {\r\n            var lang = $(this).val();\r\n            if (lang) map.setLang(lang);\r\n        }).trigger('change');\r\n\r\n\r\n        //\r\n        if (!this.locate) this.locate = this.getCenter()\r\n        var point = this.objectToPoint(this.locate);\r\n        map.setCenter(point);\r\n\r\n        this.marker = new AMap.Marker({ position: point, map: map }); //\r\n        this.marker.setDraggable(true); //\r\n\r\n\r\n        this.infoWindow = new AMap.InfoWindow();\r\n        this.infoWindow.open(map, point);\r\n\r\n        map.plugin([\"AMap.Geocoder\"], function () {\r\n            var gc = new AMap.Geocoder(); //\r\n            //\r\n            self.marker.on(\"dragend\", function (e) {\r\n                //\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            //\r\n            self.marker.on(\"click\", function (e) {\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            gc.getAddress(point, function (st, rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    GaodeMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng: point.getLng(),\r\n            lat: point.getLat()\r\n        };\r\n    };\r\n    GaodeMap.prototype.objectToPoint = function (object) {\r\n        return new AMap.LngLat(object.lng, object.lat);\r\n    };\r\n    GaodeMap.prototype.getCenter = function () {\r\n        var center = this.map.center();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GaodeMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if (point) {\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.setInfoContent();\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n    };\r\n\r\n    GaodeMap.prototype.getAddress = function (rs) {\r\n        return rs.regeocode.formattedAddress;\r\n    };\r\n    GaodeMap.prototype.getAddressComponent = function (rs) {\r\n        var comp = rs.regeocode.addressComponent\r\n        return comp;\r\n    };\r\n\r\n    GaodeMap.prototype.setLocate = function (address) {\r\n        // \r\n        var myGeo = new AMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    window.InitMap = InitMap;\r\n})(window, jQuery);"]}